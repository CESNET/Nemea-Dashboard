function config(t,e,o,n){t.when("/login",{controller:"loginController",templateUrl:"views/login.html"}).when("/",{controller:"homeController",templateUrl:"views/home.html"}).when("/user",{controller:"userController",templateUrl:"views/login.html"}).when("/events",{controller:"eventsController",templateUrl:"views/events.html",reloadOnSearch:!1}).when("/events/:id",{controller:"eventController",templateUrl:"views/event.html"}).when("/profile",{controller:"profileController",templateUrl:"views/profile.html"}).otherwise({redirectTo:"/login"}),e.theme("default").primaryPalette("light-blue").accentPalette("orange"),o.interceptors.push("notAllowedInterceptor"),n.setKeyPrefix("nd-")}function topBarCtrl(t,e,o){this.user="Petr",this.toggleLeft=function(){o("left").toggle()},this.logout=function(){var o=t.confirm().title("Are you sure?").content("You are about to be logged out. All unsaved changes will be lost in the void!").ok("Log me out").cancel("Keep me here");t.show(o).then(function(){e.path("/login")})}}function topBarCtrl(t,e,o){this.toggleLeft=function(){o("left").toggle()}}config.$inject=["$routeProvider","$mdThemingProvider","$httpProvider","$localStorageProvider"],topBarCtrl.$inject=["$mdDialog","$location","$mdSidenav"];var app=angular.module("gui",["ngMaterial","ngRoute","ngMessages","nvd3","ngStorage","ngMap","gridster"]);app.config(config),app.filter("nospace",function(){return function(t){return t?t.replace(/ /g,""):""}}),app.run(["user","$localStorage","$location","$rootScope","$log",function(t,e,o,n,i){n.$on("$locationChangeStart",function(t){void 0==e.token&&(i.info("no token found, redirecting to /login"),o.path("/login"))})}]),app.factory("notAllowedInterceptor",["$log","$localStorage","$location","$injector","$q",function(t,e,o,n,i){var r={responseError:function(n){return 401==n.status&&(t.error("You are not allowed to access, redirecting to /login"),delete e.token,o.path("/login")),i.reject(n)}};return r}]),app.constant("CONFIG",{host:"https://benefizio.liberouter.org",port:"5555",version:"v2"}),app.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}),app.constant("CATEGORIES",["any","Recon.Scanning","Attempt.Login","Availability.DoS"]),app.constant("PROTOCOLS",["tcp","dns","udp"]),app.constant("TYPES",["barchart","piechart","top","sum"]),app.constant("PIECHART",{options:{chart:{type:"pieChart",height:450,x:function(t){return t.key[0]},y:function(t){return t.x},showLabels:!0,donut:!0,padAngle:0,cornerRadius:1,transitionDuration:500,labelThreshold:0,legend:{margin:{top:5,right:0,bottom:0,left:0}},tooltipContent:function(t,e,o,n,i){return console.log(t),console.log(o),console.log(n),console.log(i),"Olalala!"},pie:{dispatch:{elementClick:function(t){var e=new Date;console.log(t),e.setTime(e.getTime()-864e5),e.setHours(0),e.setMinutes(0),window.location="#/events?filter&date="+e.toISOString()+"&from="+(new Date).getHours()+":"+(new Date).getMinutes()+"&category="+t.data.key[0]}},labelType:"percent",labelsOutside:!0}}}}),app.constant("AREA",{options:{chart:{type:"multiBarChart",height:450,margin:{top:30,right:20,bottom:100,left:50},x:function(t){return t.x},y:function(t){return t.Count},useVoronoi:!1,clipEdge:!0,duration:100,useInteractiveGuideline:!0,xAxis:{showMaxMin:!1,tickFormat:function(t){return d3.time.format("%m/%d %H:%M")(new Date(t))},rotateLabels:-45},yAxis:{tickFormat:function(t){return d3.format(",.0f")(t)}},zoom:{enabled:!0,useFixedDomain:!1,useNiceScale:!1,horizontalOff:!1,verticalOff:!0,unzoomEventType:"dblclick.zoom"},dispatch:{stateChange:function(t){console.log("stateChange")},changeState:function(t){console.log("changeState")},tooltipShow:function(t){console.log("tooltipShow")},tooltipHide:function(t){console.log("tooltipHide")}},multibar:{dispatch:{elementClick:function(t){var e=new Date(t.data.x);console.log(e);var o=e.getHours(),n=e.getMinutes();e.setHours(0),e.setMinutes(0),window.location="#/events?filter&date="+e.toISOString()+"&from="+("0"+o).slice(-2)+":"+("0"+n).slice(-2)+"&category="+t.data.key}}}}}}),app.constant("MENU",[{title:"Dashboard",link:"#/"},{title:"Events",link:"#/events"},{title:"Settings",items:[{title:"My profile",link:"#/profile"},{title:"Users",link:"/settings"}]}]),app.controller("eventController",["$scope","$routeParams","$http","api",function(t,e,o,n){t.id=e,t.geo=[],t.back=function(){window.history.back()},n.get("id/"+e.id).success(function(e){t.data=e,void 0!=t.data.Source&&void 0!=t.data.Target&&t.data.Source[0].IP4&&t.data.Target[0].IP4?(o.get("http://freegeoip.net/json/"+t.data.Target[0].IP4[0]).success(function(e){e.type="Target",t.geo.push(e)}),o.get("http://freegeoip.net/json/"+t.data.Source[0].IP4[0]).success(function(e){e.type="Source",t.geo.push(e)})):void 0==t.data.Source||void 0==t.data.Source[0].IP4?o.get("http://freegeoip.net/json/"+t.data.Target[0].IP4[0]).success(function(e){e.type="Target",t.geo.push(e)}):o.get("http://freegeoip.net/json/"+t.data.Source[0].IP4[0]).success(function(e){e.type="Source",t.geo.push(e)})})}]),app.filter("json2html",["$sce","$filter",function(t,e){return function(o){var n="";return angular.forEach(o,function(t,o){n+="<div>","object"==typeof t?("number"!=typeof o&&"$date"!=o&&(n=n+"<em>"+o+"</em>: "),n=n+'<div class="sub">'+e("json2html")(t)+"</div>"):("number"!=typeof o&&"$date"!=o&&(n=n+"<em>"+o+"</em>: "),n=t>1e12?n+"<span>"+e("date")(t,"yyyy/MM/dd H:mm:ss")+"</span>":n+"<span>"+t+"</span>"),n+="</div>"}),t.trustAs("html",n)}}]),app.filter("idea",function(){return function(t){var e={};return angular.forEach(t,function(t,o){"_id"!=o&&(t.$date?e[o]=new Date(t.$date).toISOString().slice(0,19)+"Z":e[o]=t)}),e}}),app.controller("eventsController",["$scope","$http","$location","api",function(t,e,o,n){t.filter={category:"",src_ip:"",trt_ip:"",desc:"",flows_from:"",flows_to:"",items:100},t.query={from:"",to:"",date:new Date,description:"",category:"",limit:100},t.data=[],t.loadbtn="Load",console.log(t.query.date),t.loadItems=function(e){t.loadbtn="Loading...";var i=e.from.split(":"),r=new Date(e.date);if(r.setHours(r.getHours()+i[0]),r.setMinutes(i[1]),o.search("filter",!0),o.search("from",e.from),o.search("date",e.date),o.search("limit",e.limit),e.to){var a=e.to.split(":"),s=new Date(e.date);s.setHours(s.getHours()+a[0]),s.setMinutes(a[1]),o.search("to",e.to)}else var s=null;""!=e.description?o.search("description",e.description):e.description=null,""!=e.category?o.search("category",e.category):e.category=null;var c={from:r,to:s,category:e.category,description:e.description,limit:e.limit};n.get("query",c,!0).success(function(e){t.data=e,t.loadbtn="Load"}).error(function(){t.loadbtn="Load"})},o.search().filter?(t.query=o.search(),console.log(t.query.date),t.query.date=new Date(t.query.date),t.loadItems(t.query)):n.get("100").success(function(e){t.data=e}),t.events=function(e){var o=[];""!=t.filter.src_ip&&("Source"in e&&"IP4"in e.Source[0]&&e.Source[0].IP4[0].toLowerCase().indexOf(t.filter.src_ip.toLowerCase())>-1?o.push(1):o.push(0)),""!=t.filter.trt_ip&&("Target"in e&&"IP4"in e.Target[0]&&e.Target[0].IP4[0].toLowerCase().indexOf(t.filter.trt_ip.toLowerCase())>-1?o.push(1):o.push(0)),""!=t.filter.category&&(e.Category[0].toLowerCase().indexOf(t.filter.category.toLowerCase())>-1?o.push(1):o.push(0)),""!=t.filter.desc&&(e.Description.toLowerCase().indexOf(t.filter.desc.toLowerCase())>-1?o.push(1):o.push(0)),""!=t.filter.flows_from&&(e.FlowCount>Number(t.filter.flows_from)?o.push(1):o.push(0)),""!=t.filter.flows_to&&(e.FlowCount<Number(t.filter.flows_to)?o.push(1):o.push(0));for(var n=1,i=0;i<o.length;i++)n*=o[i];return 1==n?!0:!1}}]),app.directive("validateHours",function(){var t=[],e=[];return{require:"ngModel",link:function(o,n,i,r){r.$validators.time=function(o,n){return"query.from"==i.ngModel&&n?e=n.split(":"):n&&(t=n.split(":")),console.log(e),console.log(t),2!=t.length&&2!=e.length||!(t[0]<e[0]||t[0]<=e[0]&&t[1]<e[1]||t[0]<0||t[0]>23||t[1]<0||t[1]>59||e[0]<0||e[0]>23||e[1]<0||e[1]>59)?!0:!1}}}}),app.value("boxes_arr",[{row:0,height:"",items:[{title:"Events shares",type:"piechart",content:"",config:{metric:"category",type:"piechart",period:"24",begintime:""}},{title:"Last 24 hours",type:"barchart",data:"",timestamp:"",config:{metric:"category",type:"barchart",period:24,window:60,begintime:""}}]},{row:1,items:[{title:"Top events in 1 hour",type:"top",config:{period:1,begintime:""}},{title:"2",type:"incident"}]}]),app.controller("homeController",["$scope","$log","api","boxes_arr","$http","$localStorage","user",function(t,e,o,n,i,r,a){t.activeGrid=!1,t.openMenu=function(t,e){originatorEv=e,t(e)},t.addItem=function(){t.$broadcast("addItem")},t.enableGrid=function(){console.log("Enable grid"),t.$broadcast("enableGrid"),t.activeGrid=!t.activeGrid}}]),app.controller("topBar",topBarCtrl),app.controller("row",["$scope","$timeout",function(t,e){t.$on("requestRedraw",function(t){t.stopPropagation(),e(function(){console.log("request accepted"),window.dispatchEvent(new Event("resize"))},10)})}]),app.controller("box",["$scope","$log","boxes_arr","$timeout","$element","$mdDialog","PROTOCOLS","TYPES","CATEGORIES","$http","PIECHART","AREA","api","$location","user",function(t,e,o,n,i,r,a,s,c,l,u,p,d,g,f){function h(){void 0==t.box||"piechart"!=t.box.type&&"barchart"!=t.box.type&&"top"!=t.box.type&&"sum"!=t.box.type||(t.box.config.begintime=function(){var e=new Date;return e.setHours(e.getHours()-t.box.config.period),e}())}h(),t.box.loading=!0,t.openMenu=function(t,e){originatorEv=e,t(e)},t.editMode=!1,t.backupModel={},t.protocol=a,t.types=s,t.categories=c,t.edit=function(e){t.editMode=!0,t.backupModel=angular.copy(e),t.$emit("switch-drag")},t.save=function(){t.user(),"piechart"==t.box.type&&(t.box.options=u.options),"barchart"==t.box.type&&(t.box.options=p.options),t.backupModel={},t.box.config.type=t.box.type,t.editMode=!1,t.box.loading=!0,h(),t.$emit("switch-drag"),"piechart"==t.box.type||"barchart"==t.box.type?d.get("agg",t.box.config,!0).success(function(e){t.box.loading=!1,t.box.data=e}):"top"==t.box.type?d.get("top",t.box.config,!0).success(function(e){t.box.loading=!1,t.box.data=e}):"sum"==t.box.type&&d.get("count",t.box.config).success(function(e){t.box.loading=!1,t.box.data=e})},t.cancel=function(e){t.box=angular.copy(t.backupModel),t.backupModel={},t.editMode=!1,t.$emit("switch-drag")},t.top=function(){h(),d.get("top",t.box.config,!0).success(function(e){console.log(e),t.box.data=e})},void 0!=t.box&&("piechart"==t.box.type||"barchart"==t.box.type?("piechart"==t.box.type&&(t.box.options=u.options),"barchart"==t.box.type&&(t.box.options=p.options),t.box.config.type=t.box.type,d.get("agg",t.box.config).success(function(e){if(t.box.loading=!1,t.box.data=e,"piechart"==t.box.type)for(var o=0;o<t.box.data.length;o++)t.total=t.total+Number(t.box.data[o].x)})):"top"==t.box.type?d.get("top",t.box.config).success(function(e){t.box.loading=!1,t.box.data=e}):"sum"==t.box.type&&d.get("count",t.box.config).success(function(e){t.box.loading=!1,t.box.data=e})),t.user=function(){var o=angular.copy(t.items);console.log(o);for(var n=0;n<o.length;n++)delete o[n].data,delete o[n].options;var i={jwt:f.jwt(),settings:o};e.info(i),f.put(i).success(function(t){console.log("Data"),console.log(t)}).error(function(t){e.error(t)})},t.$on("saveUser",function(){t.user()}),t.$on("gridster-item-resized",function(t){n(function(){console.log("request accepted"),window.dispatchEvent(new Event("resize"))},100)})}]),app.controller("grid",["$scope","$timeout","$log","user",function(t,e,o,n){t.opt={outerMargin:!1,columns:6,pushing:!0,rowHeight:260,colWidth:"auto",floating:!0,swapping:!0,mobileBreakPoint:933,draggable:{enabled:!1},resizable:{enabled:!1,handles:["n","e","s","w","se","sw"],stop:function(o,n,i){console.log("resize end"),t.$emit("requestRedraw"),e(function(){console.log("request accepted"),window.dispatchEvent(new Event("resize"))},100)}}},console.log(n.config()),t.$on("enableGrid",function(){1==t.opt.resizable.enabled&&t.$broadcast("saveUser"),t.opt.resizable.enabled=!t.opt.resizable.enabled,t.opt.draggable.enabled=!t.opt.draggable.enabled}),t.remove=function(e){t.items.splice(t.items.indexOf(e),1)},t.items=n.config(),t.$on("addItem",function(){var e={title:"New box",loading:!1,sizeX:1,sizeY:1};t.items.push(e)})}]),app.directive("gridsterDynamicHeight",["$timeout",function(t){function e(t,e,o){t.$watch(function(){return e[0].scrollHeight},function(e,o){var n=270,i=n*t.item.sizeY;if(e>i){var r=Math.floor(e/n);t.item.sizeY=r}})}var o={scope:{item:"="},link:e,restrict:"A"};return o}]),app.controller("loginController",["$scope","$location","$log","user",function(t,e,o,n){t.title="Login to Nemea Dashboard",t.loginBtn="Login",t.submit=function(o){t.loginBtn="Authenticating...",t.loginBtnDisabled=!0,n.auth(o).success(function(t){e.path("/")}).error(function(e){t.error_mes=e,t.loginBtn="Login",t.loginBtnDisabled=!1})}}]),app.controller("profileController",["$scope","user","api",function(t,e,o){t.user=e.config(),t.editUser=function(t){console.log(t)}}]),app.service("api",["$http","$log","$mdToast","$localStorage","PIECHART","CONFIG",function(t,e,o,n,i,r){var a=r.host+":"+r.port+"/"+r.version+"/events/";this.auth=function(){return n.token},this.config=function(){t.get("http://benefizio.liberouter.org:5555/config").success(function(t){this.addr=t.host+":"+t.port+t.events,n.config=t,alert(t)})},this.get=function(n,i,r){return t({url:a+n,method:"GET",params:i,headers:{Authorization:this.auth()}}).success(function(t){return void 0!=r&&o.show(o.simple().textContent("Data successully loaded").position("top right").hideDelay(3e3).theme("success-toast")),t}).error(function(){e.error("Cannot fetch data"),o.show(o.simple().textContent("Something went wrong").position("top right").hideDelay(3e3).theme("error-toast"))})},this.post=function(n,i,r){return t.post(a+n,JSON.stringify(i)).success(function(t){return r&&o.show(o.simple().textContent("Data successfully loaded").position("top right").hideDelay(3e3).theme("success-toast")),t}).error(function(){e.error("Cannot fetch data"),o.show(o.simple().textContent("Something went wrong").position("top right").hideDelay(3e3).theme("error-toast"))})},this.put=function(n,i,r){return t.put(a+n,JSON.stringify(i)).success(function(t){return r&&o.show(o.simple().textContent("Data successfully loaded").position("top right").hideDelay(3e3).theme("success-toast")),t}).error(function(){e.error("Cannot fetch data"),o.show(o.simple().textContent("Something went wrong").position("top right").hideDelay(3e3).theme("error-toast"))})}}]),app.factory("menu",["$http",function(t){return t.get("json/menu.json").success(function(t){return t})}]),app.factory("jsondata",["$http",function(t){return t.get("json/testfile_100.json").success(function(t){return t})}]),app.directive("sidebarMenu",function(){return{scope:{section:"="},templateUrl:"partials/sidebar-menu.html",controller:["$scope","$mdSidenav","$location","MENU","user",function(t,e,o,n,i){t.menu=n,t.isActive=function(t){return o.path()==t},t.changeMode=function(){t.$emit("reqChangeMode")},t.enable=!0,t.toggleItem=function(){t.toggleBtn="toggled"},t.closeLeft=function(){e("left").toggle()},t.logout=function(){i.logout()}}]}}),app.directive("topbarMenu",function(){return{scope:{section:"="},templateUrl:"partials/topbar-menu.html",controller:["$scope","$mdSidenav",function(t,e){t.toggleLeft=function(){e("left").toggle()}}]}}),app.controller("topBar",topBarCtrl),app.directive("boxes",function(){return{scope:{section:"="},templateUrl:"partials/boxes.html"}}),app.directive("clickEdit",function(){var t='<div><h2 ng-show="view.showTitle" ng-click="editTitle()">{{box.title}}</h2><md-input-container ng-hide="showTitle"><input type="text" value="{{box.title}}" ng-blur="editTitle(box.title)" ng-model="box.title" class="focusTitle" aria-label="Edit Title"></md-input-container></div>';return{restrict:"A",replace:!0,template:t,scope:{value:"=clickEdit"},controller:["$scope","inputText","$timeout",function(t,e,o){t.view.showTitle=!0,(t.showTitle=!0)&&o(function(){angular.element(".focusTitle").trigger("focus"),console.log("trigger")},100),t.editTitle=function(){t.view.showTitle=!t.view.showTitle}}]}}),app.directive("clickToEdit",function(){var t='<div class="click-to-edit"><div ng-hide="view.editorEnabled" ng-click="enableEditor()"><a ng-click="enableEditor()"><md-icon md-svg-src="img/icons/edit.svg"></md-icon></a>{{value}} </div><md-input-container ng-show="view.editorEnabled"><div><input ng-model="view.editableValue" class="focusTitle" aria-label="Title"><span ng-click="save()">Save</span> or <a ng-click="disableEditor()">cancel</a>.</div></md-input-container></div>';return{restrict:"A",replace:!0,template:t,scope:{value:"=clickToEdit"},controller:["$scope","$timeout",function(t,e){t.view={editableValue:t.value,editorEnabled:!1},t.enableEditor=function(){t.view.editorEnabled=!0,t.view.editableValue=t.value,e(function(){angular.element(".focusTitle").trigger("focus"),console.log("trigger")},100)},t.disableEditor=function(){t.view.editorEnabled=!1},t.save=function(){t.value=t.view.editableValue,t.disableEditor()}}]}}),app.service("user",["$localStorage","$http","$mdToast","$location","CONFIG",function(t,e,o,n,i){var r=i.host+":"+i.port+"/"+i.version+"/users/";this.config=function(){return t.dashboard},this.jwt=function(){return t.jwt},this.auth=function(o){return e.post(r+"auth",angular.toJson(o)).success(function(e){t.token=e.jwt,delete t.dashboard,t.dashboard=e.settings}).error(function(t,e){return console.log(t),console.log(e),t})},this.put=function(n,i){return e({url:r,method:"PUT",data:angular.toJson(n),headers:{Authorization:t.token}}).success(function(t){return i&&o.show(o.simple().textContent("User settings updated").position("top right").hideDelay(3e3).theme("success-toast")),t}).error(function(t,e){$log.error("Something went wrong sending user data"),o.show(o.simple().textContent("Something went wrong").position("top right").hideDelay(3e3).theme("error-toast"))})},this.logout=function(){t.token;return e({url:r+"logout",method:"DELETE",headers:{Authorization:t.token}}).success(function(e){n.path("/login"),delete t.token,delete t.dashboard,o.show(o.simple().textContent("Logout successfull").position("top right").hideDelay(3e3))}).error(function(e,i){n.path("/login"),delete t.token,delete t.dashboard,o.show(o.simple().textContent("Logout failed on server side, but you are logged out").position("top right").hideDelay(3e3))})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2hvbWVDb250cm9sbGVyLmpzIiwic2VydmljZXMvbWVudS5qcyIsImpzL2FwcC5taW4uanMiLCJjb25maWcuanMiLCJjb25zdGFudHMuanMiLCJjb250cm9sbGVycy9ldmVudENvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9ldmVudHNDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW5Db250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvcHJvZmlsZUNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlcy9hcGkuanMiLCJzZXJ2aWNlcy91c2VyLmpzIl0sIm5hbWVzIjpbImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJGh0dHBQcm92aWRlciIsIiRsb2NhbFN0b3JhZ2VQcm92aWRlciIsIndoZW4iLCJjb250cm9sbGVyIiwidGVtcGxhdGVVcmwiLCJyZWxvYWRPblNlYXJjaCIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsImludGVyY2VwdG9ycyIsInB1c2giLCJzZXRLZXlQcmVmaXgiLCJ0b3BCYXJDdHJsIiwiJG1kRGlhbG9nIiwiJGxvY2F0aW9uIiwiJG1kU2lkZW5hdiIsInRoaXMiLCJ1c2VyIiwidG9nZ2xlTGVmdCIsInRvZ2dsZSIsImxvZ291dCIsImNvbmZpcm0iLCJ0aXRsZSIsImNvbnRlbnQiLCJvayIsImNhbmNlbCIsInNob3ciLCJ0aGVuIiwicGF0aCIsIiRpbmplY3QiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmlsdGVyIiwidmFsdWUiLCJyZXBsYWNlIiwicnVuIiwiJGxvY2FsU3RvcmFnZSIsIiRyb290U2NvcGUiLCIkbG9nIiwiJG9uIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJpbmZvIiwiZmFjdG9yeSIsIiRpbmplY3RvciIsIiRxIiwibm90QWxsb3dlZEludGVyY2VwdG9yIiwicmVzcG9uc2VFcnJvciIsInJlc3BvbnNlIiwic3RhdHVzIiwiZXJyb3IiLCJyZWplY3QiLCJjb25zdGFudCIsImhvc3QiLCJwb3J0IiwidmVyc2lvbiIsImxvZ2luU3VjY2VzcyIsImxvZ2luRmFpbGVkIiwibG9nb3V0U3VjY2VzcyIsInNlc3Npb25UaW1lb3V0Iiwibm90QXV0aGVudGljYXRlZCIsIm5vdEF1dGhvcml6ZWQiLCJvcHRpb25zIiwiY2hhcnQiLCJ0eXBlIiwiaGVpZ2h0IiwieCIsImQiLCJrZXkiLCJ5Iiwic2hvd0xhYmVscyIsImRvbnV0IiwicGFkQW5nbGUiLCJjb3JuZXJSYWRpdXMiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJsYWJlbFRocmVzaG9sZCIsImxlZ2VuZCIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsInRvb2x0aXBDb250ZW50IiwiZSIsImdyYXBoIiwiY29uc29sZSIsImxvZyIsInBpZSIsImRpc3BhdGNoIiwiZWxlbWVudENsaWNrIiwiZGF0ZSIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInNldEhvdXJzIiwic2V0TWludXRlcyIsIndpbmRvdyIsImxvY2F0aW9uIiwidG9JU09TdHJpbmciLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJkYXRhIiwibGFiZWxUeXBlIiwibGFiZWxzT3V0c2lkZSIsIkNvdW50IiwidXNlVm9yb25vaSIsImNsaXBFZGdlIiwiZHVyYXRpb24iLCJ1c2VJbnRlcmFjdGl2ZUd1aWRlbGluZSIsInhBeGlzIiwic2hvd01heE1pbiIsInRpY2tGb3JtYXQiLCJkMyIsInRpbWUiLCJmb3JtYXQiLCJyb3RhdGVMYWJlbHMiLCJ5QXhpcyIsInpvb20iLCJlbmFibGVkIiwidXNlRml4ZWREb21haW4iLCJ1c2VOaWNlU2NhbGUiLCJob3Jpem9udGFsT2ZmIiwidmVydGljYWxPZmYiLCJ1bnpvb21FdmVudFR5cGUiLCJzdGF0ZUNoYW5nZSIsImNoYW5nZVN0YXRlIiwidG9vbHRpcFNob3ciLCJ0b29sdGlwSGlkZSIsIm11bHRpYmFyIiwiaG91cnMiLCJtaW51dGVzIiwic2xpY2UiLCJsaW5rIiwiaXRlbXMiLCIkc2NvcGUiLCIkcm91dGVQYXJhbXMiLCIkaHR0cCIsImFwaSIsImlkIiwiZ2VvIiwiYmFjayIsImhpc3RvcnkiLCJnZXQiLCJzdWNjZXNzIiwiU291cmNlIiwiVGFyZ2V0IiwiSVA0IiwiJHNjZSIsIiRmaWx0ZXIiLCJpbnB1dCIsImh0bWwiLCJmb3JFYWNoIiwidHJ1c3RBcyIsInJlcyIsImNhdGVnb3J5Iiwic3JjX2lwIiwidHJ0X2lwIiwiZGVzYyIsImZsb3dzX2Zyb20iLCJmbG93c190byIsInF1ZXJ5IiwiZnJvbSIsInRvIiwiZGVzY3JpcHRpb24iLCJsaW1pdCIsImxvYWRidG4iLCJsb2FkSXRlbXMiLCJzcGxpdCIsImZyb21fZGF0ZSIsInNlYXJjaCIsInRvX2RhdGUiLCJzZW5kIiwiZXZlbnRzIiwiaXRlbSIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsIkNhdGVnb3J5IiwiRGVzY3JpcHRpb24iLCJGbG93Q291bnQiLCJOdW1iZXIiLCJsb2dpY3ZhbHVlIiwiaSIsImxlbmd0aCIsImRpcmVjdGl2ZSIsInJlcXVpcmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImN0cmwiLCIkdmFsaWRhdG9ycyIsIm1vZGVsVmFsdWUiLCJ2aWV3VmFsdWUiLCJuZ01vZGVsIiwicm93IiwibWV0cmljIiwicGVyaW9kIiwiYmVnaW50aW1lIiwidGltZXN0YW1wIiwiYm94ZXNfYXJyIiwiYWN0aXZlR3JpZCIsIm9wZW5NZW51IiwiJG1kT3Blbk1lbnUiLCJldiIsIm9yaWdpbmF0b3JFdiIsImFkZEl0ZW0iLCIkYnJvYWRjYXN0IiwiZW5hYmxlR3JpZCIsIiR0aW1lb3V0Iiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzcGF0Y2hFdmVudCIsIkV2ZW50IiwiJGVsZW1lbnQiLCJQUk9UT0NPTFMiLCJUWVBFUyIsIkNBVEVHT1JJRVMiLCJQSUVDSEFSVCIsIkFSRUEiLCJ0aW1lU2hpZnQiLCJib3giLCJub3ciLCJsb2FkaW5nIiwiZWRpdE1vZGUiLCJiYWNrdXBNb2RlbCIsInByb3RvY29sIiwidHlwZXMiLCJjYXRlZ29yaWVzIiwiZWRpdCIsImNvcHkiLCIkZW1pdCIsInNhdmUiLCJ0b3RhbCIsInNldHRpbmdzIiwiand0IiwicHV0IiwiZ3JpZHN0ZXIiLCJvcHQiLCJvdXRlck1hcmdpbiIsImNvbHVtbnMiLCJwdXNoaW5nIiwicm93SGVpZ2h0IiwiY29sV2lkdGgiLCJmbG9hdGluZyIsInN3YXBwaW5nIiwibW9iaWxlQnJlYWtQb2ludCIsImRyYWdnYWJsZSIsInJlc2l6YWJsZSIsImhhbmRsZXMiLCJzdG9wIiwid2lkZ2V0IiwicmVtb3ZlIiwic3BsaWNlIiwic2l6ZVgiLCJzaXplWSIsIiR3YXRjaCIsInNjcm9sbEhlaWdodCIsIm5ld1ZhbCIsIm9sZFZhbCIsInJvd0hlaWdodE9wdGlvbiIsImRpdiIsIk1hdGgiLCJmbG9vciIsInJlc3RyaWN0IiwibG9naW5CdG4iLCJzdWJtaXQiLCJjcmVkIiwibG9naW5CdG5EaXNhYmxlZCIsImF1dGgiLCJtc2ciLCJlcnJvcl9tZXMiLCJlZGl0VXNlciIsInNlcnZpY2UiLCIkbWRUb2FzdCIsIkNPTkZJRyIsImFkZHIiLCJhbGVydCIsInVybCIsInBhcmFtcyIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwic2ltcGxlIiwidGV4dENvbnRlbnQiLCJwb3NpdGlvbiIsImhpZGVEZWxheSIsInBvc3QiLCJKU09OIiwic3RyaW5naWZ5Iiwic2VjdGlvbiIsIk1FTlUiLCJtZW51IiwiaXNBY3RpdmUiLCJjdXJyZW50IiwiY2hhbmdlTW9kZSIsImVuYWJsZSIsInRvZ2dsZUl0ZW0iLCJ0b2dnbGVCdG4iLCJjbG9zZUxlZnQiLCJ0ZW1wbGF0ZSIsImlucHV0VGV4dCIsInZpZXciLCJzaG93VGl0bGUiLCJ0cmlnZ2VyIiwiZWRpdFRpdGxlIiwiZWRpdG9yVGVtcGxhdGUiLCJlZGl0YWJsZVZhbHVlIiwiZWRpdG9yRW5hYmxlZCIsImVuYWJsZUVkaXRvciIsImRpc2FibGVFZGl0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SSxJQUFBRixFQUNBSSxPQUFBLE1BQ0FoTCxLQUFBdkUsUUFBQXNSLE9BQUEvTSxHQUNBaUwsU0FDQUMsY0FBQW5QLEVBQUEsU0FHQTJHLFFBQUEsU0FBQTFDLEdBV0EsTUFWQTNELElBQ0FxTyxFQUFBdFAsS0FDQXNQLEVBQ0FTLFNBQ0FDLFlBQUEseUJBQ0FDLFNBQUEsYUFDQUMsVUFBQSxLQUNBdFIsTUFBQSxrQkFHQWdHLElBRUFuRCxNQUFBLFNBQUF5TixFQUFBMU4sR0FDQVgsS0FBQVksTUFBQSwwQ0FDQTZOLEVBQUF0UCxLQUNBc1AsRUFBQVMsU0FDQUMsWUFBQSx3QkFDQUMsU0FBQSxhQUNBQyxVQUFBLEtBQ0F0UixNQUFBLG1CQU9BVSxLQUFBSSxPQUFBLFdBQ0FpQixFQUFBLEtBRUEsT0FBQW9HLElBQ0EySSxJQUFBRixFQUFBLFNBQ0FJLE9BQUEsU0FDQUMsU0FDQUMsY0FBQW5QLEVBQUEsU0FHQTJHLFFBQUEsU0FBQTFDLEdBQ0F4RixFQUFBYyxLQUFBLGdCQUNBUyxHQUFBLFlBQ0FBLEdBQUEsVUFDQTJPLEVBQUF0UCxLQUNBc1AsRUFDQVMsU0FDQUMsWUFBQSxzQkFDQUMsU0FBQSxhQUNBQyxVQUFBLFFBSUF6TyxNQUFBLFNBQUFBLEVBQUF5TixHQUNBOVAsRUFBQWMsS0FBQSxnQkFDQVMsR0FBQSxZQUNBQSxHQUFBLFVBQ0EyTyxFQUFBdFAsS0FDQXNQLEVBQ0FTLFNBQ0FDLFlBQUEsd0RBQ0FDLFNBQUEsYUFDQUMsVUFBQSIsImZpbGUiOiJqcy9hcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdndWknLCBbJ25nTWF0ZXJpYWwnLCAnbmdSb3V0ZScsICduZ01lc3NhZ2VzJywgJ252ZDMnLCAnbmdTdG9yYWdlJywgJ25nTWFwJywgJ2dyaWRzdGVyJ10pO1xuXG5hcHAuY29uZmlnKGNvbmZpZyk7XG5cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAkbG9jYWxTdG9yYWdlUHJvdmlkZXIpIHtcblx0JHJvdXRlUHJvdmlkZXJcblx0XHQud2hlbignL2xvZ2luJywge1xuXHRcdFx0Y29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xvZ2luLmh0bWwnLFxuXHRcdH0pXG5cdFx0LndoZW4oJy8nLCB7XG5cdFx0XHRjb250cm9sbGVyOiAnaG9tZUNvbnRyb2xsZXInLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9ob21lLmh0bWwnLFxuXHRcdH0pXG5cdFx0LndoZW4oJy91c2VyJywge1xuXHRcdFx0Y29udHJvbGxlcjogJ3VzZXJDb250cm9sbGVyJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW4uaHRtbCcsXG5cdFx0fSlcbiAgICAgICAgLndoZW4oJy9ldmVudHMnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ2V2ZW50c0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvZXZlbnRzLmh0bWwnLFxuICAgICAgICAgICAgcmVsb2FkT25TZWFyY2ggOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2V2ZW50cy86aWQnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3ZpZXdzL2V2ZW50Lmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcHJvZmlsZScsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAncHJvZmlsZUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvcHJvZmlsZS5odG1sJ1xuICAgICAgICB9KVxuXHRcdC5vdGhlcndpc2Uoe1xuXHRcdFx0cmVkaXJlY3RUbzogJy9sb2dpbidcblx0XHR9KTtcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpLnByaW1hcnlQYWxldHRlKCdsaWdodC1ibHVlJykuYWNjZW50UGFsZXR0ZSgnb3JhbmdlJyk7XG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdub3RBbGxvd2VkSW50ZXJjZXB0b3InKTtcbiAgICAkbG9jYWxTdG9yYWdlUHJvdmlkZXJcbiAgICAgICAgLnNldEtleVByZWZpeCgnbmQtJyk7XG5cdC8vIGxvY2FsU3RvcmFnZVNlcnZpY2VQcm92aWRlclxuXHQvLyBcdC5zZXRQcmVmaXgoJ25lbWVhLWRhc2hib2FyZCcpXG5cdC8vIFx0Ly9QUk9EVUNUSU9OXG5cdC8vIFx0Ly8uc2V0U3RvcmFnZUNvb2tpZURvbWFpbih3aW5kb3cubG9jYXRpb24pXG5cdC8vIFx0Ly9ERVZcblx0Ly8gXHQuc2V0U3RvcmFnZUNvb2tpZURvbWFpbignJylcblx0Ly8gXHQ7XG5cbi8vXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59O1xuXG4vL3Rha2UgYWxsIHdoaXRlc3BhY2Ugb3V0IG9mIHN0cmluZ1xuYXBwLmZpbHRlcignbm9zcGFjZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICghdmFsdWUpID8gJycgOiB2YWx1ZS5yZXBsYWNlKC8gL2csICcnKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbi8vIEFsd2F5cyBjaGVjayBmb3IgYSBKV1RcbmFwcC5ydW4oZnVuY3Rpb24odXNlciwgJGxvY2FsU3RvcmFnZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkbG9nKSB7XG5cdCRyb290U2NvcGUuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKCRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbyhcIm5vIHRva2VuIGZvdW5kLCByZWRpcmVjdGluZyB0byAvbG9naW5cIilcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbi8vIEhUVFAgaW50ZXJjZXB0b3IgaW5qZWN0ZWQgaW4gY29uZmlnXG5hcHAuZmFjdG9yeSgnbm90QWxsb3dlZEludGVyY2VwdG9yJywgZnVuY3Rpb24oJGxvZywgJGxvY2FsU3RvcmFnZSwgJGxvY2F0aW9uLCAkaW5qZWN0b3IsICRxKSB7XG4gICAgdmFyIG5vdEFsbG93ZWRJbnRlcmNlcHRvciA9IHtcbiAgICAgICAgLy8gSW50ZXJjZXB0ICRodHRwIGVycm9yc1xuICAgICAgICByZXNwb25zZUVycm9yIDogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciA0MDEgZXJyb3JcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcignWW91IGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MsIHJlZGlyZWN0aW5nIHRvIC9sb2dpbicpO1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBleGlzaXRpbmcgSldUIGZyb20gbG9jYWxTdG9yYWdlIFxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW5cbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gcHJvbWlzZSBzbyB3ZSBjYW4gaGFuZGxlIHRoZSBlcnJvciBmdXJ0aGVyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90QWxsb3dlZEludGVyY2VwdG9yO1xufSlcbiIsImFwcC52YWx1ZSgnYm94ZXNfYXJyJywgW1xuICB7IFxuICAgIFwicm93XCIgICA6IDAsXG4gICAgXCJoZWlnaHRcIiA6IFwiXCIsXG4gICAgXCJpdGVtc1wiIDogW1xuICAgICAge1xuICAgICAgICBcInRpdGxlXCIgICA6IFwiRXZlbnRzIHNoYXJlc1wiLFxuICAgICAgICBcInR5cGVcIiAgICA6IFwicGllY2hhcnRcIixcbiAgICAgICAgXCJjb250ZW50XCIgOiBcIlwiLFxuICAgICAgICBcImNvbmZpZ1wiICA6IHtcbiAgICAgICAgICAgIFwibWV0cmljXCIgICAgOiBcImNhdGVnb3J5XCIsXG4gICAgICAgICAgICBcInR5cGVcIiAgICAgIDogXCJwaWVjaGFydFwiLFxuICAgICAgICAgICAgXCJwZXJpb2RcIiAgICA6IFwiMjRcIixcbiAgICAgICAgICAgIFwiYmVnaW50aW1lXCIgOiBcIlwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwidGl0bGVcIiAgIDogXCJMYXN0IDI0IGhvdXJzXCIsXG4gICAgICAgIFwidHlwZVwiICAgIDogXCJiYXJjaGFydFwiLFxuICAgICAgICBcImRhdGFcIiAgICA6IFwiXCIsXG4gICAgICAgIFwidGltZXN0YW1wXCI6IFwiXCIsXG4gICAgICAgIFwiY29uZmlnXCIgOiB7XG4gICAgICAgICAgICBcIm1ldHJpY1wiIDogXCJjYXRlZ29yeVwiLFxuICAgICAgICAgICAgXCJ0eXBlXCIgOiBcImJhcmNoYXJ0XCIsXG4gICAgICAgICAgICBcInBlcmlvZFwiIDogMjQsXG4gICAgICAgICAgICBcIndpbmRvd1wiIDogNjAsXG4gICAgICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgXVxuICB9LFxuICB7IFxuICAgIFwicm93XCIgICA6IDEsXG4gICAgXCJpdGVtc1wiIDogW1xuICAgICAge1xuICAgICAgICBcInRpdGxlXCIgOiBcIlRvcCBldmVudHMgaW4gMSBob3VyXCIsXG4gICAgICAgIFwidHlwZVwiICA6IFwidG9wXCIsXG4gICAgICAgIFwiY29uZmlnXCIgOiB7XG4gICAgICAgICAgICBcInBlcmlvZFwiIDogMSxcbiAgICAgICAgICAgIFwiYmVnaW50aW1lXCIgOiBcIlwiXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcInRpdGxlXCI6IFwiMlwiLFxuICAgICAgICBcInR5cGVcIiAgICA6IFwiaW5jaWRlbnRcIlxuICAgICAgfSxcbiAgICBdXG4gIH0sXG4gIF0pO1xuXG5cbmFwcC5jb250cm9sbGVyKCdob21lQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZywgYXBpLCBib3hlc19hcnIsICRodHRwLCAkbG9jYWxTdG9yYWdlLCB1c2VyKSB7XG4gICAgJHNjb3BlLmFjdGl2ZUdyaWQgPSBmYWxzZTsgXG4gICAgJHNjb3BlLm9wZW5NZW51ID0gZnVuY3Rpb24oJG1kT3Blbk1lbnUsIGV2KSB7XG4gICAgICAgIG9yaWdpbmF0b3JFdiA9IGV2O1xuICAgICAgICAkbWRPcGVuTWVudShldik7XG4gICAgfTtcblxuICAgICRzY29wZS5hZGRJdGVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdhZGRJdGVtJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmVuYWJsZUdyaWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0VuYWJsZSBncmlkJylcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2VuYWJsZUdyaWQnKTtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZUdyaWQgPSAhJHNjb3BlLmFjdGl2ZUdyaWQ7XG4gICAgfVxuXG5cbn0pO1xuXG5hcHAuY29udHJvbGxlcigndG9wQmFyJywgdG9wQmFyQ3RybCk7XG5cbmZ1bmN0aW9uIHRvcEJhckN0cmwoJG1kRGlhbG9nLCAkbG9jYXRpb24sICRtZFNpZGVuYXYpe1xuXG5cdHRoaXMudXNlciA9IFwiUGV0clwiXG5cbiAgdGhpcy50b2dnbGVMZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKCk7XG4gICAgfTtcbiAgXHRcbiAgdGhpcy5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcblx0ICAgICAgICAudGl0bGUoJ0FyZSB5b3Ugc3VyZT8nKVxuXHQgICAgICAgIC5jb250ZW50KCdZb3UgYXJlIGFib3V0IHRvIGJlIGxvZ2dlZCBvdXQuIEFsbCB1bnNhdmVkIGNoYW5nZXMgd2lsbCBiZSBsb3N0IGluIHRoZSB2b2lkIScpXG5cdCAgICAgICAgLm9rKCdMb2cgbWUgb3V0Jylcblx0ICAgICAgICAuY2FuY2VsKCdLZWVwIG1lIGhlcmUnKVxuICAgICRtZERpYWxvZy5zaG93KGNvbmZpcm0pLnRoZW4oXG4gICAgXHRmdW5jdGlvbigpIHtcbiAgICBcdFx0JGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgIFx0fSk7XG4gIH07XG5cbiAgXG59O1xuXG5hcHAuY29udHJvbGxlcigncm93JywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCl7XG4gICRzY29wZS4kb24oJ3JlcXVlc3RSZWRyYXcnLCBmdW5jdGlvbihlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwicmVxdWVzdCBhY2NlcHRlZFwiKTtcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xuICAgIH0sIDEwKTtcbiAgfSk7XG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ2JveCcsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZywgYm94ZXNfYXJyLCAkdGltZW91dCwgJGVsZW1lbnQsICRtZERpYWxvZywgUFJPVE9DT0xTLCBUWVBFUywgQ0FURUdPUklFUywgJGh0dHAsIFBJRUNIQVJULCBBUkVBLCBhcGksICRsb2NhdGlvbiwgdXNlcil7XG4gICAgXG4gICAgZnVuY3Rpb24gdGltZVNoaWZ0KCkgeyAgICBcbiAgICAgICAgaWYgKCRzY29wZS5ib3ggIT0gdW5kZWZpbmVkICYmICgkc2NvcGUuYm94LnR5cGUgPT0gXCJwaWVjaGFydFwiIHx8ICRzY29wZS5ib3gudHlwZSA9PSBcImJhcmNoYXJ0XCIgfHwgJHNjb3BlLmJveC50eXBlID09ICd0b3AnIHx8ICRzY29wZS5ib3gudHlwZSA9PSBcInN1bVwiICkpIHtcbiAgICAgICAgICAgICRzY29wZS5ib3guY29uZmlnLmJlZ2ludGltZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgLSAkc2NvcGUuYm94LmNvbmZpZy5wZXJpb2QpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub3c7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGltZVNoaWZ0KCk7XG5cbiAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAkc2NvcGUub3Blbk1lbnUgPSBmdW5jdGlvbigkbWRPcGVuTWVudSwgZXYpIHtcbiAgICAgICAgb3JpZ2luYXRvckV2ID0gZXY7XG4gICAgICAgICRtZE9wZW5NZW51KGV2KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG4gICAgJHNjb3BlLmJhY2t1cE1vZGVsID0ge307XG5cbiAgICAkc2NvcGUucHJvdG9jb2wgPSBQUk9UT0NPTFM7XG4gICAgJHNjb3BlLnR5cGVzID0gVFlQRVM7XG4gICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBDQVRFR09SSUVTO1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gRWRpdCBtb2RlIGhhbmRsaW5nXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gVHJpZ2dlciBlZGl0aW5nIG1vZGUgYW5kIHNhdmUgY3VycmVudCBzdGF0ZVxuICAgICRzY29wZS5lZGl0ID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICAgICRzY29wZS5lZGl0TW9kZSA9IHRydWU7XG4gICAgICAgICRzY29wZS5iYWNrdXBNb2RlbCA9IGFuZ3VsYXIuY29weShib3gpO1xuICAgICAgICAkc2NvcGUuJGVtaXQoXCJzd2l0Y2gtZHJhZ1wiKTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGNoYW5nZXMgYW5kIGRpc2FibGUgZWRpdCBtb2RlXG4gICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnVzZXIoKTtcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAncGllY2hhcnQnKSB7XG4gICAgICAgICAgICAkc2NvcGUuYm94Lm9wdGlvbnMgPSBQSUVDSEFSVC5vcHRpb25zO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAnYmFyY2hhcnQnKVxuICAgICAgICAgICAgJHNjb3BlLmJveC5vcHRpb25zID0gQVJFQS5vcHRpb25zO1xuICAgICAgICBcblxuICAgICAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSB7fTtcblxuICAgICAgICAkc2NvcGUuYm94LmNvbmZpZy50eXBlID0gJHNjb3BlLmJveC50eXBlO1xuICAgICAgICBcbiAgICAgICAgLy8gRGlzYWJsZSBlZGl0IG1vZGVcbiAgICAgICAgJHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgLy8gU2hvdyBsb2FkaW5nIGluZGljYXRvclxuICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIFNoaWZ0IHRpbWUgZm9yIHF1ZXJ5XG4gICAgICAgIHRpbWVTaGlmdCgpO1xuXG4gICAgICAgICRzY29wZS4kZW1pdChcInN3aXRjaC1kcmFnXCIpO1xuICAgICAgICAvLyBHZXQgcmVxdWlyZWQgZGF0YVxuICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdwaWVjaGFydCcgfHwgJHNjb3BlLmJveC50eXBlID09ICdiYXJjaGFydCcpIHtcbiAgICAgICAgICAgIGFwaS5nZXQoJ2FnZycsICRzY29wZS5ib3guY29uZmlnLCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTsgICAgXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICd0b3AnKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCd0b3AnLCAkc2NvcGUuYm94LmNvbmZpZywgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7ICAgIFxuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAnc3VtJykge1xuICAgICAgICAgICAgYXBpLmdldCgnY291bnQnLCAkc2NvcGUuYm94LmNvbmZpZykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXZlcnQgdG8gb3JpZ2luYWwgYW5kIGRpc2FibGUgZWRpdCBtb2RlXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgICAkc2NvcGUuYm94ID0gYW5ndWxhci5jb3B5KCRzY29wZS5iYWNrdXBNb2RlbCk7XG4gICAgICAgICRzY29wZS5iYWNrdXBNb2RlbCA9IHt9O1xuICAgICAgICAkc2NvcGUuZWRpdE1vZGUgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLiRlbWl0KFwic3dpdGNoLWRyYWdcIik7XG4gICAgfVxuICAgIFxuICAgICRzY29wZS50b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZVNoaWZ0KClcbiAgICAgICAgYXBpLmdldCgndG9wJywgJHNjb3BlLmJveC5jb25maWcsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoJHNjb3BlLmJveCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSBcInBpZWNoYXJ0XCIgfHwgJHNjb3BlLmJveC50eXBlID09IFwiYmFyY2hhcnRcIikge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAncGllY2hhcnQnKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5vcHRpb25zID0gUElFQ0hBUlQub3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ2JhcmNoYXJ0JylcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94Lm9wdGlvbnMgPSBBUkVBLm9wdGlvbnM7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgJHNjb3BlLmJveC5jb25maWcudHlwZSA9ICRzY29wZS5ib3gudHlwZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXBpLmdldCgnYWdnJywgJHNjb3BlLmJveC5jb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU3VtIGFsbCBldmVudHNcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdwaWVjaGFydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8ICRzY29wZS5ib3guZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsID0gJHNjb3BlLnRvdGFsICsgTnVtYmVyKCRzY29wZS5ib3guZGF0YVtpXS54KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAndG9wJykge1xuICAgICAgICAgICAgYXBpLmdldCgndG9wJywgJHNjb3BlLmJveC5jb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICdzdW0nKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCdjb3VudCcsICRzY29wZS5ib3guY29uZmlnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS51c2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZXR0aW5ncyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuaXRlbXMpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZXR0aW5ncylcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZXR0aW5nc1tpXVtcImRhdGFcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNldHRpbmdzW2ldW1wib3B0aW9uc1wiXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHF1ZXJ5ID0ge1xuICAgICAgICAgICAgXCJqd3RcIiA6IHVzZXIuand0KCksXG4gICAgICAgICAgICBcInNldHRpbmdzXCIgOiBzZXR0aW5nc1xuICAgICAgICB9XG5cbiAgICAgICAgJGxvZy5pbmZvKHF1ZXJ5KVxuICAgICAgICB1c2VyLnB1dChxdWVyeSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRhdGFcIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoZGF0YSlcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignc2F2ZVVzZXInLCBmdW5jdGlvbigpIHskc2NvcGUudXNlcigpfSk7XG5cbiAgICAkc2NvcGUuJG9uKCdncmlkc3Rlci1pdGVtLXJlc2l6ZWQnLCBmdW5jdGlvbihncmlkc3Rlcikge1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcXVlc3QgYWNjZXB0ZWRcIik7XG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfSlcblxuICBcbn0pO1xuXG5hcHAuY29udHJvbGxlcignZ3JpZCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsICRsb2cvKiwgJG1kTWVkaWEsICR3aW5kb3cqLywgdXNlcikge1xuJHNjb3BlLm9wdCA9IHtcbiAgICBvdXRlck1hcmdpbjogZmFsc2UsXG4gICAgY29sdW1uczogNixcbiAgICBwdXNoaW5nOiB0cnVlLFxuICAgIHJvd0hlaWdodDogMjUwICsgMTAsXG4gICAgY29sV2lkdGggOiAnYXV0bycsXG4gICAgZmxvYXRpbmc6IHRydWUsXG4gICAgc3dhcHBpbmc6IHRydWUsXG4gICAgbW9iaWxlQnJlYWtQb2ludDogOTMzLFxuICAgIGRyYWdnYWJsZToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICB9LFxuICAgIHJlc2l6YWJsZToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgaGFuZGxlczogWyduJywgJ2UnLCAncycsICd3JywgJ3NlJywgJ3N3J10sXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uKGV2ZW50LCAkZWxlbWVudCwgd2lkZ2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc2l6ZSBlbmRcIik7XG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ3JlcXVlc3RSZWRyYXcnKTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcXVlc3QgYWNjZXB0ZWRcIik7XG4gICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xuICAgICAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICB9XG4gICAgfVxufVxuLyp2YXIgdyA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KTtcbncuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgLy8kc2NvcGUub3B0Lm1vYmlsZU1vZGVFbmFibGUgPSAkbWRNZWRpYSgnZ3QtbWQnKTtcbiAgICAkc2NvcGUub3B0LmlzTW9iaWxlID0gISRtZE1lZGlhKCdndC1tZCcpO1xufSk7Ki9cblxuY29uc29sZS5sb2codXNlci5jb25maWcoKSlcblxuXG4kc2NvcGUuJG9uKCdlbmFibGVHcmlkJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCRzY29wZS5vcHQucmVzaXphYmxlLmVuYWJsZWQgPT0gdHJ1ZSkge1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2F2ZVVzZXInKTtcbiAgICB9XG4gICAgXG4gICAgJHNjb3BlLm9wdC5yZXNpemFibGUuZW5hYmxlZCA9ICEkc2NvcGUub3B0LnJlc2l6YWJsZS5lbmFibGVkOyBcbiAgICAkc2NvcGUub3B0LmRyYWdnYWJsZS5lbmFibGVkID0gISRzY29wZS5vcHQuZHJhZ2dhYmxlLmVuYWJsZWQ7IFxufSlcblxuJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKGJveCkge1xuXG4gICAgdmFyIHRtcCA9ICRzY29wZS5pdGVtcy5zcGxpY2UoJHNjb3BlLml0ZW1zLmluZGV4T2YoYm94KSwgMSk7XG5cbiAgfTtcblxuJHNjb3BlLml0ZW1zID0gdXNlci5jb25maWcoKTtcbi8qJHNjb3BlLml0ZW1zID0gW3tcbiAgICBzaXplWDogMixcbiAgICBzaXplWTogMixcbiAgICByb3c6IDAsXG4gICAgY29sOiAwLFxuICAgIFwidGl0bGVcIiAgIDogXCJFdmVudHMgc2hhcmVzXCIsXG4gICAgXCJ0eXBlXCIgICAgOiBcInBpZWNoYXJ0XCIsXG4gICAgXCJjb250ZW50XCIgOiBcIlwiLFxuICAgIFwiY29uZmlnXCIgIDoge1xuICAgICAgICBcIm1ldHJpY1wiICAgIDogXCJjYXRlZ29yeVwiLFxuICAgICAgICBcInR5cGVcIiAgICAgIDogXCJwaWVjaGFydFwiLFxuICAgICAgICBcInBlcmlvZFwiICAgIDogXCIyNFwiLFxuICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgIH1cbn0sIHtcbiAgICBzaXplWDogMixcbiAgICBzaXplWTogMixcbiAgICBtaW5TaXplWCA6IDIsXG4gICAgbWluU2l6ZVkgOiAyLFxuICAgIHJvdzogMCxcbiAgICBjb2w6IDIsXG4gICAgXCJ0aXRsZVwiIDogXCJMYXN0IDI0IGhvdXJzXCIsXG4gICAgXCJ0eXBlXCIgOiBcImJhcmNoYXJ0XCIsXG4gICAgXCJkYXRhXCIgOiBcIlwiLFxuICAgIFwidGltZXN0YW1wXCI6IFwiXCIsXG4gICAgXCJjb25maWdcIiA6IHtcbiAgICAgICAgXCJtZXRyaWNcIiA6IFwiY2F0ZWdvcnlcIixcbiAgICAgICAgXCJ0eXBlXCIgOiBcImJhcmNoYXJ0XCIsXG4gICAgICAgIFwicGVyaW9kXCIgOiAyNCxcbiAgICAgICAgXCJ3aW5kb3dcIiA6IDYwLFxuICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgIH1cbn0sIHtcbiAgICBcInRpdGxlXCIgOiBcIlRvcCBldmVudHMgaW4gMSBob3VyXCIsXG4gICAgXCJ0eXBlXCIgIDogXCJ0b3BcIixcbiAgICBcImNvbmZpZ1wiIDoge1xuICAgICAgICBcInBlcmlvZFwiIDogMSxcbiAgICAgICAgXCJiZWdpbnRpbWVcIiA6IFwiXCJcbiAgICB9XG59XTsqL1xuXG4gICAgJHNjb3BlLiRvbignYWRkSXRlbScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgICAgIFwidGl0bGVcIiA6IFwiTmV3IGJveFwiLFxuICAgICAgICAgICAgXCJsb2FkaW5nXCIgOiBmYWxzZSxcbiAgICAgICAgICAgIHNpemVYOiAxLFxuICAgICAgICAgICAgc2l6ZVk6IDEsXG4gICAgICAgICAgICAvL3JvdyA6IHJvdyxcbiAgICAgICAgICAgIC8vY29sIDogY29sXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuaXRlbXMucHVzaChpdGVtKVxuICAgIH0pO1xuXG5cbn0pXG5cblxuYXBwLmRpcmVjdGl2ZSgnZ3JpZHN0ZXJEeW5hbWljSGVpZ2h0JywgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG5cbiAgICB2YXIgZGlyZWN0aXZlID0ge1xuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgaXRlbTogXCI9XCIgLy9ncmlkc3RlciBpdGVtXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICAgIHJlc3RyaWN0OiAnQSdcbiAgICB9O1xuICAgIHJldHVybiBkaXJlY3RpdmU7XG5cbiAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudFswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7IFxuICAgICAgICAgICAgdmFyIHJvd0hlaWdodE9wdGlvbiA9IDI3MDsgLy8gQ2hhbmdlIHRoaXMgdmFsdWUgd2l0aCB5b3VyIG93biByb3dIZWlnaHQgb3B0aW9uXG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcm93SGVpZ2h0T3B0aW9uICogc2NvcGUuaXRlbS5zaXplWTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coc2NvcGUuaXRlbS50aXRsZSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwibmV3VmFsOiBcIiArIG5ld1ZhbCArIFwiICAgICBoZWlnaHQ6IFwiICsgaGVpZ2h0KVxuICAgICAgICAgICAgaWYobmV3VmFsID4gaGVpZ2h0KXtcbiAgICAgICAgICAgICAgICB2YXIgZGl2ID0gTWF0aC5mbG9vcihuZXdWYWwgLyByb3dIZWlnaHRPcHRpb24pO1xuICAgICAgICAgICAgICAgIC8vZGl2Kys7XG4gICAgICAgICAgICAgICAgc2NvcGUuaXRlbS5zaXplWSA9IGRpdjsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxufSk7XG4iLCJhcHAuZmFjdG9yeSgnbWVudScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXHRyZXR1cm4gJGh0dHAuZ2V0KCdqc29uL21lbnUuanNvbicpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fSk7XG5cdC8vXHQuZXJyb3IoY29uc29sZS5sb2coJ0Nhbm5vdCByZXRyaWV2ZSBkYXRhJykpO1xufV0pO1xuXG5hcHAuZmFjdG9yeSgnanNvbmRhdGEnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcblx0cmV0dXJuICRodHRwLmdldCgnanNvbi90ZXN0ZmlsZV8xMDAuanNvbicpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fSk7XG5cdC8vXHQuZXJyb3IoY29uc29sZS5sb2coJ0Nhbm5vdCByZXRyaWV2ZSBkYXRhJykpO1xufV0pO1xuXG5hcHAuZGlyZWN0aXZlKFwic2lkZWJhck1lbnVcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG4gICAgICAgIHNjb3BlOiB7XG5cdFx0XHRzZWN0aW9uOiAnPSdcblx0XHR9LFxuXHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvc2lkZWJhci1tZW51Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICRtZFNpZGVuYXYsICRsb2NhdGlvbiwgTUVOVSwgdXNlcikge1xuICAgICAgICAgICAgJHNjb3BlLm1lbnUgPSBNRU5VO1xuXG4gICAgICAgICAgICAkc2NvcGUuaXNBY3RpdmUgPSBmdW5jdGlvbihjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuKCRsb2NhdGlvbi5wYXRoKCkgPT0gY3VycmVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5jaGFuZ2VNb2RlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdyZXFDaGFuZ2VNb2RlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5lbmFibGUgPSB0cnVlO1xuXG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlSXRlbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS50b2dnbGVCdG4gPSBcInRvZ2dsZWRcIjtcbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgJHNjb3BlLmNsb3NlTGVmdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRtZFNpZGVuYXYoJ2xlZnQnKS50b2dnbGUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB1c2VyLmxvZ291dCgpO1xuICAgICAgICAgICAgfVxuICAgIFxuIFxuICAgICAgICB9XG5cdH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZShcInRvcGJhck1lbnVcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdFx0c2NvcGU6IHtcblx0XHRcdHNlY3Rpb246ICc9J1xuXHRcdH0sXG5cdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy90b3BiYXItbWVudS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlciA6IGZ1bmN0aW9uKCRzY29wZSwgJG1kU2lkZW5hdikge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZUxlZnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblx0fTtcbn0pO1xuXG5cbmFwcC5jb250cm9sbGVyKCd0b3BCYXInLCB0b3BCYXJDdHJsKTtcblxuZnVuY3Rpb24gdG9wQmFyQ3RybCgkbWREaWFsb2csICRsb2NhdGlvbiwgJG1kU2lkZW5hdil7XG4gICAgdGhpcy50b2dnbGVMZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRtZFNpZGVuYXYoJ2xlZnQnKS50b2dnbGUoKTtcbiAgICB9O1xufTtcblxuYXBwLmRpcmVjdGl2ZShcImJveGVzXCIsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuXHRcdHNjb3BlOiB7XG5cdFx0XHRzZWN0aW9uOiAnPSdcblx0XHR9LFxuXHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvYm94ZXMuaHRtbCdcblx0fTtcbn0pO1xuXG5cbmFwcC5kaXJlY3RpdmUoJ2NsaWNrRWRpdCcsIGZ1bmN0aW9uKCkge1xuXHR2YXIgdGVtcGxhdGUgPSAnPGRpdj48aDIgbmctc2hvdz1cInZpZXcuc2hvd1RpdGxlXCIgbmctY2xpY2s9XCJlZGl0VGl0bGUoKVwiPnt7Ym94LnRpdGxlfX08L2gyPicgK1xuXHRcdFx0XHQnPG1kLWlucHV0LWNvbnRhaW5lciBuZy1oaWRlPVwic2hvd1RpdGxlXCI+JyArXG5cdFx0XHRcdFx0JzxpbnB1dCB0eXBlPVwidGV4dFwiIHZhbHVlPVwie3tib3gudGl0bGV9fVwiIG5nLWJsdXI9XCJlZGl0VGl0bGUoYm94LnRpdGxlKVwiIG5nLW1vZGVsPVwiYm94LnRpdGxlXCIgY2xhc3M9XCJmb2N1c1RpdGxlXCIgYXJpYS1sYWJlbD1cIkVkaXQgVGl0bGVcIj4nICtcblx0XHRcdFx0JzwvbWQtaW5wdXQtY29udGFpbmVyPjwvZGl2Pic7XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdCBcdDogXCJBXCIsXG5cdFx0cmVwbGFjZVx0XHQ6IHRydWUsXG5cdFx0dGVtcGxhdGUgXHQ6IHRlbXBsYXRlLFxuXHRcdHNjb3BlXHRcdDoge1xuXHRcdFx0dmFsdWU6IFwiPWNsaWNrRWRpdFwiXG5cdFx0fSxcblx0XHRjb250cm9sbGVyXHQ6IGZ1bmN0aW9uKCRzY29wZSwgaW5wdXRUZXh0LCAkdGltZW91dCkge1xuXHRcdFx0JHNjb3BlLnZpZXcuc2hvd1RpdGxlID0gdHJ1ZTtcblxuXHRcdFx0aWYgKCRzY29wZS5zaG93VGl0bGUgPSB0cnVlKSB7XG5cdFx0ICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0ICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5mb2N1c1RpdGxlJykudHJpZ2dlcignZm9jdXMnKTtcblx0XHQgICAgICAgIGNvbnNvbGUubG9nKFwidHJpZ2dlclwiKTtcblx0XHQgICAgICB9LCAxMDApO1xuXHRcdCAgICB9O1xuXG5cdFx0ICAgICRzY29wZS5lZGl0VGl0bGUgPSBmdW5jdGlvbigpIHtcblx0XHQgICAgXHQkc2NvcGUudmlldy5zaG93VGl0bGUgPSAhJHNjb3BlLnZpZXcuc2hvd1RpdGxlO1xuXHRcdCAgICB9O1xuXHRcdH1cblx0fTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKFwiY2xpY2tUb0VkaXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVkaXRvclRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJjbGljay10by1lZGl0XCI+JyArXG4gICAgICAgICc8ZGl2IG5nLWhpZGU9XCJ2aWV3LmVkaXRvckVuYWJsZWRcIiBuZy1jbGljaz1cImVuYWJsZUVkaXRvcigpXCI+JyArXG4gICAgICAgICAgICAnPGEgbmctY2xpY2s9XCJlbmFibGVFZGl0b3IoKVwiPjxtZC1pY29uIG1kLXN2Zy1zcmM9XCJpbWcvaWNvbnMvZWRpdC5zdmdcIj48L21kLWljb24+PC9hPicgK1xuICAgICAgICAgICAgJ3t7dmFsdWV9fSAnICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAnPG1kLWlucHV0LWNvbnRhaW5lciBuZy1zaG93PVwidmlldy5lZGl0b3JFbmFibGVkXCI+JyArXG5cdCAgICAgICAgJzxkaXY+JyArXG5cdCAgICAgICAgICAgICc8aW5wdXQgbmctbW9kZWw9XCJ2aWV3LmVkaXRhYmxlVmFsdWVcIiBjbGFzcz1cImZvY3VzVGl0bGVcIiBhcmlhLWxhYmVsPVwiVGl0bGVcIj4nICtcblx0ICAgICAgICAgICAgJzxzcGFuIG5nLWNsaWNrPVwic2F2ZSgpXCI+U2F2ZTwvc3Bhbj4nICtcblx0ICAgICAgICAgICAgJyBvciAnICtcblx0ICAgICAgICAgICAgJzxhIG5nLWNsaWNrPVwiZGlzYWJsZUVkaXRvcigpXCI+Y2FuY2VsPC9hPi4nICtcblx0ICAgICAgICAnPC9kaXY+JyArXG5cdCAgICAnPC9tZC1pbnB1dC1jb250YWluZXI+JyArXG4gICAgJzwvZGl2Pic7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHRlbXBsYXRlOiBlZGl0b3JUZW1wbGF0ZSxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBcIj1jbGlja1RvRWRpdFwiLFxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICAkc2NvcGUudmlldyA9IHtcbiAgICAgICAgICAgICAgICBlZGl0YWJsZVZhbHVlOiAkc2NvcGUudmFsdWUsXG4gICAgICAgICAgICAgICAgZWRpdG9yRW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5lbmFibGVFZGl0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmlldy5lZGl0b3JFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmlldy5lZGl0YWJsZVZhbHVlID0gJHNjb3BlLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0ICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5mb2N1c1RpdGxlJykudHJpZ2dlcignZm9jdXMnKTtcblx0XHQgICAgICAgIGNvbnNvbGUubG9nKFwidHJpZ2dlclwiKTtcblx0XHQgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVFZGl0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmlldy5lZGl0b3JFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS52YWx1ZSA9ICRzY29wZS52aWV3LmVkaXRhYmxlVmFsdWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVFZGl0b3IoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG4iLCJcbmNvbmZpZy4kaW5qZWN0ID0gW1wiJHJvdXRlUHJvdmlkZXJcIiwgXCIkbWRUaGVtaW5nUHJvdmlkZXJcIiwgXCIkaHR0cFByb3ZpZGVyXCIsIFwiJGxvY2FsU3RvcmFnZVByb3ZpZGVyXCJdO1xudG9wQmFyQ3RybC4kaW5qZWN0ID0gW1wiJG1kRGlhbG9nXCIsIFwiJGxvY2F0aW9uXCIsIFwiJG1kU2lkZW5hdlwiXTt2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2d1aScsIFsnbmdNYXRlcmlhbCcsICduZ1JvdXRlJywgJ25nTWVzc2FnZXMnLCAnbnZkMycsICduZ1N0b3JhZ2UnLCAnbmdNYXAnLCAnZ3JpZHN0ZXInXSk7XG5cbmFwcC5jb25maWcoY29uZmlnKTtcblxuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbWRUaGVtaW5nUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICRsb2NhbFN0b3JhZ2VQcm92aWRlcikge1xuXHQkcm91dGVQcm92aWRlclxuXHRcdC53aGVuKCcvbG9naW4nLCB7XG5cdFx0XHRjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW4uaHRtbCcsXG5cdFx0fSlcblx0XHQud2hlbignLycsIHtcblx0XHRcdGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlcicsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvbWUuaHRtbCcsXG5cdFx0fSlcblx0XHQud2hlbignL3VzZXInLCB7XG5cdFx0XHRjb250cm9sbGVyOiAndXNlckNvbnRyb2xsZXInLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9sb2dpbi5odG1sJyxcblx0XHR9KVxuICAgICAgICAud2hlbignL2V2ZW50cycsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnZXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICd2aWV3cy9ldmVudHMuaHRtbCcsXG4gICAgICAgICAgICByZWxvYWRPblNlYXJjaCA6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvZXZlbnRzLzppZCcsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdldmVudENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvZXZlbnQuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9wcm9maWxlJywge1xuICAgICAgICAgICAgY29udHJvbGxlciA6ICdwcm9maWxlQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICd2aWV3cy9wcm9maWxlLmh0bWwnXG4gICAgICAgIH0pXG5cdFx0Lm90aGVyd2lzZSh7XG5cdFx0XHRyZWRpcmVjdFRvOiAnL2xvZ2luJ1xuXHRcdH0pO1xuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JykucHJpbWFyeVBhbGV0dGUoJ2xpZ2h0LWJsdWUnKS5hY2NlbnRQYWxldHRlKCdvcmFuZ2UnKTtcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ25vdEFsbG93ZWRJbnRlcmNlcHRvcicpO1xuICAgICRsb2NhbFN0b3JhZ2VQcm92aWRlclxuICAgICAgICAuc2V0S2V5UHJlZml4KCduZC0nKTtcblx0Ly8gbG9jYWxTdG9yYWdlU2VydmljZVByb3ZpZGVyXG5cdC8vIFx0LnNldFByZWZpeCgnbmVtZWEtZGFzaGJvYXJkJylcblx0Ly8gXHQvL1BST0RVQ1RJT05cblx0Ly8gXHQvLy5zZXRTdG9yYWdlQ29va2llRG9tYWluKHdpbmRvdy5sb2NhdGlvbilcblx0Ly8gXHQvL0RFVlxuXHQvLyBcdC5zZXRTdG9yYWdlQ29va2llRG9tYWluKCcnKVxuXHQvLyBcdDtcblxuLy9cdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbn07XG5cbi8vdGFrZSBhbGwgd2hpdGVzcGFjZSBvdXQgb2Ygc3RyaW5nXG5hcHAuZmlsdGVyKCdub3NwYWNlJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKCF2YWx1ZSkgPyAnJyA6IHZhbHVlLnJlcGxhY2UoLyAvZywgJycpO1xuICAgICAgfTtcbiAgICB9KTtcblxuLy8gQWx3YXlzIGNoZWNrIGZvciBhIEpXVFxuYXBwLnJ1bihbXCJ1c2VyXCIsIFwiJGxvY2FsU3RvcmFnZVwiLCBcIiRsb2NhdGlvblwiLCBcIiRyb290U2NvcGVcIiwgXCIkbG9nXCIsIGZ1bmN0aW9uKHVzZXIsICRsb2NhbFN0b3JhZ2UsICRsb2NhdGlvbiwgJHJvb3RTY29wZSwgJGxvZykge1xuXHQkcm9vdFNjb3BlLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmICgkbG9jYWxTdG9yYWdlW1widG9rZW5cIl0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkbG9nLmluZm8oXCJubyB0b2tlbiBmb3VuZCwgcmVkaXJlY3RpbmcgdG8gL2xvZ2luXCIpXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aChcIi9sb2dpblwiKTtcbiAgICAgICAgfVxuICAgIH0pXG59XSlcblxuLy8gSFRUUCBpbnRlcmNlcHRvciBpbmplY3RlZCBpbiBjb25maWdcbmFwcC5mYWN0b3J5KCdub3RBbGxvd2VkSW50ZXJjZXB0b3InLCBbXCIkbG9nXCIsIFwiJGxvY2FsU3RvcmFnZVwiLCBcIiRsb2NhdGlvblwiLCBcIiRpbmplY3RvclwiLCBcIiRxXCIsIGZ1bmN0aW9uKCRsb2csICRsb2NhbFN0b3JhZ2UsICRsb2NhdGlvbiwgJGluamVjdG9yLCAkcSkge1xuICAgIHZhciBub3RBbGxvd2VkSW50ZXJjZXB0b3IgPSB7XG4gICAgICAgIC8vIEludGVyY2VwdCAkaHR0cCBlcnJvcnNcbiAgICAgICAgcmVzcG9uc2VFcnJvciA6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgNDAxIGVycm9yXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDQwMSkge1xuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoJ1lvdSBhcmUgbm90IGFsbG93ZWQgdG8gYWNjZXNzLCByZWRpcmVjdGluZyB0byAvbG9naW4nKTtcbiAgICAgICAgICAgICAgICAvLyBEZWxldGUgZXhpc2l0aW5nIEpXVCBmcm9tIGxvY2FsU3RvcmFnZSBcbiAgICAgICAgICAgICAgICBkZWxldGUgJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdO1xuICAgICAgICAgICAgICAgIC8vIFJlZGlyZWN0IHRvIGxvZ2luXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHByb21pc2Ugc28gd2UgY2FuIGhhbmRsZSB0aGUgZXJyb3IgZnVydGhlclxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vdEFsbG93ZWRJbnRlcmNlcHRvcjtcbn1dKVxuXG5hcHAuY29uc3RhbnQoJ0NPTkZJRycsIHtcbiAgICBcImhvc3RcIiA6IFwiaHR0cHM6Ly9iZW5lZml6aW8ubGliZXJvdXRlci5vcmdcIixcbiAgICBcInBvcnRcIiA6IFwiNTU1NVwiLFxuICAgIFwidmVyc2lvblwiIDogXCJ2MlwiXG59KTtcblxuYXBwLmNvbnN0YW50KCdBVVRIX0VWRU5UUycsIHtcbiAgbG9naW5TdWNjZXNzOiAnYXV0aC1sb2dpbi1zdWNjZXNzJyxcbiAgbG9naW5GYWlsZWQ6ICdhdXRoLWxvZ2luLWZhaWxlZCcsXG4gIGxvZ291dFN1Y2Nlc3M6ICdhdXRoLWxvZ291dC1zdWNjZXNzJyxcbiAgc2Vzc2lvblRpbWVvdXQ6ICdhdXRoLXNlc3Npb24tdGltZW91dCcsXG4gIG5vdEF1dGhlbnRpY2F0ZWQ6ICdhdXRoLW5vdC1hdXRoZW50aWNhdGVkJyxcbiAgbm90QXV0aG9yaXplZDogJ2F1dGgtbm90LWF1dGhvcml6ZWQnXG59KTtcblxuYXBwLmNvbnN0YW50KCdDQVRFR09SSUVTJywgWyBcImFueVwiLCBcIlJlY29uLlNjYW5uaW5nXCIsIFwiQXR0ZW1wdC5Mb2dpblwiLCBcIkF2YWlsYWJpbGl0eS5Eb1NcIiBdKTtcbmFwcC5jb25zdGFudCgnUFJPVE9DT0xTJywgWyBcInRjcFwiLCBcImRuc1wiLCBcInVkcFwiIF0pO1xuYXBwLmNvbnN0YW50KCdUWVBFUycsIFtcImJhcmNoYXJ0XCIsIFwicGllY2hhcnRcIiwgXCJ0b3BcIiwgXCJzdW1cIl0pXG5cbmFwcC5jb25zdGFudCgnUElFQ0hBUlQnLCB7IFxuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICdwaWVDaGFydCcsXG4gICAgICAgICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGQpe3JldHVybiBkLmtleVswXTt9LFxuICAgICAgICAgICAgeTogZnVuY3Rpb24oZCl7cmV0dXJuIGQueDt9LFxuICAgICAgICAgICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICAgICAgICAgIGRvbnV0IDogdHJ1ZSxcbiAgICAgICAgICAgIHBhZEFuZ2xlIDogMC4wMCxcbiAgICAgICAgICAgIGNvcm5lclJhZGl1cyA6IDEsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgIGxhYmVsVGhyZXNob2xkOiAwLFxuICAgICAgICAgICAgLy9jb2xvcjogW1wiIzBlYzRmNFwiLCBcIiM2MzFGRjZcIiwgXCIjRkZEQzA2XCIsIFwiI0ZGODQwNlwiLCBcIiNiNTY5NjlcIiwgXCIjZTZjZjhiXCJdLFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogNSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sdGlwQ29udGVudCA6IGZ1bmN0aW9uKGtleSwgeCwgeSwgZSwgZ3JhcGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhncmFwaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnT2xhbGFsYSEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGllIDoge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2hhcnRDbGljazogZnVuY3Rpb24oZSkge2NvbnNvbGUubG9nKGUpfSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gMTAwMCo2MCo2MCoyNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRNaW51dGVzKDApXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnIy9ldmVudHM/ZmlsdGVyJmRhdGU9JyArIGRhdGUudG9JU09TdHJpbmcoKSArICcmZnJvbT0nICsgbmV3IERhdGUoKS5nZXRIb3VycygpICsgJzonICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkgKyAnJmNhdGVnb3J5PScgKyBlLmRhdGEua2V5WzBdfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50RGJsQ2xpY2s6IGZ1bmN0aW9uKGUpIHtjb25zb2xlLmxvZyhcImVsZW1lbnQgZG91YmxlIGNsaWNrXCIpfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50TW91c2VvdmVyOiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlb3ZlclwiKX0sXG4gICAgICAgICAgICAgICAgICAgIC8vZWxlbWVudE1vdXNlb3V0OiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlIG91dFwiKX0gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxhYmVsVHlwZSA6IFwicGVyY2VudFwiLFxuICAgICAgICAgICAgICAgIGxhYmVsc091dHNpZGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgIC8vc3RhcnRBbmdsZSA6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc3RhcnRBbmdsZS8yIC1NYXRoLlBJLzIgfSxcbiAgICAgICAgICAgICAgICAvL2VuZEFuZ2xlIDogZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5lbmRBbmdsZS8yIC1NYXRoLlBJLzIgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuYXBwLmNvbnN0YW50KCdBUkVBJywge1xuICAgIG9wdGlvbnMgOiB7XG4gICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICB0eXBlOiAnbXVsdGlCYXJDaGFydCcsXG4gICAgICAgICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgICAgICAgIG1hcmdpbiA6IHtcbiAgICAgICAgICAgICAgICB0b3A6IDMwLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiAyMCxcbiAgICAgICAgICAgICAgICBib3R0b206IDEwMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiA1MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueCB9LFxuICAgICAgICAgICAgeTogZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5Db3VudCB9LFxuICAgICAgICAgICAgdXNlVm9yb25vaTogZmFsc2UsXG4gICAgICAgICAgICBjbGlwRWRnZTogdHJ1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZUd1aWRlbGluZTogdHJ1ZSxcbiAgICAgICAgICAgIHhBeGlzOiB7XG4gICAgICAgICAgICAgICAgc2hvd01heE1pbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGlja0Zvcm1hdDogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMudGltZS5mb3JtYXQoJyVtLyVkICVIOiVNJykobmV3IERhdGUoZCkpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByb3RhdGVMYWJlbHMgOiAtNDUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgICAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdCgnLC4wZicpKGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB6b29tOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAvL3NjYWxlRXh0ZW50OiBbMSwgMTBdLFxuICAgICAgICAgICAgICAgIHVzZUZpeGVkRG9tYWluOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1c2VOaWNlU2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhvcml6b250YWxPZmY6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZlcnRpY2FsT2ZmOiB0cnVlLFxuICAgICAgICAgICAgICAgIHVuem9vbUV2ZW50VHlwZTogJ2RibGNsaWNrLnpvb20nXG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIGRpc3BhdGNoOiB7XG4gICAgICAgICAgICAgICAgc3RhdGVDaGFuZ2U6IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZyhcInN0YXRlQ2hhbmdlXCIpOyB9LFxuICAgICAgICAgICAgICAgIGNoYW5nZVN0YXRlOiBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coXCJjaGFuZ2VTdGF0ZVwiKTsgfSxcbiAgICAgICAgICAgICAgICB0b29sdGlwU2hvdzogZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKFwidG9vbHRpcFNob3dcIik7IH0sXG4gICAgICAgICAgICAgICAgdG9vbHRpcEhpZGU6IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZyhcInRvb2x0aXBIaWRlXCIpOyB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbXVsdGliYXI6IHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCA6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGUuZGF0YS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRIb3VycygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcjL2V2ZW50cz9maWx0ZXImZGF0ZT0nICsgZGF0ZS50b0lTT1N0cmluZygpICsgJyZmcm9tPScgKyAoXCIwXCIgKyBob3Vycykuc2xpY2UoLTIpICsgJzonICsgKFwiMFwiICsgbWludXRlcykuc2xpY2UoLTIpICsgJyZjYXRlZ29yeT0nICsgZS5kYXRhLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZS5kYXRhLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGUuZGF0YS54KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cblxuYXBwLmNvbnN0YW50KFwiTUVOVVwiLCBbXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIkRhc2hib2FyZFwiLFxuICAgICAgICBcImxpbmtcIiA6IFwiIy9cIlxuXHRcdC8qXCJpdGVtc1wiIDogW1xuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIlVzZXJzXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwidXNlclwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIlxuXHRcdFx0fVxuXHRcdF0qL1xuXHR9LFxuXHR7XG5cdFx0XCJ0aXRsZVwiIDogXCJFdmVudHNcIixcblx0XHRcImxpbmtcIiBcdDogXCIjL2V2ZW50c1wiXG5cdH0sXG5cdC8qe1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMjNcIixcblx0XHRcIml0ZW1zXCIgOiBbXG5cdFx0XHR7XG5cdFx0XHRcdFwidGl0bGVcIiA6IFwiVXNlcnNcIixcblx0XHRcdFx0XCJsaW5rXCIgXHQ6IFwic2V0dGluZ3NcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJNeSBwcm9maWxlXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwicHJvZmlsZVwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCJwcm9maWxlXCJcblx0XHRcdH1cblx0XHRdXG5cblx0fSxcblx0e1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMTIzXCIsXG5cdFx0XCJsaW5rXCIgXHQ6IFwibG9naW5cIlxuXHR9LCovXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIlNldHRpbmdzXCIsXG5cdFx0XCJpdGVtc1wiIDogW1xuICAgICAgICAgICAge1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCIjL3Byb2ZpbGVcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJVc2Vyc1wiLFxuXHRcdFx0XHRcImxpbmtcIiBcdDogXCIvc2V0dGluZ3NcIlxuXHRcdFx0fSxcblx0XHRdXG5cdH1cbl0pO1xuXG5hcHAuY29udHJvbGxlcignZXZlbnRDb250cm9sbGVyJywgW1wiJHNjb3BlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiJGh0dHBcIiwgXCJhcGlcIiwgZnVuY3Rpb24oJHNjb3BlLCAkcm91dGVQYXJhbXMsICRodHRwLCBhcGkpIHtcblxuICAgICAgICAkc2NvcGUuaWQgPSAkcm91dGVQYXJhbXM7XG5cbiAgICAgICAgJHNjb3BlLmdlbyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5iYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKClcbiAgICAgICAgfVxuXG4gICAgICAgIGFwaS5nZXQoJ2lkLycgKyAkcm91dGVQYXJhbXNbJ2lkJ10pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBkYXRhO1xuXG4gICAgICAgICAgICAvL3ZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XG5cbiAgICAgICAgICAgIGlmICgoJHNjb3BlLmRhdGEuU291cmNlICE9IHVuZGVmaW5lZCAmJiAkc2NvcGUuZGF0YS5UYXJnZXQgIT0gdW5kZWZpbmVkKSAmJiBcbiAgICAgICAgICAgICAgICAoJHNjb3BlLmRhdGEuU291cmNlWzBdLklQNCAmJiAkc2NvcGUuZGF0YS5UYXJnZXRbMF0uSVA0KSkge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2ZyZWVnZW9pcC5uZXQvanNvbi8nICsgJHNjb3BlLmRhdGEuVGFyZ2V0WzBdLklQNFswXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBkYXRhWyd0eXBlJ10gPSBcIlRhcmdldFwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VvLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIGxhdGxuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoZGF0YS5sYXRpdHVkZSwgZGF0YS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgICAvL2JvdW5kcy5leHRlbmQobGF0bG5nKTtcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vZnJlZWdlb2lwLm5ldC9qc29uLycgKyAkc2NvcGUuZGF0YS5Tb3VyY2VbMF0uSVA0WzBdKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsndHlwZSddID0gXCJTb3VyY2VcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdlby5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvL3ZhciBsYXRsbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGRhdGEubGF0aXR1ZGUsIGRhdGEubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9ib3VuZHMuZXh0ZW5kKGxhdGxuZyk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCRzY29wZS5kYXRhLlNvdXJjZSA9PSB1bmRlZmluZWQgfHwgJHNjb3BlLmRhdGEuU291cmNlWzBdLklQNCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9mcmVlZ2VvaXAubmV0L2pzb24vJyArICRzY29wZS5kYXRhLlRhcmdldFswXS5JUDRbMF0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhWyd0eXBlJ10gPSBcIlRhcmdldFwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VvLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vZnJlZWdlb2lwLm5ldC9qc29uLycgKyAkc2NvcGUuZGF0YS5Tb3VyY2VbMF0uSVA0WzBdKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsndHlwZSddID0gXCJTb3VyY2VcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdlby5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIFxuXG59XSk7XG5cbmFwcC5maWx0ZXIoJ2pzb24yaHRtbCcsIFtcIiRzY2VcIiwgXCIkZmlsdGVyXCIsIGZ1bmN0aW9uKCRzY2UsICRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBcIlwiXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpbnB1dCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXY+XCI7XG5cbiAgICAgICAgICAgIC8vIFRoZSB0dXBsZSBpcyBuZXN0ZWRcbiAgICAgICAgICAgIGlmICgodHlwZW9mIHZhbHVlKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIGtleSkgIT0gJ251bWJlcicgJiYga2V5ICE9IFwiJGRhdGVcIilcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxlbT5cIiArIGtleSArIFwiPC9lbT46IFwiO1xuICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPVxcXCJzdWJcXFwiPlwiICsgJGZpbHRlcignanNvbjJodG1sJykodmFsdWUpICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlb2Yga2V5ICE9ICdudW1iZXInKSAmJiBrZXkgIT0gXCIkZGF0ZVwiKVxuICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArIFwiPGVtPlwiICsga2V5ICsgXCI8L2VtPjogXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgZGF0ZSAoSSBrbm93LCBpdCBpcyBzb29vb28gZGlydHkpXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMTAwMDAwMDAwMDAwMClcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgJGZpbHRlcignZGF0ZScpKHZhbHVlLCd5eXl5L01NL2RkIEg6bW06c3MnKSArIFwiPC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgdmFsdWUgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBcygnaHRtbCcsIGh0bWwpO1xuICAgIH0gICAgIFxufV0pO1xuXG4vLyBGaWx0ZXIgdG8gY29udmVydCBJREVBIGZvcm1hdCBmcm9tIE1vbmdvREIgdG8gc3RhbmRhcmRpemVkIElERUEgZm9ybWF0XG5hcHAuZmlsdGVyKCdpZGVhJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciByZXMgPSB7fTtcblxuICAgICAgICBhbmd1bGFyLmZvckVhY2goaW5wdXQsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgIT0gJ19pZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVbJyRkYXRlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzW2tleV0gPSBuZXcgRGF0ZSh2YWx1ZVsnJGRhdGUnXSkudG9JU09TdHJpbmcoKS5zbGljZSgwLDE5KSArICdaJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ2V2ZW50c0NvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCIkaHR0cFwiLCBcIiRsb2NhdGlvblwiLCBcImFwaVwiLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9jYXRpb24sIGFwaSkge1xuICAgICRzY29wZS5maWx0ZXIgPSB7XG4gICAgICAgIFwiY2F0ZWdvcnlcIiA6IFwiXCIsICAgIC8vIENhdGVnb3J5XG4gICAgICAgIFwic3JjX2lwXCIgOiBcIlwiLCAgICAgIC8vIFNvdXJjZSBJUFxuICAgICAgICBcInRydF9pcFwiIDogXCJcIiwgICAgICAvLyBUYXJnZXQgSVBcbiAgICAgICAgXCJkZXNjXCIgOiBcIlwiLCAgICAgICAgLy8gRGVzY3JpcHRpb25cbiAgICAgICAgXCJmbG93c19mcm9tXCIgOiBcIlwiLCAgLy8gRmxvd0NvdW50XG4gICAgICAgIFwiZmxvd3NfdG9cIiA6IFwiXCIsICAgIC8vIEZsb3dDb3VudFxuICAgICAgICBcIml0ZW1zXCIgOiAxMDAsICAgICAgLy8gTGltaXQgbnVtYmVyIG9mIGRpc3BsYXllZCBpdGVtc1xuICAgIH07XG4gICAgJHNjb3BlLnF1ZXJ5ID0ge1xuICAgICAgICBcImZyb21cIiA6IFwiXCIsXG4gICAgICAgIFwidG9cIiA6IFwiXCIsXG4gICAgICAgIFwiZGF0ZVwiIDogbmV3IERhdGUoKSxcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiIDogXCJcIixcbiAgICAgICAgXCJjYXRlZ29yeVwiIDogXCJcIixcbiAgICAgICAgXCJsaW1pdFwiIDogMTAwXG4gICAgfVxuXG4gICAgJHNjb3BlLmRhdGEgPSBbXTtcbiAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiO1xuICAgIGNvbnNvbGUubG9nKCRzY29wZS5xdWVyeS5kYXRlKVxuXG4gICAgJHNjb3BlLmxvYWRJdGVtcyA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgICRzY29wZS5sb2FkYnRuID0gXCJMb2FkaW5nLi4uXCI7XG4gICAgICAgIHZhciBmcm9tID0gcXVlcnkuZnJvbS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIgZnJvbV9kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgIGZyb21fZGF0ZS5zZXRIb3Vycyhmcm9tX2RhdGUuZ2V0SG91cnMoKSArIGZyb21bMF0pO1xuICAgICAgICBmcm9tX2RhdGUuc2V0TWludXRlcyhmcm9tWzFdKTtcbiAgICAgICAgXG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2ZpbHRlcicsIHRydWUpO1xuICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdmcm9tJywgcXVlcnkuZnJvbSk7XG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2RhdGUnLCBxdWVyeS5kYXRlKTtcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnbGltaXQnLCBxdWVyeS5saW1pdCk7XG4gICAgICAgIFxuXG4gICAgICAgIGlmIChxdWVyeS50bykge1xuICAgICAgICAgICAgdmFyIHRvID0gcXVlcnkudG8uc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHZhciB0b19kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgICAgICB0b19kYXRlLnNldEhvdXJzKHRvX2RhdGUuZ2V0SG91cnMoKSArIHRvWzBdKTtcbiAgICAgICAgICAgIHRvX2RhdGUuc2V0TWludXRlcyh0b1sxXSk7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCd0bycsIHF1ZXJ5LnRvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0b19kYXRlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHF1ZXJ5LmRlc2NyaXB0aW9uICE9IFwiXCIpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2Rlc2NyaXB0aW9uJywgcXVlcnkuZGVzY3JpcHRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkuZGVzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHF1ZXJ5LmNhdGVnb3J5ICE9IFwiXCIpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2NhdGVnb3J5JywgcXVlcnkuY2F0ZWdvcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkuY2F0ZWdvcnkgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNlbmQgPSB7XG4gICAgICAgICAgICBcImZyb21cIiA6IGZyb21fZGF0ZSxcbiAgICAgICAgICAgIFwidG9cIiA6IHRvX2RhdGUsXG4gICAgICAgICAgICBcImNhdGVnb3J5XCIgOiBxdWVyeS5jYXRlZ29yeSxcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIiA6IHF1ZXJ5LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgXCJsaW1pdFwiIDogcXVlcnkubGltaXRcbiAgICAgICAgfVxuICAgICAgICBhcGkuZ2V0KCdxdWVyeScsIHNlbmQsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0JHNjb3BlLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRidG4gPSBcIkxvYWRcIlxuXHQgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiOyAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmICgkbG9jYXRpb24uc2VhcmNoKCkuZmlsdGVyKSB7XG4gICAgICAgICRzY29wZS5xdWVyeSA9ICRsb2NhdGlvbi5zZWFyY2goKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnF1ZXJ5LmRhdGUpXG4gICAgICAgICRzY29wZS5xdWVyeS5kYXRlID0gbmV3IERhdGUoJHNjb3BlLnF1ZXJ5LmRhdGUpO1xuICAgICAgICAkc2NvcGUubG9hZEl0ZW1zKCRzY29wZS5xdWVyeSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgICBhcGkuZ2V0KFwiMTAwXCIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZXZlbnRzID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLnNyY19pcCAhPSBcIlwiKXtcbiAgICAgICAgICAgIGlmIChcIlNvdXJjZVwiIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJJUDRcIiBpbiBpdGVtLlNvdXJjZVswXSAmJiBpdGVtLlNvdXJjZVswXS5JUDRbMF0udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuc3JjX2lwLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIudHJ0X2lwICE9IFwiXCIpe1xuICAgICAgICAgICAgaWYgKFwiVGFyZ2V0XCIgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChcIklQNFwiIGluIGl0ZW0uVGFyZ2V0WzBdICYmIGl0ZW0uVGFyZ2V0WzBdLklQNFswXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlci50cnRfaXAudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuY2F0ZWdvcnkgIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGl0ZW0uQ2F0ZWdvcnlbMF0udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLmRlc2MgIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGl0ZW0uRGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuZGVzYy50b0xvd2VyQ2FzZSgpKSA+IC0xKVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuZmxvd3NfZnJvbSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5GbG93Q291bnQgPiBOdW1iZXIoJHNjb3BlLmZpbHRlci5mbG93c19mcm9tKSlcbiAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLmZsb3dzX3RvICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLkZsb3dDb3VudCA8IE51bWJlcigkc2NvcGUuZmlsdGVyLmZsb3dzX3RvKSlcbiAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsb2dpY3ZhbHVlID0gMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxvZ2ljdmFsdWUgPSBsb2dpY3ZhbHVlICogcmVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb2dpY3ZhbHVlID09IDEgPyB0cnVlIDogZmFsc2U7XG5cbiAgICB9XG5cbn1dKTtcblxuYXBwLmRpcmVjdGl2ZSgndmFsaWRhdGVIb3VycycsIGZ1bmN0aW9uKCkge1xuICAgIHZhciB0byA9IFtdO1xuICAgIHZhciBmcm9tID0gW107XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmwpIHtcbiAgICAgICAgICAgIGN0cmwuJHZhbGlkYXRvcnMudGltZSA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChhdHRycy5uZ01vZGVsID09IFwicXVlcnkuZnJvbVwiICYmIHZpZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBmcm9tID0gdmlld1ZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aWV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdG8gPSB2aWV3VmFsdWUuc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmcm9tKVxuICAgICAgICAgICAgY29uc29sZS5sb2codG8pIFxuICAgICAgICAgICAgaWYgKHRvLmxlbmd0aCA9PSAyIHx8IGZyb20ubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9bMF0gPCBmcm9tWzBdIHx8ICh0b1swXSA8PSBmcm9tWzBdICYmIHRvWzFdIDwgZnJvbVsxXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgdG9bMF0gPCAwIHx8IHRvWzBdID4gMjMgfHwgdG9bMV0gPCAwIHx8IHRvWzFdID4gNTkgfHwgZnJvbVswXSA8IDAgfHwgZnJvbVswXSA+IDIzIHx8IGZyb21bMV0gPCAwIHx8IGZyb21bMV0gPiA1OVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5hcHAudmFsdWUoJ2JveGVzX2FycicsIFtcbiAgeyBcbiAgICBcInJvd1wiICAgOiAwLFxuICAgIFwiaGVpZ2h0XCIgOiBcIlwiLFxuICAgIFwiaXRlbXNcIiA6IFtcbiAgICAgIHtcbiAgICAgICAgXCJ0aXRsZVwiICAgOiBcIkV2ZW50cyBzaGFyZXNcIixcbiAgICAgICAgXCJ0eXBlXCIgICAgOiBcInBpZWNoYXJ0XCIsXG4gICAgICAgIFwiY29udGVudFwiIDogXCJcIixcbiAgICAgICAgXCJjb25maWdcIiAgOiB7XG4gICAgICAgICAgICBcIm1ldHJpY1wiICAgIDogXCJjYXRlZ29yeVwiLFxuICAgICAgICAgICAgXCJ0eXBlXCIgICAgICA6IFwicGllY2hhcnRcIixcbiAgICAgICAgICAgIFwicGVyaW9kXCIgICAgOiBcIjI0XCIsXG4gICAgICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcInRpdGxlXCIgICA6IFwiTGFzdCAyNCBob3Vyc1wiLFxuICAgICAgICBcInR5cGVcIiAgICA6IFwiYmFyY2hhcnRcIixcbiAgICAgICAgXCJkYXRhXCIgICAgOiBcIlwiLFxuICAgICAgICBcInRpbWVzdGFtcFwiOiBcIlwiLFxuICAgICAgICBcImNvbmZpZ1wiIDoge1xuICAgICAgICAgICAgXCJtZXRyaWNcIiA6IFwiY2F0ZWdvcnlcIixcbiAgICAgICAgICAgIFwidHlwZVwiIDogXCJiYXJjaGFydFwiLFxuICAgICAgICAgICAgXCJwZXJpb2RcIiA6IDI0LFxuICAgICAgICAgICAgXCJ3aW5kb3dcIiA6IDYwLFxuICAgICAgICAgICAgXCJiZWdpbnRpbWVcIiA6IFwiXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIF1cbiAgfSxcbiAgeyBcbiAgICBcInJvd1wiICAgOiAxLFxuICAgIFwiaXRlbXNcIiA6IFtcbiAgICAgIHtcbiAgICAgICAgXCJ0aXRsZVwiIDogXCJUb3AgZXZlbnRzIGluIDEgaG91clwiLFxuICAgICAgICBcInR5cGVcIiAgOiBcInRvcFwiLFxuICAgICAgICBcImNvbmZpZ1wiIDoge1xuICAgICAgICAgICAgXCJwZXJpb2RcIiA6IDEsXG4gICAgICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJ0aXRsZVwiOiBcIjJcIixcbiAgICAgICAgXCJ0eXBlXCIgICAgOiBcImluY2lkZW50XCJcbiAgICAgIH0sXG4gICAgXVxuICB9LFxuICBdKTtcblxuXG5hcHAuY29udHJvbGxlcignaG9tZUNvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCIkbG9nXCIsIFwiYXBpXCIsIFwiYm94ZXNfYXJyXCIsIFwiJGh0dHBcIiwgXCIkbG9jYWxTdG9yYWdlXCIsIFwidXNlclwiLCBmdW5jdGlvbigkc2NvcGUsICRsb2csIGFwaSwgYm94ZXNfYXJyLCAkaHR0cCwgJGxvY2FsU3RvcmFnZSwgdXNlcikge1xuICAgICRzY29wZS5hY3RpdmVHcmlkID0gZmFsc2U7IFxuICAgICRzY29wZS5vcGVuTWVudSA9IGZ1bmN0aW9uKCRtZE9wZW5NZW51LCBldikge1xuICAgICAgICBvcmlnaW5hdG9yRXYgPSBldjtcbiAgICAgICAgJG1kT3Blbk1lbnUoZXYpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYWRkSXRlbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnYWRkSXRlbScpO1xuICAgIH1cblxuICAgICRzY29wZS5lbmFibGVHcmlkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFbmFibGUgZ3JpZCcpXG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbmFibGVHcmlkJyk7XG4gICAgICAgICRzY29wZS5hY3RpdmVHcmlkID0gISRzY29wZS5hY3RpdmVHcmlkO1xuICAgIH1cblxuXG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCd0b3BCYXInLCB0b3BCYXJDdHJsKTtcblxuZnVuY3Rpb24gdG9wQmFyQ3RybCgkbWREaWFsb2csICRsb2NhdGlvbiwgJG1kU2lkZW5hdil7XG5cblx0dGhpcy51c2VyID0gXCJQZXRyXCJcblxuICB0aGlzLnRvZ2dsZUxlZnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICRtZFNpZGVuYXYoJ2xlZnQnKS50b2dnbGUoKTtcbiAgICB9O1xuICBcdFxuICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxuXHQgICAgICAgIC50aXRsZSgnQXJlIHlvdSBzdXJlPycpXG5cdCAgICAgICAgLmNvbnRlbnQoJ1lvdSBhcmUgYWJvdXQgdG8gYmUgbG9nZ2VkIG91dC4gQWxsIHVuc2F2ZWQgY2hhbmdlcyB3aWxsIGJlIGxvc3QgaW4gdGhlIHZvaWQhJylcblx0ICAgICAgICAub2soJ0xvZyBtZSBvdXQnKVxuXHQgICAgICAgIC5jYW5jZWwoJ0tlZXAgbWUgaGVyZScpXG4gICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihcbiAgICBcdGZ1bmN0aW9uKCkge1xuICAgIFx0XHQkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgXHR9KTtcbiAgfTtcblxuICBcbn07XG5cbmFwcC5jb250cm9sbGVyKCdyb3cnLCBbXCIkc2NvcGVcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0KXtcbiAgJHNjb3BlLiRvbigncmVxdWVzdFJlZHJhdycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY29uc29sZS5sb2coXCJyZXF1ZXN0IGFjY2VwdGVkXCIpO1xuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XG4gICAgfSwgMTApO1xuICB9KTtcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2JveCcsIFtcIiRzY29wZVwiLCBcIiRsb2dcIiwgXCJib3hlc19hcnJcIiwgXCIkdGltZW91dFwiLCBcIiRlbGVtZW50XCIsIFwiJG1kRGlhbG9nXCIsIFwiUFJPVE9DT0xTXCIsIFwiVFlQRVNcIiwgXCJDQVRFR09SSUVTXCIsIFwiJGh0dHBcIiwgXCJQSUVDSEFSVFwiLCBcIkFSRUFcIiwgXCJhcGlcIiwgXCIkbG9jYXRpb25cIiwgXCJ1c2VyXCIsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZywgYm94ZXNfYXJyLCAkdGltZW91dCwgJGVsZW1lbnQsICRtZERpYWxvZywgUFJPVE9DT0xTLCBUWVBFUywgQ0FURUdPUklFUywgJGh0dHAsIFBJRUNIQVJULCBBUkVBLCBhcGksICRsb2NhdGlvbiwgdXNlcil7XG4gICAgXG4gICAgZnVuY3Rpb24gdGltZVNoaWZ0KCkgeyAgICBcbiAgICAgICAgaWYgKCRzY29wZS5ib3ggIT0gdW5kZWZpbmVkICYmICgkc2NvcGUuYm94LnR5cGUgPT0gXCJwaWVjaGFydFwiIHx8ICRzY29wZS5ib3gudHlwZSA9PSBcImJhcmNoYXJ0XCIgfHwgJHNjb3BlLmJveC50eXBlID09ICd0b3AnIHx8ICRzY29wZS5ib3gudHlwZSA9PSBcInN1bVwiICkpIHtcbiAgICAgICAgICAgICRzY29wZS5ib3guY29uZmlnLmJlZ2ludGltZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgLSAkc2NvcGUuYm94LmNvbmZpZy5wZXJpb2QpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub3c7XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGltZVNoaWZ0KCk7XG5cbiAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAkc2NvcGUub3Blbk1lbnUgPSBmdW5jdGlvbigkbWRPcGVuTWVudSwgZXYpIHtcbiAgICAgICAgb3JpZ2luYXRvckV2ID0gZXY7XG4gICAgICAgICRtZE9wZW5NZW51KGV2KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG4gICAgJHNjb3BlLmJhY2t1cE1vZGVsID0ge307XG5cbiAgICAkc2NvcGUucHJvdG9jb2wgPSBQUk9UT0NPTFM7XG4gICAgJHNjb3BlLnR5cGVzID0gVFlQRVM7XG4gICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBDQVRFR09SSUVTO1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gRWRpdCBtb2RlIGhhbmRsaW5nXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgLy8gVHJpZ2dlciBlZGl0aW5nIG1vZGUgYW5kIHNhdmUgY3VycmVudCBzdGF0ZVxuICAgICRzY29wZS5lZGl0ID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICAgICRzY29wZS5lZGl0TW9kZSA9IHRydWU7XG4gICAgICAgICRzY29wZS5iYWNrdXBNb2RlbCA9IGFuZ3VsYXIuY29weShib3gpO1xuICAgICAgICAkc2NvcGUuJGVtaXQoXCJzd2l0Y2gtZHJhZ1wiKTtcbiAgICB9XG5cbiAgICAvLyBTYXZlIGNoYW5nZXMgYW5kIGRpc2FibGUgZWRpdCBtb2RlXG4gICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnVzZXIoKTtcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAncGllY2hhcnQnKSB7XG4gICAgICAgICAgICAkc2NvcGUuYm94Lm9wdGlvbnMgPSBQSUVDSEFSVC5vcHRpb25zO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAnYmFyY2hhcnQnKVxuICAgICAgICAgICAgJHNjb3BlLmJveC5vcHRpb25zID0gQVJFQS5vcHRpb25zO1xuICAgICAgICBcblxuICAgICAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSB7fTtcblxuICAgICAgICAkc2NvcGUuYm94LmNvbmZpZy50eXBlID0gJHNjb3BlLmJveC50eXBlO1xuICAgICAgICBcbiAgICAgICAgLy8gRGlzYWJsZSBlZGl0IG1vZGVcbiAgICAgICAgJHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG5cbiAgICAgICAgLy8gU2hvdyBsb2FkaW5nIGluZGljYXRvclxuICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIFNoaWZ0IHRpbWUgZm9yIHF1ZXJ5XG4gICAgICAgIHRpbWVTaGlmdCgpO1xuXG4gICAgICAgICRzY29wZS4kZW1pdChcInN3aXRjaC1kcmFnXCIpO1xuICAgICAgICAvLyBHZXQgcmVxdWlyZWQgZGF0YVxuICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdwaWVjaGFydCcgfHwgJHNjb3BlLmJveC50eXBlID09ICdiYXJjaGFydCcpIHtcbiAgICAgICAgICAgIGFwaS5nZXQoJ2FnZycsICRzY29wZS5ib3guY29uZmlnLCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTsgICAgXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICd0b3AnKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCd0b3AnLCAkc2NvcGUuYm94LmNvbmZpZywgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7ICAgIFxuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAnc3VtJykge1xuICAgICAgICAgICAgYXBpLmdldCgnY291bnQnLCAkc2NvcGUuYm94LmNvbmZpZykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXZlcnQgdG8gb3JpZ2luYWwgYW5kIGRpc2FibGUgZWRpdCBtb2RlXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgICAkc2NvcGUuYm94ID0gYW5ndWxhci5jb3B5KCRzY29wZS5iYWNrdXBNb2RlbCk7XG4gICAgICAgICRzY29wZS5iYWNrdXBNb2RlbCA9IHt9O1xuICAgICAgICAkc2NvcGUuZWRpdE1vZGUgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLiRlbWl0KFwic3dpdGNoLWRyYWdcIik7XG4gICAgfVxuICAgIFxuICAgICRzY29wZS50b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZVNoaWZ0KClcbiAgICAgICAgYXBpLmdldCgndG9wJywgJHNjb3BlLmJveC5jb25maWcsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICB9KVxuICAgIH1cbiAgICBcbiAgICBpZiAoJHNjb3BlLmJveCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSBcInBpZWNoYXJ0XCIgfHwgJHNjb3BlLmJveC50eXBlID09IFwiYmFyY2hhcnRcIikge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAncGllY2hhcnQnKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5vcHRpb25zID0gUElFQ0hBUlQub3B0aW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ2JhcmNoYXJ0JylcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94Lm9wdGlvbnMgPSBBUkVBLm9wdGlvbnM7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgJHNjb3BlLmJveC5jb25maWcudHlwZSA9ICRzY29wZS5ib3gudHlwZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXBpLmdldCgnYWdnJywgJHNjb3BlLmJveC5jb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU3VtIGFsbCBldmVudHNcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdwaWVjaGFydCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8ICRzY29wZS5ib3guZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvdGFsID0gJHNjb3BlLnRvdGFsICsgTnVtYmVyKCRzY29wZS5ib3guZGF0YVtpXS54KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAndG9wJykge1xuICAgICAgICAgICAgYXBpLmdldCgndG9wJywgJHNjb3BlLmJveC5jb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICdzdW0nKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCdjb3VudCcsICRzY29wZS5ib3guY29uZmlnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS51c2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZXR0aW5ncyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuaXRlbXMpO1xuICAgICAgICBjb25zb2xlLmxvZyhzZXR0aW5ncylcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZXR0aW5nc1tpXVtcImRhdGFcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNldHRpbmdzW2ldW1wib3B0aW9uc1wiXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHF1ZXJ5ID0ge1xuICAgICAgICAgICAgXCJqd3RcIiA6IHVzZXIuand0KCksXG4gICAgICAgICAgICBcInNldHRpbmdzXCIgOiBzZXR0aW5nc1xuICAgICAgICB9XG5cbiAgICAgICAgJGxvZy5pbmZvKHF1ZXJ5KVxuICAgICAgICB1c2VyLnB1dChxdWVyeSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRhdGFcIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoZGF0YSlcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignc2F2ZVVzZXInLCBmdW5jdGlvbigpIHskc2NvcGUudXNlcigpfSk7XG5cbiAgICAkc2NvcGUuJG9uKCdncmlkc3Rlci1pdGVtLXJlc2l6ZWQnLCBmdW5jdGlvbihncmlkc3Rlcikge1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcXVlc3QgYWNjZXB0ZWRcIik7XG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfSlcblxuICBcbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2dyaWQnLCBbXCIkc2NvcGVcIiwgXCIkdGltZW91dFwiLCBcIiRsb2dcIiwgXCJ1c2VyXCIsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsICRsb2cvKiwgJG1kTWVkaWEsICR3aW5kb3cqLywgdXNlcikge1xuJHNjb3BlLm9wdCA9IHtcbiAgICBvdXRlck1hcmdpbjogZmFsc2UsXG4gICAgY29sdW1uczogNixcbiAgICBwdXNoaW5nOiB0cnVlLFxuICAgIHJvd0hlaWdodDogMjUwICsgMTAsXG4gICAgY29sV2lkdGggOiAnYXV0bycsXG4gICAgZmxvYXRpbmc6IHRydWUsXG4gICAgc3dhcHBpbmc6IHRydWUsXG4gICAgbW9iaWxlQnJlYWtQb2ludDogOTMzLFxuICAgIGRyYWdnYWJsZToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICB9LFxuICAgIHJlc2l6YWJsZToge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgaGFuZGxlczogWyduJywgJ2UnLCAncycsICd3JywgJ3NlJywgJ3N3J10sXG4gICAgICAgIHN0b3A6IGZ1bmN0aW9uKGV2ZW50LCAkZWxlbWVudCwgd2lkZ2V0KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc2l6ZSBlbmRcIik7XG4gICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ3JlcXVlc3RSZWRyYXcnKTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcXVlc3QgYWNjZXB0ZWRcIik7XG4gICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xuICAgICAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICB9XG4gICAgfVxufVxuLyp2YXIgdyA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KTtcbncuYmluZCgncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgLy8kc2NvcGUub3B0Lm1vYmlsZU1vZGVFbmFibGUgPSAkbWRNZWRpYSgnZ3QtbWQnKTtcbiAgICAkc2NvcGUub3B0LmlzTW9iaWxlID0gISRtZE1lZGlhKCdndC1tZCcpO1xufSk7Ki9cblxuY29uc29sZS5sb2codXNlci5jb25maWcoKSlcblxuXG4kc2NvcGUuJG9uKCdlbmFibGVHcmlkJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCRzY29wZS5vcHQucmVzaXphYmxlLmVuYWJsZWQgPT0gdHJ1ZSkge1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2F2ZVVzZXInKTtcbiAgICB9XG4gICAgXG4gICAgJHNjb3BlLm9wdC5yZXNpemFibGUuZW5hYmxlZCA9ICEkc2NvcGUub3B0LnJlc2l6YWJsZS5lbmFibGVkOyBcbiAgICAkc2NvcGUub3B0LmRyYWdnYWJsZS5lbmFibGVkID0gISRzY29wZS5vcHQuZHJhZ2dhYmxlLmVuYWJsZWQ7IFxufSlcblxuJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKGJveCkge1xuXG4gICAgdmFyIHRtcCA9ICRzY29wZS5pdGVtcy5zcGxpY2UoJHNjb3BlLml0ZW1zLmluZGV4T2YoYm94KSwgMSk7XG5cbiAgfTtcblxuJHNjb3BlLml0ZW1zID0gdXNlci5jb25maWcoKTtcbi8qJHNjb3BlLml0ZW1zID0gW3tcbiAgICBzaXplWDogMixcbiAgICBzaXplWTogMixcbiAgICByb3c6IDAsXG4gICAgY29sOiAwLFxuICAgIFwidGl0bGVcIiAgIDogXCJFdmVudHMgc2hhcmVzXCIsXG4gICAgXCJ0eXBlXCIgICAgOiBcInBpZWNoYXJ0XCIsXG4gICAgXCJjb250ZW50XCIgOiBcIlwiLFxuICAgIFwiY29uZmlnXCIgIDoge1xuICAgICAgICBcIm1ldHJpY1wiICAgIDogXCJjYXRlZ29yeVwiLFxuICAgICAgICBcInR5cGVcIiAgICAgIDogXCJwaWVjaGFydFwiLFxuICAgICAgICBcInBlcmlvZFwiICAgIDogXCIyNFwiLFxuICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgIH1cbn0sIHtcbiAgICBzaXplWDogMixcbiAgICBzaXplWTogMixcbiAgICBtaW5TaXplWCA6IDIsXG4gICAgbWluU2l6ZVkgOiAyLFxuICAgIHJvdzogMCxcbiAgICBjb2w6IDIsXG4gICAgXCJ0aXRsZVwiIDogXCJMYXN0IDI0IGhvdXJzXCIsXG4gICAgXCJ0eXBlXCIgOiBcImJhcmNoYXJ0XCIsXG4gICAgXCJkYXRhXCIgOiBcIlwiLFxuICAgIFwidGltZXN0YW1wXCI6IFwiXCIsXG4gICAgXCJjb25maWdcIiA6IHtcbiAgICAgICAgXCJtZXRyaWNcIiA6IFwiY2F0ZWdvcnlcIixcbiAgICAgICAgXCJ0eXBlXCIgOiBcImJhcmNoYXJ0XCIsXG4gICAgICAgIFwicGVyaW9kXCIgOiAyNCxcbiAgICAgICAgXCJ3aW5kb3dcIiA6IDYwLFxuICAgICAgICBcImJlZ2ludGltZVwiIDogXCJcIlxuICAgIH1cbn0sIHtcbiAgICBcInRpdGxlXCIgOiBcIlRvcCBldmVudHMgaW4gMSBob3VyXCIsXG4gICAgXCJ0eXBlXCIgIDogXCJ0b3BcIixcbiAgICBcImNvbmZpZ1wiIDoge1xuICAgICAgICBcInBlcmlvZFwiIDogMSxcbiAgICAgICAgXCJiZWdpbnRpbWVcIiA6IFwiXCJcbiAgICB9XG59XTsqL1xuXG4gICAgJHNjb3BlLiRvbignYWRkSXRlbScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgICAgIFwidGl0bGVcIiA6IFwiTmV3IGJveFwiLFxuICAgICAgICAgICAgXCJsb2FkaW5nXCIgOiBmYWxzZSxcbiAgICAgICAgICAgIHNpemVYOiAxLFxuICAgICAgICAgICAgc2l6ZVk6IDEsXG4gICAgICAgICAgICAvL3JvdyA6IHJvdyxcbiAgICAgICAgICAgIC8vY29sIDogY29sXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuaXRlbXMucHVzaChpdGVtKVxuICAgIH0pO1xuXG5cbn1dKVxuXG5cbmFwcC5kaXJlY3RpdmUoJ2dyaWRzdGVyRHluYW1pY0hlaWdodCcsIFtcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuXG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGl0ZW06IFwiPVwiIC8vZ3JpZHN0ZXIgaXRlbVxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICByZXN0cmljdDogJ0EnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkgeyBcbiAgICAgICAgICAgIHZhciByb3dIZWlnaHRPcHRpb24gPSAyNzA7IC8vIENoYW5nZSB0aGlzIHZhbHVlIHdpdGggeW91ciBvd24gcm93SGVpZ2h0IG9wdGlvblxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHJvd0hlaWdodE9wdGlvbiAqIHNjb3BlLml0ZW0uc2l6ZVk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNjb3BlLml0ZW0udGl0bGUpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm5ld1ZhbDogXCIgKyBuZXdWYWwgKyBcIiAgICAgaGVpZ2h0OiBcIiArIGhlaWdodClcbiAgICAgICAgICAgIGlmKG5ld1ZhbCA+IGhlaWdodCl7XG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IE1hdGguZmxvb3IobmV3VmFsIC8gcm93SGVpZ2h0T3B0aW9uKTtcbiAgICAgICAgICAgICAgICAvL2RpdisrO1xuICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0uc2l6ZVkgPSBkaXY7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cbn1dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsIFtcIiRzY29wZVwiLCBcIiRsb2NhdGlvblwiLCBcIiRsb2dcIiwgXCJ1c2VyXCIsIGZ1bmN0aW9uKCRzY29wZSwgJGxvY2F0aW9uLCAkbG9nLCB1c2VyKSB7XG5cdCRzY29wZS50aXRsZSA9IFwiTG9naW4gdG8gTmVtZWEgRGFzaGJvYXJkXCI7XG5cdCRzY29wZS5sb2dpbkJ0biA9IFwiTG9naW5cIjtcbiAgICBcbiAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oY3JlZCkge1xuXHRcdCRzY29wZS5sb2dpbkJ0biA9IFwiQXV0aGVudGljYXRpbmcuLi5cIjtcbiAgICAgICAgJHNjb3BlLmxvZ2luQnRuRGlzYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIHVzZXIuYXV0aChjcmVkKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpOyAgICBcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKG1zZykge1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yX21lcyA9IG1zZztcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkJ0biA9IFwiTG9naW5cIlxuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQnRuRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfSlcbiAgICB9XG5cblx0XHRcblx0XHQvKmxvZ2luQXV0aC5mZXRjaFVzZXIodXNlcilcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG5cblx0XHRcdCRsb2cuaW5mbyhkYXRhKTtcblxuXHRcdFx0aWYgKGRhdGFbXCJzdWNjZXNzXCJdID09IHRydWUpIHtcblx0XHRcdFx0Ly8kbG9nLmluZm8oZGF0YSk7XHRcblx0XHRcdFx0JHNjb3BlLmxvZ2luQnRuID0gXCJTdWNjZXNzXCI7XG5cdFx0XHRcdCRsb2NhdGlvbi5wYXRoKFwiL1wiKTtcblx0XHRcdFx0bG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2xvZ2dlZEluJywgdHJ1ZSk7XG5cdFx0XHRcdGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdsb2dnZWRJbi5wdycsIHNoYTI1Nl9kaWdlc3QoZGF0YS5wYXNzd29yZCkpO1x0XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0JGxvZy5lcnJvcihcImVycm9yIC0gYmFkIHBhc3N3b3JkXCIpO1xuXHRcdFx0XHQkc2NvcGUuZXJyb3JfbWVzID0gXCJCYWQgcGFzc3dvcmRcIjtcblx0XHRcdFx0JHNjb3BlLmxvZ2luQnRuID0gXCJMb2dpblwiO1xuXHRcdFx0XHRsb2dpbkNvcnJlY3QgPSBmYWxzZTtcblx0XHRcdFx0bG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2xvZ2dlZEluJywgZmFsc2UpO1x0XG5cdFx0XHR9XG5cdFx0fSk7Ki9cbn1dKTtcblxuXG5cbmFwcC5jb250cm9sbGVyKCdwcm9maWxlQ29udHJvbGxlcicsIFtcIiRzY29wZVwiLCBcInVzZXJcIiwgXCJhcGlcIiwgZnVuY3Rpb24oJHNjb3BlLCB1c2VyLCBhcGkpIHtcbiAgICAkc2NvcGUudXNlciA9IHVzZXIuY29uZmlnKCk7XG5cbiAgICAkc2NvcGUuZWRpdFVzZXIgPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH1cbn1dKVxuXG5hcHAuc2VydmljZSgnYXBpJywgW1wiJGh0dHBcIiwgXCIkbG9nXCIsIFwiJG1kVG9hc3RcIiwgXCIkbG9jYWxTdG9yYWdlXCIsIFwiUElFQ0hBUlRcIiwgXCJDT05GSUdcIiwgZnVuY3Rpb24oJGh0dHAsICRsb2csICRtZFRvYXN0LCAkbG9jYWxTdG9yYWdlLCBQSUVDSEFSVCwgQ09ORklHKSB7XG5cblx0dmFyIGFkZHIgPSBDT05GSUdbXCJob3N0XCJdICsgXCI6XCIgKyBDT05GSUdbXCJwb3J0XCJdICsgXCIvXCIgKyBDT05GSUdbXCJ2ZXJzaW9uXCJdICsgXCIvZXZlbnRzL1wiO1xuXG4gICAgdGhpcy5hdXRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgfVxuXG4gICAgdGhpcy5jb25maWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vYmVuZWZpemlvLmxpYmVyb3V0ZXIub3JnOjU1NTUvY29uZmlnJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmFkZHIgPSBkYXRhLmhvc3QgKyAnOicgKyBkYXRhLnBvcnQgKyBkYXRhLmV2ZW50cztcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbJ2NvbmZpZyddID0gZGF0YTtcbiAgICAgICAgICAgIGFsZXJ0KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBpbmZvKSB7XG5cdFx0cmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkdFVFwiLFxuICAgICAgICAgICAgcGFyYW1zIDogcGFyYW1zLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB0aGlzLmF1dGgoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoaW5mbyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0RhdGEgc3VjY2Vzc3VsbHkgbG9hZGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbG9nLmVycm9yKCdDYW5ub3QgZmV0Y2ggZGF0YScpO1xuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nJylcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5wb3N0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBpbmZvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGFkZHIgKyB1cmwsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRGF0YSBzdWNjZXNzZnVsbHkgbG9hZGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFx0JGxvZy5lcnJvcignQ2Fubm90IGZldGNoIGRhdGEnKTtcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdTb21ldGhpbmcgd2VudCB3cm9uZycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcImVycm9yLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5wdXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGluZm8pIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnB1dChhZGRyICsgdXJsLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0RhdGEgc3VjY2Vzc2Z1bGx5IGxvYWRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcInN1Y2Nlc3MtdG9hc3RcIilcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcdCRsb2cuZXJyb3IoJ0Nhbm5vdCBmZXRjaCBkYXRhJyk7XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnU29tZXRoaW5nIHdlbnQgd3JvbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuXG59XSk7XG5cblxuXG5hcHAuZmFjdG9yeSgnbWVudScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXHRyZXR1cm4gJGh0dHAuZ2V0KCdqc29uL21lbnUuanNvbicpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fSk7XG5cdC8vXHQuZXJyb3IoY29uc29sZS5sb2coJ0Nhbm5vdCByZXRyaWV2ZSBkYXRhJykpO1xufV0pO1xuXG5hcHAuZmFjdG9yeSgnanNvbmRhdGEnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApIHtcblx0cmV0dXJuICRodHRwLmdldCgnanNvbi90ZXN0ZmlsZV8xMDAuanNvbicpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fSk7XG5cdC8vXHQuZXJyb3IoY29uc29sZS5sb2coJ0Nhbm5vdCByZXRyaWV2ZSBkYXRhJykpO1xufV0pO1xuXG5hcHAuZGlyZWN0aXZlKFwic2lkZWJhck1lbnVcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG4gICAgICAgIHNjb3BlOiB7XG5cdFx0XHRzZWN0aW9uOiAnPSdcblx0XHR9LFxuXHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvc2lkZWJhci1tZW51Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkbWRTaWRlbmF2XCIsIFwiJGxvY2F0aW9uXCIsIFwiTUVOVVwiLCBcInVzZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCAkbWRTaWRlbmF2LCAkbG9jYXRpb24sIE1FTlUsIHVzZXIpIHtcbiAgICAgICAgICAgICRzY29wZS5tZW51ID0gTUVOVTtcblxuICAgICAgICAgICAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24oY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybigkbG9jYXRpb24ucGF0aCgpID09IGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlTW9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgncmVxQ2hhbmdlTW9kZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZW5hYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZUl0ZW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlQnRuID0gXCJ0b2dnbGVkXCI7XG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgICRzY29wZS5jbG9zZUxlZnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdXNlci5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiBcbiAgICAgICAgfV1cblx0fTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKFwidG9wYmFyTWVudVwiLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0XHRzY29wZToge1xuXHRcdFx0c2VjdGlvbjogJz0nXG5cdFx0fSxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3RvcGJhci1tZW51Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyIDogW1wiJHNjb3BlXCIsIFwiJG1kU2lkZW5hdlwiLCBmdW5jdGlvbigkc2NvcGUsICRtZFNpZGVuYXYpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGVMZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJG1kU2lkZW5hdignbGVmdCcpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XVxuXHR9O1xufSk7XG5cblxuYXBwLmNvbnRyb2xsZXIoJ3RvcEJhcicsIHRvcEJhckN0cmwpO1xuXG5mdW5jdGlvbiB0b3BCYXJDdHJsKCRtZERpYWxvZywgJGxvY2F0aW9uLCAkbWRTaWRlbmF2KXtcbiAgICB0aGlzLnRvZ2dsZUxlZnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJG1kU2lkZW5hdignbGVmdCcpLnRvZ2dsZSgpO1xuICAgIH07XG59O1xuXG5hcHAuZGlyZWN0aXZlKFwiYm94ZXNcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdFx0c2NvcGU6IHtcblx0XHRcdHNlY3Rpb246ICc9J1xuXHRcdH0sXG5cdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ib3hlcy5odG1sJ1xuXHR9O1xufSk7XG5cblxuYXBwLmRpcmVjdGl2ZSgnY2xpY2tFZGl0JywgZnVuY3Rpb24oKSB7XG5cdHZhciB0ZW1wbGF0ZSA9ICc8ZGl2PjxoMiBuZy1zaG93PVwidmlldy5zaG93VGl0bGVcIiBuZy1jbGljaz1cImVkaXRUaXRsZSgpXCI+e3tib3gudGl0bGV9fTwvaDI+JyArXG5cdFx0XHRcdCc8bWQtaW5wdXQtY29udGFpbmVyIG5nLWhpZGU9XCJzaG93VGl0bGVcIj4nICtcblx0XHRcdFx0XHQnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJ7e2JveC50aXRsZX19XCIgbmctYmx1cj1cImVkaXRUaXRsZShib3gudGl0bGUpXCIgbmctbW9kZWw9XCJib3gudGl0bGVcIiBjbGFzcz1cImZvY3VzVGl0bGVcIiBhcmlhLWxhYmVsPVwiRWRpdCBUaXRsZVwiPicgK1xuXHRcdFx0XHQnPC9tZC1pbnB1dC1jb250YWluZXI+PC9kaXY+JztcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0IFx0OiBcIkFcIixcblx0XHRyZXBsYWNlXHRcdDogdHJ1ZSxcblx0XHR0ZW1wbGF0ZSBcdDogdGVtcGxhdGUsXG5cdFx0c2NvcGVcdFx0OiB7XG5cdFx0XHR2YWx1ZTogXCI9Y2xpY2tFZGl0XCJcblx0XHR9LFxuXHRcdGNvbnRyb2xsZXJcdDogW1wiJHNjb3BlXCIsIFwiaW5wdXRUZXh0XCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24oJHNjb3BlLCBpbnB1dFRleHQsICR0aW1lb3V0KSB7XG5cdFx0XHQkc2NvcGUudmlldy5zaG93VGl0bGUgPSB0cnVlO1xuXG5cdFx0XHRpZiAoJHNjb3BlLnNob3dUaXRsZSA9IHRydWUpIHtcblx0XHQgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHQgICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLmZvY3VzVGl0bGUnKS50cmlnZ2VyKCdmb2N1cycpO1xuXHRcdCAgICAgICAgY29uc29sZS5sb2coXCJ0cmlnZ2VyXCIpO1xuXHRcdCAgICAgIH0sIDEwMCk7XG5cdFx0ICAgIH07XG5cblx0XHQgICAgJHNjb3BlLmVkaXRUaXRsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdCAgICBcdCRzY29wZS52aWV3LnNob3dUaXRsZSA9ICEkc2NvcGUudmlldy5zaG93VGl0bGU7XG5cdFx0ICAgIH07XG5cdFx0fV1cblx0fTtcbn0pO1xuXG5hcHAuZGlyZWN0aXZlKFwiY2xpY2tUb0VkaXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVkaXRvclRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJjbGljay10by1lZGl0XCI+JyArXG4gICAgICAgICc8ZGl2IG5nLWhpZGU9XCJ2aWV3LmVkaXRvckVuYWJsZWRcIiBuZy1jbGljaz1cImVuYWJsZUVkaXRvcigpXCI+JyArXG4gICAgICAgICAgICAnPGEgbmctY2xpY2s9XCJlbmFibGVFZGl0b3IoKVwiPjxtZC1pY29uIG1kLXN2Zy1zcmM9XCJpbWcvaWNvbnMvZWRpdC5zdmdcIj48L21kLWljb24+PC9hPicgK1xuICAgICAgICAgICAgJ3t7dmFsdWV9fSAnICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAnPG1kLWlucHV0LWNvbnRhaW5lciBuZy1zaG93PVwidmlldy5lZGl0b3JFbmFibGVkXCI+JyArXG5cdCAgICAgICAgJzxkaXY+JyArXG5cdCAgICAgICAgICAgICc8aW5wdXQgbmctbW9kZWw9XCJ2aWV3LmVkaXRhYmxlVmFsdWVcIiBjbGFzcz1cImZvY3VzVGl0bGVcIiBhcmlhLWxhYmVsPVwiVGl0bGVcIj4nICtcblx0ICAgICAgICAgICAgJzxzcGFuIG5nLWNsaWNrPVwic2F2ZSgpXCI+U2F2ZTwvc3Bhbj4nICtcblx0ICAgICAgICAgICAgJyBvciAnICtcblx0ICAgICAgICAgICAgJzxhIG5nLWNsaWNrPVwiZGlzYWJsZUVkaXRvcigpXCI+Y2FuY2VsPC9hPi4nICtcblx0ICAgICAgICAnPC9kaXY+JyArXG5cdCAgICAnPC9tZC1pbnB1dC1jb250YWluZXI+JyArXG4gICAgJzwvZGl2Pic7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogXCJBXCIsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHRlbXBsYXRlOiBlZGl0b3JUZW1wbGF0ZSxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBcIj1jbGlja1RvRWRpdFwiLFxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NvcGVcIiwgXCIkdGltZW91dFwiLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICAkc2NvcGUudmlldyA9IHtcbiAgICAgICAgICAgICAgICBlZGl0YWJsZVZhbHVlOiAkc2NvcGUudmFsdWUsXG4gICAgICAgICAgICAgICAgZWRpdG9yRW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICRzY29wZS5lbmFibGVFZGl0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmlldy5lZGl0b3JFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmlldy5lZGl0YWJsZVZhbHVlID0gJHNjb3BlLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0ICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy5mb2N1c1RpdGxlJykudHJpZ2dlcignZm9jdXMnKTtcblx0XHQgICAgICAgIGNvbnNvbGUubG9nKFwidHJpZ2dlclwiKTtcblx0XHQgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVFZGl0b3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudmlldy5lZGl0b3JFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS52YWx1ZSA9ICRzY29wZS52aWV3LmVkaXRhYmxlVmFsdWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVFZGl0b3IoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dXG4gICAgfTtcbn0pO1xuXG5hcHAuc2VydmljZSgndXNlcicsIFtcIiRsb2NhbFN0b3JhZ2VcIiwgXCIkaHR0cFwiLCBcIiRtZFRvYXN0XCIsIFwiJGxvY2F0aW9uXCIsIFwiQ09ORklHXCIsIGZ1bmN0aW9uKCRsb2NhbFN0b3JhZ2UsICRodHRwLCAkbWRUb2FzdCwgJGxvY2F0aW9uLCBDT05GSUcpe1xuICAgIHZhciBjYWNoZSA9IG51bGw7XG5cbiAgICB2YXIgZGFzaGJvYXJkID0gW107XG5cblx0dmFyIGFkZHIgPSBDT05GSUdbXCJob3N0XCJdICsgXCI6XCIgKyBDT05GSUdbXCJwb3J0XCJdICsgXCIvXCIgKyBDT05GSUdbXCJ2ZXJzaW9uXCJdICsgXCIvdXNlcnMvXCI7XG5cbiAgICB0aGlzLmNvbmZpZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXTtcbiAgICB9XG5cbiAgICB0aGlzLmp3dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGxvY2FsU3RvcmFnZVtcImp3dFwiXTtcbiAgICB9XG5cbiAgICB0aGlzLmF1dGggPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGFkZHIgKyBcImF1dGhcIiwgYW5ndWxhci50b0pzb24odXNlcikpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXSA9IGRhdGFbXCJqd3RcIl07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRPRE86IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb25maWcgYW5kIGp3dCA+PiBkdXBsaWNpdHlcbiAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1wiZGFzaGJvYXJkXCJdO1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXSA9IGRhdGFbXCJzZXR0aW5nc1wiXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cylcbiAgICAgICAgICAgIC8vIExldCBpdCBiZSBoYW5kbGVkIGJ5IGNvbnRyb2xsZXJcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLnB1dCA9IGZ1bmN0aW9uKGRhdGEsIGluZm8pIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIsIFxuICAgICAgICAgICAgbWV0aG9kIDogXCJQVVRcIixcbiAgICAgICAgICAgIGRhdGEgOiBhbmd1bGFyLnRvSnNvbihkYXRhKSxcbiAgICAgICAgICAgIGhlYWRlcnMgOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nIDogJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXNlciBzZXR0aW5ncyB1cGRhdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihtc2csIHN0YXR1cykge1xuICAgICAgICAgICAgXHQkbG9nLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyBzZW5kaW5nIHVzZXIgZGF0YScpO1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gTG9nb3V0IHVzZXJcbiAgICAvLyBSZW1vdmUgSldUIGZyb20gbG9jYWxTdG9yYWdlIGFuZCBkZWxldGUgc2Vzc2lvbiBvbiBzZXJ2ZXJcbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXNlciA9ICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcblxuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgdXJsIDogYWRkciArIFwibG9nb3V0XCIsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdMb2dvdXQgc3VjY2Vzc2Z1bGwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIG1zZykge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdMb2dvdXQgZmFpbGVkIG9uIHNlcnZlciBzaWRlLCBidXQgeW91IGFyZSBsb2dnZWQgb3V0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1dKTtcbiIsImFwcC5jb25zdGFudCgnQ09ORklHJywge1xuICAgIFwiaG9zdFwiIDogXCJodHRwczovL2JlbmVmaXppby5saWJlcm91dGVyLm9yZ1wiLFxuICAgIFwicG9ydFwiIDogXCI1NTU1XCIsXG4gICAgXCJ2ZXJzaW9uXCIgOiBcInYyXCJcbn0pO1xuIiwiYXBwLmNvbnN0YW50KCdBVVRIX0VWRU5UUycsIHtcbiAgbG9naW5TdWNjZXNzOiAnYXV0aC1sb2dpbi1zdWNjZXNzJyxcbiAgbG9naW5GYWlsZWQ6ICdhdXRoLWxvZ2luLWZhaWxlZCcsXG4gIGxvZ291dFN1Y2Nlc3M6ICdhdXRoLWxvZ291dC1zdWNjZXNzJyxcbiAgc2Vzc2lvblRpbWVvdXQ6ICdhdXRoLXNlc3Npb24tdGltZW91dCcsXG4gIG5vdEF1dGhlbnRpY2F0ZWQ6ICdhdXRoLW5vdC1hdXRoZW50aWNhdGVkJyxcbiAgbm90QXV0aG9yaXplZDogJ2F1dGgtbm90LWF1dGhvcml6ZWQnXG59KTtcblxuYXBwLmNvbnN0YW50KCdDQVRFR09SSUVTJywgWyBcImFueVwiLCBcIlJlY29uLlNjYW5uaW5nXCIsIFwiQXR0ZW1wdC5Mb2dpblwiLCBcIkF2YWlsYWJpbGl0eS5Eb1NcIiBdKTtcbmFwcC5jb25zdGFudCgnUFJPVE9DT0xTJywgWyBcInRjcFwiLCBcImRuc1wiLCBcInVkcFwiIF0pO1xuYXBwLmNvbnN0YW50KCdUWVBFUycsIFtcImJhcmNoYXJ0XCIsIFwicGllY2hhcnRcIiwgXCJ0b3BcIiwgXCJzdW1cIl0pXG5cbmFwcC5jb25zdGFudCgnUElFQ0hBUlQnLCB7IFxuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICdwaWVDaGFydCcsXG4gICAgICAgICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGQpe3JldHVybiBkLmtleVswXTt9LFxuICAgICAgICAgICAgeTogZnVuY3Rpb24oZCl7cmV0dXJuIGQueDt9LFxuICAgICAgICAgICAgc2hvd0xhYmVsczogdHJ1ZSxcbiAgICAgICAgICAgIGRvbnV0IDogdHJ1ZSxcbiAgICAgICAgICAgIHBhZEFuZ2xlIDogMC4wMCxcbiAgICAgICAgICAgIGNvcm5lclJhZGl1cyA6IDEsXG4gICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgIGxhYmVsVGhyZXNob2xkOiAwLFxuICAgICAgICAgICAgLy9jb2xvcjogW1wiIzBlYzRmNFwiLCBcIiM2MzFGRjZcIiwgXCIjRkZEQzA2XCIsIFwiI0ZGODQwNlwiLCBcIiNiNTY5NjlcIiwgXCIjZTZjZjhiXCJdLFxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogNSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b29sdGlwQ29udGVudCA6IGZ1bmN0aW9uKGtleSwgeCwgeSwgZSwgZ3JhcGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhncmFwaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnT2xhbGFsYSEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGllIDoge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2hhcnRDbGljazogZnVuY3Rpb24oZSkge2NvbnNvbGUubG9nKGUpfSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gMTAwMCo2MCo2MCoyNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRNaW51dGVzKDApXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnIy9ldmVudHM/ZmlsdGVyJmRhdGU9JyArIGRhdGUudG9JU09TdHJpbmcoKSArICcmZnJvbT0nICsgbmV3IERhdGUoKS5nZXRIb3VycygpICsgJzonICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkgKyAnJmNhdGVnb3J5PScgKyBlLmRhdGEua2V5WzBdfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50RGJsQ2xpY2s6IGZ1bmN0aW9uKGUpIHtjb25zb2xlLmxvZyhcImVsZW1lbnQgZG91YmxlIGNsaWNrXCIpfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50TW91c2VvdmVyOiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlb3ZlclwiKX0sXG4gICAgICAgICAgICAgICAgICAgIC8vZWxlbWVudE1vdXNlb3V0OiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlIG91dFwiKX0gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxhYmVsVHlwZSA6IFwicGVyY2VudFwiLFxuICAgICAgICAgICAgICAgIGxhYmVsc091dHNpZGUgOiB0cnVlLFxuICAgICAgICAgICAgICAgIC8vc3RhcnRBbmdsZSA6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc3RhcnRBbmdsZS8yIC1NYXRoLlBJLzIgfSxcbiAgICAgICAgICAgICAgICAvL2VuZEFuZ2xlIDogZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5lbmRBbmdsZS8yIC1NYXRoLlBJLzIgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cblxuYXBwLmNvbnN0YW50KCdBUkVBJywge1xuICAgIG9wdGlvbnMgOiB7XG4gICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICB0eXBlOiAnbXVsdGlCYXJDaGFydCcsXG4gICAgICAgICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgICAgICAgIG1hcmdpbiA6IHtcbiAgICAgICAgICAgICAgICB0b3A6IDMwLFxuICAgICAgICAgICAgICAgIHJpZ2h0OiAyMCxcbiAgICAgICAgICAgICAgICBib3R0b206IDEwMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiA1MFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueCB9LFxuICAgICAgICAgICAgeTogZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5Db3VudCB9LFxuICAgICAgICAgICAgdXNlVm9yb25vaTogZmFsc2UsXG4gICAgICAgICAgICBjbGlwRWRnZTogdHJ1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAsXG4gICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZUd1aWRlbGluZTogdHJ1ZSxcbiAgICAgICAgICAgIHhBeGlzOiB7XG4gICAgICAgICAgICAgICAgc2hvd01heE1pbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGlja0Zvcm1hdDogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMudGltZS5mb3JtYXQoJyVtLyVkICVIOiVNJykobmV3IERhdGUoZCkpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByb3RhdGVMYWJlbHMgOiAtNDUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgICAgICB0aWNrRm9ybWF0OiBmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdCgnLC4wZicpKGQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB6b29tOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAvL3NjYWxlRXh0ZW50OiBbMSwgMTBdLFxuICAgICAgICAgICAgICAgIHVzZUZpeGVkRG9tYWluOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1c2VOaWNlU2NhbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGhvcml6b250YWxPZmY6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZlcnRpY2FsT2ZmOiB0cnVlLFxuICAgICAgICAgICAgICAgIHVuem9vbUV2ZW50VHlwZTogJ2RibGNsaWNrLnpvb20nXG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIGRpc3BhdGNoOiB7XG4gICAgICAgICAgICAgICAgc3RhdGVDaGFuZ2U6IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZyhcInN0YXRlQ2hhbmdlXCIpOyB9LFxuICAgICAgICAgICAgICAgIGNoYW5nZVN0YXRlOiBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coXCJjaGFuZ2VTdGF0ZVwiKTsgfSxcbiAgICAgICAgICAgICAgICB0b29sdGlwU2hvdzogZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKFwidG9vbHRpcFNob3dcIik7IH0sXG4gICAgICAgICAgICAgICAgdG9vbHRpcEhpZGU6IGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZyhcInRvb2x0aXBIaWRlXCIpOyB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbXVsdGliYXI6IHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCA6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGUuZGF0YS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRIb3VycygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcjL2V2ZW50cz9maWx0ZXImZGF0ZT0nICsgZGF0ZS50b0lTT1N0cmluZygpICsgJyZmcm9tPScgKyAoXCIwXCIgKyBob3Vycykuc2xpY2UoLTIpICsgJzonICsgKFwiMFwiICsgbWludXRlcykuc2xpY2UoLTIpICsgJyZjYXRlZ29yeT0nICsgZS5kYXRhLmtleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZS5kYXRhLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGUuZGF0YS54KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cblxuYXBwLmNvbnN0YW50KFwiTUVOVVwiLCBbXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIkRhc2hib2FyZFwiLFxuICAgICAgICBcImxpbmtcIiA6IFwiIy9cIlxuXHRcdC8qXCJpdGVtc1wiIDogW1xuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIlVzZXJzXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwidXNlclwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIlxuXHRcdFx0fVxuXHRcdF0qL1xuXHR9LFxuXHR7XG5cdFx0XCJ0aXRsZVwiIDogXCJFdmVudHNcIixcblx0XHRcImxpbmtcIiBcdDogXCIjL2V2ZW50c1wiXG5cdH0sXG5cdC8qe1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMjNcIixcblx0XHRcIml0ZW1zXCIgOiBbXG5cdFx0XHR7XG5cdFx0XHRcdFwidGl0bGVcIiA6IFwiVXNlcnNcIixcblx0XHRcdFx0XCJsaW5rXCIgXHQ6IFwic2V0dGluZ3NcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJNeSBwcm9maWxlXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwicHJvZmlsZVwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCJwcm9maWxlXCJcblx0XHRcdH1cblx0XHRdXG5cblx0fSxcblx0e1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMTIzXCIsXG5cdFx0XCJsaW5rXCIgXHQ6IFwibG9naW5cIlxuXHR9LCovXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIlNldHRpbmdzXCIsXG5cdFx0XCJpdGVtc1wiIDogW1xuICAgICAgICAgICAge1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCIjL3Byb2ZpbGVcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJVc2Vyc1wiLFxuXHRcdFx0XHRcImxpbmtcIiBcdDogXCIvc2V0dGluZ3NcIlxuXHRcdFx0fSxcblx0XHRdXG5cdH1cbl0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2V2ZW50Q29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkaHR0cCwgYXBpKSB7XG5cbiAgICAgICAgJHNjb3BlLmlkID0gJHJvdXRlUGFyYW1zO1xuXG4gICAgICAgICRzY29wZS5nZW8gPSBbXTtcblxuICAgICAgICAkc2NvcGUuYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpXG4gICAgICAgIH1cblxuICAgICAgICBhcGkuZ2V0KCdpZC8nICsgJHJvdXRlUGFyYW1zWydpZCddKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YTtcblxuICAgICAgICAgICAgLy92YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuXG4gICAgICAgICAgICBpZiAoKCRzY29wZS5kYXRhLlNvdXJjZSAhPSB1bmRlZmluZWQgJiYgJHNjb3BlLmRhdGEuVGFyZ2V0ICE9IHVuZGVmaW5lZCkgJiYgXG4gICAgICAgICAgICAgICAgKCRzY29wZS5kYXRhLlNvdXJjZVswXS5JUDQgJiYgJHNjb3BlLmRhdGEuVGFyZ2V0WzBdLklQNCkpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9mcmVlZ2VvaXAubmV0L2pzb24vJyArICRzY29wZS5kYXRhLlRhcmdldFswXS5JUDRbMF0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsndHlwZSddID0gXCJUYXJnZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdlby5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvL3ZhciBsYXRsbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGRhdGEubGF0aXR1ZGUsIGRhdGEubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9ib3VuZHMuZXh0ZW5kKGxhdGxuZyk7XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2ZyZWVnZW9pcC5uZXQvanNvbi8nICsgJHNjb3BlLmRhdGEuU291cmNlWzBdLklQNFswXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJ3R5cGUnXSA9IFwiU291cmNlXCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW8ucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhkYXRhLmxhdGl0dWRlLCBkYXRhLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vYm91bmRzLmV4dGVuZChsYXRsbmcpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgkc2NvcGUuZGF0YS5Tb3VyY2UgPT0gdW5kZWZpbmVkIHx8ICRzY29wZS5kYXRhLlNvdXJjZVswXS5JUDQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vZnJlZWdlb2lwLm5ldC9qc29uLycgKyAkc2NvcGUuZGF0YS5UYXJnZXRbMF0uSVA0WzBdKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsndHlwZSddID0gXCJUYXJnZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdlby5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2ZyZWVnZW9pcC5uZXQvanNvbi8nICsgJHNjb3BlLmRhdGEuU291cmNlWzBdLklQNFswXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJ3R5cGUnXSA9IFwiU291cmNlXCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW8ucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcblxufSk7XG5cbmFwcC5maWx0ZXIoJ2pzb24yaHRtbCcsIGZ1bmN0aW9uKCRzY2UsICRmaWx0ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBcIlwiXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpbnB1dCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXY+XCI7XG5cbiAgICAgICAgICAgIC8vIFRoZSB0dXBsZSBpcyBuZXN0ZWRcbiAgICAgICAgICAgIGlmICgodHlwZW9mIHZhbHVlKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIGtleSkgIT0gJ251bWJlcicgJiYga2V5ICE9IFwiJGRhdGVcIilcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxlbT5cIiArIGtleSArIFwiPC9lbT46IFwiO1xuICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPVxcXCJzdWJcXFwiPlwiICsgJGZpbHRlcignanNvbjJodG1sJykodmFsdWUpICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlb2Yga2V5ICE9ICdudW1iZXInKSAmJiBrZXkgIT0gXCIkZGF0ZVwiKVxuICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArIFwiPGVtPlwiICsga2V5ICsgXCI8L2VtPjogXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgZGF0ZSAoSSBrbm93LCBpdCBpcyBzb29vb28gZGlydHkpXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMTAwMDAwMDAwMDAwMClcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgJGZpbHRlcignZGF0ZScpKHZhbHVlLCd5eXl5L01NL2RkIEg6bW06c3MnKSArIFwiPC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgdmFsdWUgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBcygnaHRtbCcsIGh0bWwpO1xuICAgIH0gICAgIFxufSk7XG5cbi8vIEZpbHRlciB0byBjb252ZXJ0IElERUEgZm9ybWF0IGZyb20gTW9uZ29EQiB0byBzdGFuZGFyZGl6ZWQgSURFQSBmb3JtYXRcbmFwcC5maWx0ZXIoJ2lkZWEnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHJlcyA9IHt9O1xuXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpbnB1dCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKGtleSAhPSAnX2lkJykge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVsnJGRhdGUnXSkge1xuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IG5ldyBEYXRlKHZhbHVlWyckZGF0ZSddKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTkpICsgJ1onO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2V2ZW50c0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9jYXRpb24sIGFwaSkge1xuICAgICRzY29wZS5maWx0ZXIgPSB7XG4gICAgICAgIFwiY2F0ZWdvcnlcIiA6IFwiXCIsICAgIC8vIENhdGVnb3J5XG4gICAgICAgIFwic3JjX2lwXCIgOiBcIlwiLCAgICAgIC8vIFNvdXJjZSBJUFxuICAgICAgICBcInRydF9pcFwiIDogXCJcIiwgICAgICAvLyBUYXJnZXQgSVBcbiAgICAgICAgXCJkZXNjXCIgOiBcIlwiLCAgICAgICAgLy8gRGVzY3JpcHRpb25cbiAgICAgICAgXCJmbG93c19mcm9tXCIgOiBcIlwiLCAgLy8gRmxvd0NvdW50XG4gICAgICAgIFwiZmxvd3NfdG9cIiA6IFwiXCIsICAgIC8vIEZsb3dDb3VudFxuICAgICAgICBcIml0ZW1zXCIgOiAxMDAsICAgICAgLy8gTGltaXQgbnVtYmVyIG9mIGRpc3BsYXllZCBpdGVtc1xuICAgIH07XG4gICAgJHNjb3BlLnF1ZXJ5ID0ge1xuICAgICAgICBcImZyb21cIiA6IFwiXCIsXG4gICAgICAgIFwidG9cIiA6IFwiXCIsXG4gICAgICAgIFwiZGF0ZVwiIDogbmV3IERhdGUoKSxcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiIDogXCJcIixcbiAgICAgICAgXCJjYXRlZ29yeVwiIDogXCJcIixcbiAgICAgICAgXCJsaW1pdFwiIDogMTAwXG4gICAgfVxuXG4gICAgJHNjb3BlLmRhdGEgPSBbXTtcbiAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiO1xuICAgIGNvbnNvbGUubG9nKCRzY29wZS5xdWVyeS5kYXRlKVxuXG4gICAgJHNjb3BlLmxvYWRJdGVtcyA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgICRzY29wZS5sb2FkYnRuID0gXCJMb2FkaW5nLi4uXCI7XG4gICAgICAgIHZhciBmcm9tID0gcXVlcnkuZnJvbS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIgZnJvbV9kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgIGZyb21fZGF0ZS5zZXRIb3Vycyhmcm9tX2RhdGUuZ2V0SG91cnMoKSArIGZyb21bMF0pO1xuICAgICAgICBmcm9tX2RhdGUuc2V0TWludXRlcyhmcm9tWzFdKTtcbiAgICAgICAgXG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2ZpbHRlcicsIHRydWUpO1xuICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdmcm9tJywgcXVlcnkuZnJvbSk7XG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2RhdGUnLCBxdWVyeS5kYXRlKTtcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnbGltaXQnLCBxdWVyeS5saW1pdCk7XG4gICAgICAgIFxuXG4gICAgICAgIGlmIChxdWVyeS50bykge1xuICAgICAgICAgICAgdmFyIHRvID0gcXVlcnkudG8uc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHZhciB0b19kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgICAgICB0b19kYXRlLnNldEhvdXJzKHRvX2RhdGUuZ2V0SG91cnMoKSArIHRvWzBdKTtcbiAgICAgICAgICAgIHRvX2RhdGUuc2V0TWludXRlcyh0b1sxXSk7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCd0bycsIHF1ZXJ5LnRvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0b19kYXRlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHF1ZXJ5LmRlc2NyaXB0aW9uICE9IFwiXCIpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2Rlc2NyaXB0aW9uJywgcXVlcnkuZGVzY3JpcHRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkuZGVzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHF1ZXJ5LmNhdGVnb3J5ICE9IFwiXCIpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2NhdGVnb3J5JywgcXVlcnkuY2F0ZWdvcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkuY2F0ZWdvcnkgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNlbmQgPSB7XG4gICAgICAgICAgICBcImZyb21cIiA6IGZyb21fZGF0ZSxcbiAgICAgICAgICAgIFwidG9cIiA6IHRvX2RhdGUsXG4gICAgICAgICAgICBcImNhdGVnb3J5XCIgOiBxdWVyeS5jYXRlZ29yeSxcbiAgICAgICAgICAgIFwiZGVzY3JpcHRpb25cIiA6IHF1ZXJ5LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgXCJsaW1pdFwiIDogcXVlcnkubGltaXRcbiAgICAgICAgfVxuICAgICAgICBhcGkuZ2V0KCdxdWVyeScsIHNlbmQsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0JHNjb3BlLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRidG4gPSBcIkxvYWRcIlxuXHQgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiOyAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmICgkbG9jYXRpb24uc2VhcmNoKCkuZmlsdGVyKSB7XG4gICAgICAgICRzY29wZS5xdWVyeSA9ICRsb2NhdGlvbi5zZWFyY2goKTtcbiAgICAgICAgY29uc29sZS5sb2coJHNjb3BlLnF1ZXJ5LmRhdGUpXG4gICAgICAgICRzY29wZS5xdWVyeS5kYXRlID0gbmV3IERhdGUoJHNjb3BlLnF1ZXJ5LmRhdGUpO1xuICAgICAgICAkc2NvcGUubG9hZEl0ZW1zKCRzY29wZS5xdWVyeSk7XG4gICAgfSBlbHNlIHtcblxuICAgICAgICBhcGkuZ2V0KFwiMTAwXCIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZXZlbnRzID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLnNyY19pcCAhPSBcIlwiKXtcbiAgICAgICAgICAgIGlmIChcIlNvdXJjZVwiIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJJUDRcIiBpbiBpdGVtLlNvdXJjZVswXSAmJiBpdGVtLlNvdXJjZVswXS5JUDRbMF0udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuc3JjX2lwLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIudHJ0X2lwICE9IFwiXCIpe1xuICAgICAgICAgICAgaWYgKFwiVGFyZ2V0XCIgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChcIklQNFwiIGluIGl0ZW0uVGFyZ2V0WzBdICYmIGl0ZW0uVGFyZ2V0WzBdLklQNFswXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlci50cnRfaXAudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuY2F0ZWdvcnkgIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGl0ZW0uQ2F0ZWdvcnlbMF0udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSkgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLmRlc2MgIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGl0ZW0uRGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuZGVzYy50b0xvd2VyQ2FzZSgpKSA+IC0xKVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuZmxvd3NfZnJvbSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5GbG93Q291bnQgPiBOdW1iZXIoJHNjb3BlLmZpbHRlci5mbG93c19mcm9tKSlcbiAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLmZsb3dzX3RvICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLkZsb3dDb3VudCA8IE51bWJlcigkc2NvcGUuZmlsdGVyLmZsb3dzX3RvKSlcbiAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBsb2dpY3ZhbHVlID0gMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxvZ2ljdmFsdWUgPSBsb2dpY3ZhbHVlICogcmVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb2dpY3ZhbHVlID09IDEgPyB0cnVlIDogZmFsc2U7XG5cbiAgICB9XG5cbn0pO1xuXG5hcHAuZGlyZWN0aXZlKCd2YWxpZGF0ZUhvdXJzJywgZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRvID0gW107XG4gICAgdmFyIGZyb20gPSBbXTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCkge1xuICAgICAgICAgICAgY3RybC4kdmFsaWRhdG9ycy50aW1lID0gZnVuY3Rpb24obW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJzLm5nTW9kZWwgPT0gXCJxdWVyeS5mcm9tXCIgJiYgdmlld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSB2aWV3VmFsdWUuc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0byA9IHZpZXdWYWx1ZS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZyb20pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0bykgXG4gICAgICAgICAgICBpZiAodG8ubGVuZ3RoID09IDIgfHwgZnJvbS5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgIGlmICh0b1swXSA8IGZyb21bMF0gfHwgKHRvWzBdIDw9IGZyb21bMF0gJiYgdG9bMV0gPCBmcm9tWzFdKSB8fFxuICAgICAgICAgICAgICAgICAgICB0b1swXSA8IDAgfHwgdG9bMF0gPiAyMyB8fCB0b1sxXSA8IDAgfHwgdG9bMV0gPiA1OSB8fCBmcm9tWzBdIDwgMCB8fCBmcm9tWzBdID4gMjMgfHwgZnJvbVsxXSA8IDAgfHwgZnJvbVsxXSA+IDU5XG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJhcHAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkbG9jYXRpb24sICRsb2csIHVzZXIpIHtcblx0JHNjb3BlLnRpdGxlID0gXCJMb2dpbiB0byBOZW1lYSBEYXNoYm9hcmRcIjtcblx0JHNjb3BlLmxvZ2luQnRuID0gXCJMb2dpblwiO1xuICAgIFxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbihjcmVkKSB7XG5cdFx0JHNjb3BlLmxvZ2luQnRuID0gXCJBdXRoZW50aWNhdGluZy4uLlwiO1xuICAgICAgICAkc2NvcGUubG9naW5CdG5EaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgdXNlci5hdXRoKGNyZWQpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7ICAgIFxuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3JfbWVzID0gbXNnO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQnRuID0gXCJMb2dpblwiXG4gICAgICAgICAgICAkc2NvcGUubG9naW5CdG5EaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgIH1cblxuXHRcdFxuXHRcdC8qbG9naW5BdXRoLmZldGNoVXNlcih1c2VyKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcblxuXHRcdFx0JGxvZy5pbmZvKGRhdGEpO1xuXG5cdFx0XHRpZiAoZGF0YVtcInN1Y2Nlc3NcIl0gPT0gdHJ1ZSkge1xuXHRcdFx0XHQvLyRsb2cuaW5mbyhkYXRhKTtcdFxuXHRcdFx0XHQkc2NvcGUubG9naW5CdG4gPSBcIlN1Y2Nlc3NcIjtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnbG9nZ2VkSW4nLCB0cnVlKTtcblx0XHRcdFx0bG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2xvZ2dlZEluLnB3Jywgc2hhMjU2X2RpZ2VzdChkYXRhLnBhc3N3b3JkKSk7XHRcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQkbG9nLmVycm9yKFwiZXJyb3IgLSBiYWQgcGFzc3dvcmRcIik7XG5cdFx0XHRcdCRzY29wZS5lcnJvcl9tZXMgPSBcIkJhZCBwYXNzd29yZFwiO1xuXHRcdFx0XHQkc2NvcGUubG9naW5CdG4gPSBcIkxvZ2luXCI7XG5cdFx0XHRcdGxvZ2luQ29ycmVjdCA9IGZhbHNlO1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnbG9nZ2VkSW4nLCBmYWxzZSk7XHRcblx0XHRcdH1cblx0XHR9KTsqL1xufSk7XG5cblxuIiwiYXBwLmNvbnRyb2xsZXIoJ3Byb2ZpbGVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCB1c2VyLCBhcGkpIHtcbiAgICAkc2NvcGUudXNlciA9IHVzZXIuY29uZmlnKCk7XG5cbiAgICAkc2NvcGUuZWRpdFVzZXIgPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgIH1cbn0pXG4iLCJhcHAuc2VydmljZSgnYXBpJywgZnVuY3Rpb24oJGh0dHAsICRsb2csICRtZFRvYXN0LCAkbG9jYWxTdG9yYWdlLCBQSUVDSEFSVCwgQ09ORklHKSB7XG5cblx0dmFyIGFkZHIgPSBDT05GSUdbXCJob3N0XCJdICsgXCI6XCIgKyBDT05GSUdbXCJwb3J0XCJdICsgXCIvXCIgKyBDT05GSUdbXCJ2ZXJzaW9uXCJdICsgXCIvZXZlbnRzL1wiO1xuXG4gICAgdGhpcy5hdXRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgfVxuXG4gICAgdGhpcy5jb25maWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vYmVuZWZpemlvLmxpYmVyb3V0ZXIub3JnOjU1NTUvY29uZmlnJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmFkZHIgPSBkYXRhLmhvc3QgKyAnOicgKyBkYXRhLnBvcnQgKyBkYXRhLmV2ZW50cztcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbJ2NvbmZpZyddID0gZGF0YTtcbiAgICAgICAgICAgIGFsZXJ0KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBpbmZvKSB7XG5cdFx0cmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkdFVFwiLFxuICAgICAgICAgICAgcGFyYW1zIDogcGFyYW1zLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB0aGlzLmF1dGgoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoaW5mbyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0RhdGEgc3VjY2Vzc3VsbHkgbG9hZGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkbG9nLmVycm9yKCdDYW5ub3QgZmV0Y2ggZGF0YScpO1xuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nJylcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5wb3N0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBpbmZvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGFkZHIgKyB1cmwsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRGF0YSBzdWNjZXNzZnVsbHkgbG9hZGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFx0JGxvZy5lcnJvcignQ2Fubm90IGZldGNoIGRhdGEnKTtcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdTb21ldGhpbmcgd2VudCB3cm9uZycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcImVycm9yLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgdGhpcy5wdXQgPSBmdW5jdGlvbih1cmwsIGRhdGEsIGluZm8pIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnB1dChhZGRyICsgdXJsLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0RhdGEgc3VjY2Vzc2Z1bGx5IGxvYWRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcInN1Y2Nlc3MtdG9hc3RcIilcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcdCRsb2cuZXJyb3IoJ0Nhbm5vdCBmZXRjaCBkYXRhJyk7XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnU29tZXRoaW5nIHdlbnQgd3JvbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuXG59KTtcblxuXG4iLCJhcHAuc2VydmljZSgndXNlcicsIGZ1bmN0aW9uKCRsb2NhbFN0b3JhZ2UsICRodHRwLCAkbWRUb2FzdCwgJGxvY2F0aW9uLCBDT05GSUcpe1xuICAgIHZhciBjYWNoZSA9IG51bGw7XG5cbiAgICB2YXIgZGFzaGJvYXJkID0gW107XG5cblx0dmFyIGFkZHIgPSBDT05GSUdbXCJob3N0XCJdICsgXCI6XCIgKyBDT05GSUdbXCJwb3J0XCJdICsgXCIvXCIgKyBDT05GSUdbXCJ2ZXJzaW9uXCJdICsgXCIvdXNlcnMvXCI7XG5cbiAgICB0aGlzLmNvbmZpZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXTtcbiAgICB9XG5cbiAgICB0aGlzLmp3dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGxvY2FsU3RvcmFnZVtcImp3dFwiXTtcbiAgICB9XG5cbiAgICB0aGlzLmF1dGggPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGFkZHIgKyBcImF1dGhcIiwgYW5ndWxhci50b0pzb24odXNlcikpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXSA9IGRhdGFbXCJqd3RcIl07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRPRE86IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb25maWcgYW5kIGp3dCA+PiBkdXBsaWNpdHlcbiAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1wiZGFzaGJvYXJkXCJdO1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXSA9IGRhdGFbXCJzZXR0aW5nc1wiXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cylcbiAgICAgICAgICAgIC8vIExldCBpdCBiZSBoYW5kbGVkIGJ5IGNvbnRyb2xsZXJcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLnB1dCA9IGZ1bmN0aW9uKGRhdGEsIGluZm8pIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIsIFxuICAgICAgICAgICAgbWV0aG9kIDogXCJQVVRcIixcbiAgICAgICAgICAgIGRhdGEgOiBhbmd1bGFyLnRvSnNvbihkYXRhKSxcbiAgICAgICAgICAgIGhlYWRlcnMgOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nIDogJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXNlciBzZXR0aW5ncyB1cGRhdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihtc2csIHN0YXR1cykge1xuICAgICAgICAgICAgXHQkbG9nLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyBzZW5kaW5nIHVzZXIgZGF0YScpO1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gTG9nb3V0IHVzZXJcbiAgICAvLyBSZW1vdmUgSldUIGZyb20gbG9jYWxTdG9yYWdlIGFuZCBkZWxldGUgc2Vzc2lvbiBvbiBzZXJ2ZXJcbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXNlciA9ICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcblxuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgdXJsIDogYWRkciArIFwibG9nb3V0XCIsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdMb2dvdXQgc3VjY2Vzc2Z1bGwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIG1zZykge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdMb2dvdXQgZmFpbGVkIG9uIHNlcnZlciBzaWRlLCBidXQgeW91IGFyZSBsb2dnZWQgb3V0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
