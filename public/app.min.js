function config(e,t,o,n){e.when("/login",{controller:"loginController",templateUrl:"views/login.html"}).when("/",{controller:"homeController",templateUrl:"views/home.html"}).when("/user",{controller:"userController",templateUrl:"views/login.html"}).when("/events",{controller:"eventsController",templateUrl:"views/events.html",reloadOnSearch:!1}).when("/events/:id",{controller:"eventController",templateUrl:"views/event.html"}).when("/settings/profile",{controller:"profileController",templateUrl:"views/profile.html"}).when("/settings/users",{controller:"usersController",templateUrl:"views/users.html"}).otherwise({redirectTo:"/login"}),t.theme("default").primaryPalette("light-blue").accentPalette("orange"),t.theme("success-toast"),t.theme("error-toast"),o.interceptors.push("notAllowedInterceptor"),n.setKeyPrefix("nd-")}config.$inject=["$routeProvider","$mdThemingProvider","$httpProvider","$localStorageProvider"];var app=angular.module("gui",["ngMaterial","ngRoute","ngMessages","nvd3","ngStorage","ngMap","gridster"]);app.config(config),app.filter("nospace",function(){return function(e){return e?e.replace(/ /g,""):""}}),app.run(["user","$localStorage","$location","$rootScope","$log",function(e,t,o,n,r){n.$on("$locationChangeStart",function(e){void 0==t.token&&(r.info("no token found, redirecting to /login"),o.path("/login"))})}]),app.factory("notAllowedInterceptor",["$log","$localStorage","$location","$injector","$q",function(e,t,o,n,r){var i={responseError:function(n){return 401==n.status&&(e.error("You are not allowed to access, redirecting to /login"),delete t.token,o.path("/login")),r.reject(n)}};return i}]),app.constant("CONFIG",{host:"https://benefizio.liberouter.org",port:"5555",version:"v2"}),app.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}),app.constant("CATEGORIES",["any","Recon.Scanning","Attempt.Login","Availability.DoS"]),app.constant("PROTOCOLS",["tcp","dns","udp"]),app.constant("TYPES",["barchart","piechart","top","sum"]),app.constant("PIECHART",{options:{chart:{type:"pieChart",height:375,x:function(e){return e.key[0]},y:function(e){return e.x},showLabels:!0,donut:!0,padAngle:0,cornerRadius:1,transitionDuration:500,labelThreshold:0,legend:{margin:{top:5,right:0,bottom:-15,left:0}},legendPosition:"top",tooltipContent:function(e,t,o,n,r){return console.log(e),console.log(o),console.log(n),console.log(r),"Olalala!"},pie:{dispatch:{elementClick:function(e){var t=new Date;console.log(e),t.setTime(t.getTime()-864e5),t.setHours(0),t.setMinutes(0),window.location="#/events?filter&date="+t.toISOString()+"&from="+(new Date).getHours()+":"+(new Date).getMinutes()+"&category="+e.data.key[0]}},labelType:"percent",labelsOutside:!1}}}}),app.constant("AREA",{options:{chart:{type:"multiBarChart",height:450,margin:{top:30,right:20,bottom:100,left:50},x:function(e){return e.x},y:function(e){return e.selector?Number(e.FlowCount):Number(e.Count)},useVoronoi:!1,clipEdge:!0,duration:100,useInteractiveGuideline:!1,tooltipContent:function(e,t,o,n,r){return"Ha"},xAxis:{showMaxMin:!1,tickFormat:function(e){return d3.time.format("%m/%d %H:%M")(new Date(e))},rotateLabels:-45},yAxis:{showMaxMin:!1,tickFormat:function(e){return d3.format("s")(e)}},multibar:{dispatch:{elementClick:function(e){var t=new Date(e.data.x);console.log(e);var o=t.getHours(),n=t.getMinutes();t.setHours(0),t.setMinutes(0),window.location="#/events?filter&date="+t.toISOString()+"&from="+("0"+o).slice(-2)+":"+("0"+n).slice(-2)+"&category="+e.data.key+"&dir=1"}}}}}}),app.constant("MENU",[{title:"Dashboard",link:"#/"},{title:"Events",link:"#/events"},{title:"Settings",items:[{title:"My profile",link:"#/settings/profile"},{title:"Users",link:"#/settings/users"}]}]),app.controller("eventController",["$scope","$routeParams","$http","api",function(e,t,o,n){e.id=t,e.geo=[],e.back=function(){window.history.back()},n.get("id/"+t.id).success(function(t){e.data=t,void 0!=e.data.Source&&void 0!=e.data.Target&&e.data.Source[0].IP4&&e.data.Target[0].IP4?(o.get("http://freegeoip.net/json/"+e.data.Target[0].IP4[0]).success(function(t){t.type="Target",e.geo.push(t)}),o.get("http://freegeoip.net/json/"+e.data.Source[0].IP4[0]).success(function(t){t.type="Source",e.geo.push(t)})):void 0==e.data.Source||void 0==e.data.Source[0].IP4?o.get("http://freegeoip.net/json/"+e.data.Target[0].IP4[0]).success(function(t){t.type="Target",e.geo.push(t)}):o.get("http://freegeoip.net/json/"+e.data.Source[0].IP4[0]).success(function(t){t.type="Source",e.geo.push(t)})})}]),app.controller("eventsController",["$scope","$http","$location","api",function(e,t,o,n){function r(t){var o=angular.lowercase(t);return function(t){return 0===e.orderBy.indexOf(o)}}e.filter={category:"",src_ip:"",trt_ip:"",desc:"",flows_from:"",flows_to:"",items:100},e.query={from:"",to:"",date:new Date,description:"",category:"",orderby:"DetectTime",dir:1,limit:100},e.orderBy=["DetectTime","Category","Description","FlowCount"],e.searchText="",e.querySearch=function(t){var o=t?e.orderBy.filter(r(t)):[];return o},e.data=[],e.loadbtn="Load",e.nextButton="Load next 100 items",console.log(e.query.date),e.activeFilter=o.search().filter,e.switchDir=function(t){-1==t||t?(e.dirVal="Descending",e.query.dir=-1):(e.dirVal="Ascending",e.query.dir=1)},e.switchDir(o.search().dir),e.loadNext=function(t){if(e.nextButton="Loading...",o.search().filter){var r=angular.copy(e.query);if(r.from=new Date(t),r.dir=1,r.to){var i=r.to.split(":"),a=new Date(r.date);a.setHours(a.getHours()+i[0]),a.setMinutes(i[1])}else var a=null;r.to=a,n.get("query",r,!0).success(function(t){for(item in t)e.data.push(t[item]);e.nextButton="Load next 100 items"}).error(function(t,o){e.nextButton="Load next 100 items"})}else r={to:new Date(t),dir:-1},n.get("query",r,!0).success(function(t){for(item in t)e.data.push(t[item]);e.nextButton="Load next 100 items"}).error(function(t,o){e.nextButton="Load next 100 items"})},e.loadItems=function(t){e.loadbtn="Loading...";var r=t.from.split(":"),i=new Date(t.date);if(i.setHours(i.getHours()+r[0]),i.setMinutes(r[1]),o.search("filter",!0),o.search("from",t.from),o.search("date",t.date),o.search("limit",t.limit),o.search("orderby",t.orderby),o.search("dir",t.dir),t.to){var a=t.to.split(":"),s=new Date(t.date);s.setHours(s.getHours()+a[0]),s.setMinutes(a[1]),o.search("to",t.to)}else var s=null;""!=t.description?o.search("description",t.description):t.description=null,""!=t.category?o.search("category",t.category):t.category=null;var c={from:i,to:s,category:t.category,description:t.description,limit:t.limit,orderby:t.orderby,dir:t.dir};n.get("query",c,!0).success(function(t){e.data=t,e.loadbtn="Load"}).error(function(){e.loadbtn="Load"})},o.search().filter?(e.query=o.search(),e.query.date=new Date(e.query.date),e.loadItems(e.query)):n.get("100").success(function(t){e.data=t}),e.events=function(t){var o=[];""!=e.filter.src_ip&&("Source"in t&&"IP4"in t.Source[0]&&t.Source[0].IP4[0].toLowerCase().indexOf(e.filter.src_ip.toLowerCase())>-1?o.push(1):o.push(0)),""!=e.filter.trt_ip&&("Target"in t&&"IP4"in t.Target[0]&&t.Target[0].IP4[0].toLowerCase().indexOf(e.filter.trt_ip.toLowerCase())>-1?o.push(1):o.push(0)),""!=e.filter.category&&(t.Category[0].toLowerCase().indexOf(e.filter.category.toLowerCase())>-1?o.push(1):o.push(0)),""!=e.filter.desc&&(t.Description.toLowerCase().indexOf(e.filter.desc.toLowerCase())>-1?o.push(1):o.push(0)),""!=e.filter.flows_from&&(t.FlowCount>Number(e.filter.flows_from)?o.push(1):o.push(0)),""!=e.filter.flows_to&&(t.FlowCount<Number(e.filter.flows_to)?o.push(1):o.push(0));for(var n=1,r=0;r<o.length;r++)n*=o[r];return 1==n?!0:!1}}]),app.directive("validateHours",function(){var e=[],t=[];return{require:"ngModel",link:function(o,n,r,i){i.$validators.time=function(o,n){return"query.from"==r.ngModel&&n?t=n.split(":"):n&&(e=n.split(":")),2!=e.length&&2!=t.length||!(e[0]<t[0]||e[0]<=t[0]&&e[1]<t[1]||e[0]<0||e[0]>23||e[1]<0||e[1]>59||t[0]<0||t[0]>23||t[1]<0||t[1]>59)?!0:!1}}}}),app.controller("homeController",["$scope","user","$timeout","$interval","$log","$localStorage","$route",function(e,t,o,n,r,i,a){e.activeGrid=!1,e.refresh_interval=10;var s=void 0;e.refresh_enabled=angular.isDefined(s),e.apis=[],e.openMenu=function(e,t){originatorEv=t,e(t)},e.addItem=function(){e.$broadcast("addItem")},e.enableGrid=function(){console.log("Enable grid"),e.$broadcast("enableGrid"),e.activeGrid=!e.activeGrid},e.$on("requestRedraw",function(e){e.stopPropagation(),o(function(){console.log("request accepted"),window.dispatchEvent(new Event("resize"))},100)}),e.clearCache=function(){r.debug("deleting timestamp"),delete i.timestamp,a.reload()},e.setInterval=function(){angular.isDefined(s)?(n.cancel(s),s=void 0,console.log("broadcast failed")):s=n(function(){console.log("broadcast"),e.$broadcast("refreshData")},1e3*e.refresh_interval),e.refresh_enabled=angular.isDefined(s)}}]),app.controller("box",["$scope","$log","$mdDialog","PROTOCOLS","TYPES","CATEGORIES","PIECHART","AREA","api","user","$mdMedia","$localStorage","$timeout",function(e,t,o,n,r,i,a,s,c,l,u,d,p){function g(t){e.box.config.begintime=function(){console.log(e.box);var o=new Date;return angular.isDefined(t)&&o.setHours(o.getHours()-Number(t)),o.setHours(o.getHours()-e.box.config.period),o}()}function f(){"piechart"==e.box.type||"barchart"==e.box.type?("piechart"==e.box.type&&(e.box.options=a.options),"barchart"==e.box.type&&(e.box.options=angular.copy(s.options)),e.box.config.type=e.box.type,h>300&&c.get("agg",e.box.config,!1,!0).success(function(t){e.box.loading=!1,e.box.data=t,e.$emit("requestRedraw")})):"top"==e.box.type&&h>300?c.get("top",e.box.config,!1,!0).success(function(t){e.box.loading=!1,e.box.data=t}):"sum"==e.box.type&&h>300&&c.get("count",e.box.config,!1,!0).success(function(t){e.box.loading=!1,e.box.data=t})}g(),e.box.loading=!0,e.openMenu=function(e,t){originatorEv=t,e(t)},e.editMode=!1,e.backupModel={},e.protocol=n,e.types=r,e.categories=i,e.edit=function(t){e.editMode=!0,e.backupModel=angular.copy(t),e.$emit("switch-drag")},e.save=function(){e.user(),"piechart"==e.box.type&&(e.box.options=a.options),"barchart"==e.box.type&&(e.box.options=s.options),e.backupModel={},e.box.config.type=e.box.type,e.editMode=!1,g(),e.$emit("switch-drag"),"piechart"==e.box.type||"barchart"==e.box.type?c.get("agg",e.box.config,!0).success(function(t){e.box.loading=!1,e.box.data=t}):"top"==e.box.type?c.get("top",e.box.config,!0).success(function(t){e.box.loading=!1,e.box.data=t}):"sum"==e.box.type&&c.get("count",e.box.config).success(function(t){e.box.loading=!1,e.box.data=t})},e.changeSelector=function(t){angular.forEach(e.box.data,function(e,o){angular.forEach(e.values,function(e,o){e.selector=t})}),e.$emit("requestRedraw")},e.changeSelector(e.box.selector),e.cancel=function(t){e.box=angular.copy(e.backupModel),e.backupModel={},e.editMode=!1,e.$emit("switch-drag")},e.top=function(){g(),c.get("top",e.box.config,!0).success(function(t){console.log(t),e.box.data=t})};var h=(new Date-new Date(d.timestamp))/1e3;isNaN(h)&&(h=310),300>h?e.box.loading=!1:(e.box.loading=!0,console.log("Data is cached, redraw")),e.$on("gridster-item-initialized",function(t){("piechart"==e.box.type||"barchart"==e.box.type)&&p(function(){e.$emit("requestRedraw")},500)}),f(),e.$on("refreshData",function(){h=310,f()}),e.user=function(){for(var o=angular.copy(e.items),n=0;n<o.length;n++)delete o[n].data,delete o[n].options;var r={settings:o};l.put(r).success(function(e){}).error(function(e){t.error(e)})},e.$on("saveUser",function(){e.user()}),e.$on("gridster-item-resized",function(e){p(function(){console.log("request accepted"),window.dispatchEvent(new Event("resize"))},100)}),e.showEdit=function(t,n){e.backupModel=angular.copy(e.box),o.show({controller:"editBoxController",templateUrl:"partials/edit.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0,locals:{box:e.box}}).then(function(t){e.save()},function(){e.box=angular.copy(e.backupModel),e.backupModel={}})}}]),app.controller("grid",["$scope","$timeout","$log","user",function(e,t,o,n){e.opt={outerMargin:!1,columns:8,pushing:!0,rowHeight:170,colWidth:"auto",floating:!0,swapping:!0,mobileBreakPoint:933,draggable:{enabled:!1},resizable:{enabled:!1,handles:["n","e","s","w","se","sw"],stop:function(t,o,n){console.log("resize end"),e.$emit("requestRedraw")}}},e.$on("enableGrid",function(){1==e.opt.resizable.enabled&&e.$broadcast("saveUser"),e.opt.resizable.enabled=!e.opt.resizable.enabled,e.opt.draggable.enabled=!e.opt.draggable.enabled}),e.remove=function(t){e.items.splice(e.items.indexOf(t),1);e.$broadcast("saveUser")},e.items=n.config(),e.$on("addItem",function(){var t={title:"New box",loading:!1,sizeX:1,sizeY:1,content:"",config:{period:0}};e.items.push(t)})}]),app.controller("editBoxController",["$scope","$mdDialog","box","PROTOCOLS","TYPES","CATEGORIES",function(e,t,o,n,r,i){e.box=o,e.backupModel=angular.copy(o),e.categories=i,e.protocols=n,e.types=r,e.saveAndClose=function(){t.hide()},e.answer=function(e){t.hide(e)},e.cancel=function(e){console.log("Cancelling"),t.cancel()},e.changeSelector=function(t){angular.forEach(e.box.data,function(e,o){angular.forEach(e.values,function(e,o){e.selector=t})}),e.$emit("requestRedraw")}}]),app.controller("loginController",["$scope","$location","$log","user",function(e,t,o,n){e.title="Login to Nemea Dashboard",e.loginBtn="Login",e.submit=function(o){e.loginBtn="Authenticating...",e.loginBtnDisabled=!0,n.auth(o).success(function(e){t.path("/")}).error(function(t){e.error_mes=t,e.loginBtn="Login",e.loginBtnDisabled=!1})}}]),app.controller("profileController",["$scope","user","api",function(e,t,o){e.user=t.config(),e.editUser=function(e){console.log(e)}}]),app.controller("usersController",["$scope","api","user","$mdDialog",function(e,t,o,n){o.get(!0).success(function(t){e.users=t}),e.deleteUser=function(t){console.log(t),o["delete"](t).success(function(t){console.log(t),o.get(!0).success(function(t){e.users=t})})},e.addUser=function(t){e.addUserBox=!0,n.show({controller:"addUserController",templateUrl:"partials/addUser.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,fullscreen:!0}).then(function(t){console.log(t),o.post(t).success(function(t){console.log(t),o.get(!0).success(function(t){e.users=t})})},function(){})}}]),app.controller("addUserController",["$scope","$mdDialog",function(e,t){e.user={username:"",name:"",surname:"",password:"",settings:[]},e.saveAndClose=function(e){console.log(e),t.hide(e)},e.cancel=function(e){console.log("Cancelling"),t.cancel()}}]),app.directive("gridsterDynamicHeight",["$timeout",function(e){function t(e,t,o){e.$watch(function(){return t[0].scrollHeight},function(t,o){var n=270,r=n*e.item.sizeY;if(t>r){var i=Math.floor(t/n);e.item.sizeY=i}})}var o={scope:{item:"="},link:t,restrict:"A"};return o}]),app.filter("idea",function(){return function(e){var t={};return angular.forEach(e,function(e,o){"_id"!=o&&(e.$date?t[o]=new Date(e.$date).toISOString().slice(0,19)+"Z":t[o]=e)}),t}}),app.filter("json2html",["$sce","$filter",function(e,t){return function(o){var n="";return angular.forEach(o,function(e,o){"_id"!=o&&(n+="<div>","object"==typeof e?("number"!=typeof o&&"$date"!=o&&(n=n+"<em>"+o+"</em>: "),n=n+'<div class="sub">'+t("json2html")(e)+"</div>"):("number"!=typeof o&&"$date"!=o&&(n=n+"<em>"+o+"</em>: "),n=e>1e12?n+"<span>"+t("date")(e,"yyyy/MM/dd H:mm:ss")+"</span>":n+"<span>"+e+"</span>"),n+="</div>")}),e.trustAs("html",n)}}]),app.service("api",["$http","$log","$mdToast","$localStorage","PIECHART","CONFIG",function(e,t,o,n,r,i){var a=i.host+":"+i.port+"/"+i.version+"/events/";this.auth=function(){return n.token},this.config=function(){e.get("http://benefizio.liberouter.org:5555/config").success(function(e){this.addr=e.host+":"+e.port+e.events,n.config=e,alert(e)})},this.get=function(r,i,s,c){return e({url:a+r,method:"GET",params:i,headers:{Authorization:this.auth()}}).success(function(e){return s&&o.show(o.simple().textContent("Data successully loaded").position("top right").hideDelay(3e3).theme("success-toast")),c&&(n.timestamp=new Date),e}).error(function(){t.error("Cannot fetch data"),o.show(o.simple().textContent("Cannot load data").position("top right").hideDelay(3e3).theme("error-toast"))})},this.post=function(n,r,i){return e.post(a+n,JSON.stringify(r)).success(function(e){return i&&o.show(o.simple().textContent("Data successfully loaded").position("top right").hideDelay(3e3).theme("success-toast")),e}).error(function(){t.error("Cannot fetch data"),o.show(o.simple().textContent("Cannot fetch data").position("top right").hideDelay(3e3).theme("error-toast"))})},this.put=function(n,r,i){return e.put(a+n,JSON.stringify(r)).success(function(e){return i&&o.show(o.simple().textContent("Data successfully loaded").position("top right").hideDelay(3e3).theme("success-toast")),e}).error(function(){t.error("Cannot fetch data"),o.show(o.simple().textContent("Cannot fetch data").position("top right").hideDelay(3e3).theme("error-toast"))})}}]),app.directive("sidebarMenu",function(){return{scope:{section:"="},templateUrl:"partials/sidebar-menu.html",controller:["$scope","$mdSidenav","$location","MENU","user",function(e,t,o,n,r){e.menu=n,e.isActive=function(e){return"#"+o.path()==e},e.changeMode=function(){e.$emit("reqChangeMode")},e.enable=!0,e.toggleItem=function(){e.toggleBtn="toggled"},e.closeLeft=function(){t("left").toggle()},e.logout=function(){r.logout()}}]}}),app.directive("topbarMenu",function(){return{scope:{section:"="},templateUrl:"partials/topbar-menu.html",controller:["$scope","$mdSidenav",function(e,t){e.toggleLeft=function(){t("left").toggle()}}]}}),app.directive("boxes",function(){return{scope:{section:"="},templateUrl:"partials/boxes.html"}}),app.service("user",["$localStorage","$http","$mdToast","$location","CONFIG",function(e,t,o,n,r){var i=r.host+":"+r.port+"/"+r.version+"/users/";this.config=function(){return e.dashboard},this.jwt=function(){return e.jwt},this.auth=function(o){return console.log(i),t.post(i+"auth",angular.toJson(o)).success(function(t){e.token=t.jwt,delete e.dashboard,e.dashboard=t.settings}).error(function(e,t){return console.log(e),console.log(t),e})},this.put=function(n,r){return t({url:i,method:"PUT",data:angular.toJson(n),headers:{Authorization:e.token}}).success(function(e){return r&&o.show(o.simple().textContent("User settings updated").position("top right").hideDelay(3e3).theme("success-toast")),e}).error(function(e,t){$log.error("Something went wrong sending user data"),o.show(o.simple().textContent("Something went wrong").position("top right").hideDelay(3e3).theme("error-toast"))})},this.logout=function(){e.token;return t({url:i+"logout",method:"DELETE",headers:{Authorization:e.token}}).success(function(t){n.path("/login"),delete e.token,delete e.dashboard,delete e.timestamp,o.show(o.simple().textContent("Logout successfull").position("top right").hideDelay(3e3))}).error(function(t,r){n.path("/login"),delete e.token,delete e.dashboard,delete e.timestamp,o.show(o.simple().textContent("Logout failed on server side, but you are logged out").position("top right").hideDelay(3e3))})},this.get=function(n){var r=e.token;return n?t({url:i,method:"GET",headers:{Authorization:r}}).success(function(e){return e}).error(function(e,t){o.show(o.simplet().textContent("Cannot fetch users from database").position("top right").hideDelay(3e3).theme("error-toast"))}):void 0},this.post=function(n){var r=e.token;return t({url:i,method:"POST",data:angular.toJson(n),headers:{Authorization:r}}).success(function(e){return e}).error(function(e,t){o.show(o.simplet().textContent("Cannot create user").position("top right").hideDelay(3e3).theme("error-toast"))})},this["delete"]=function(n){var r=e.token;return console.log(n),t({url:i,method:"DELETE",params:{userId:n},headers:{Authorization:r}}).success(function(e){return e}).error(function(e,t){o.show(o.simplet().textContent("Cannot delete user").position("top right").hideDelay(3e3).theme("error-toast"))})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImpzL2FwcC5taW4uanMiLCJjb25maWcuanMiLCJjb25zdGFudHMuanMiLCJjb250cm9sbGVycy9ldmVudENvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9ldmVudHNDb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvaG9tZUNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9sb2dpbkNvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy9wcm9maWxlQ29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3VzZXJzQ29udHJvbGxlci5qcyIsImRpcmVjdGl2ZXMvZ3JpZHN0ZXJEeW5hbWljSGVpZ2h0LmpzIiwiZmlsdGVycy9pZGVhLmpzIiwiZmlsdGVycy9qc29uMmh0bWwuanMiLCJzZXJ2aWNlcy9hcGkuanMiLCJzZXJ2aWNlcy9tZW51LmpzIiwic2VydmljZXMvdXNlci5qcyJdLCJuYW1lcyI6WyJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCIkbG9jYWxTdG9yYWdlUHJvdmlkZXIiLCJ3aGVuIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwicmVsb2FkT25TZWFyY2giLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImFjY2VudFBhbGV0dGUiLCJpbnRlcmNlcHRvcnMiLCJwdXNoIiwic2V0S2V5UHJlZml4IiwiJGluamVjdCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmaWx0ZXIiLCJ2YWx1ZSIsInJlcGxhY2UiLCJydW4iLCJ1c2VyIiwiJGxvY2FsU3RvcmFnZSIsIiRsb2NhdGlvbiIsIiRyb290U2NvcGUiLCIkbG9nIiwiJG9uIiwiZXZlbnQiLCJ1bmRlZmluZWQiLCJpbmZvIiwicGF0aCIsImZhY3RvcnkiLCIkaW5qZWN0b3IiLCIkcSIsIm5vdEFsbG93ZWRJbnRlcmNlcHRvciIsInJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZSIsInN0YXR1cyIsImVycm9yIiwicmVqZWN0IiwiY29uc3RhbnQiLCJob3N0IiwicG9ydCIsInZlcnNpb24iLCJsb2dpblN1Y2Nlc3MiLCJsb2dpbkZhaWxlZCIsImxvZ291dFN1Y2Nlc3MiLCJzZXNzaW9uVGltZW91dCIsIm5vdEF1dGhlbnRpY2F0ZWQiLCJub3RBdXRob3JpemVkIiwib3B0aW9ucyIsImNoYXJ0IiwidHlwZSIsImhlaWdodCIsIngiLCJkIiwia2V5IiwieSIsInNob3dMYWJlbHMiLCJkb251dCIsInBhZEFuZ2xlIiwiY29ybmVyUmFkaXVzIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwibGFiZWxUaHJlc2hvbGQiLCJsZWdlbmQiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJsZWdlbmRQb3NpdGlvbiIsInRvb2x0aXBDb250ZW50IiwiZSIsImdyYXBoIiwiY29uc29sZSIsImxvZyIsInBpZSIsImRpc3BhdGNoIiwiZWxlbWVudENsaWNrIiwiZGF0ZSIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInNldEhvdXJzIiwic2V0TWludXRlcyIsIndpbmRvdyIsImxvY2F0aW9uIiwidG9JU09TdHJpbmciLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJkYXRhIiwibGFiZWxUeXBlIiwibGFiZWxzT3V0c2lkZSIsInNlbGVjdG9yIiwiTnVtYmVyIiwiRmxvd0NvdW50IiwiQ291bnQiLCJ1c2VWb3Jvbm9pIiwiY2xpcEVkZ2UiLCJkdXJhdGlvbiIsInVzZUludGVyYWN0aXZlR3VpZGVsaW5lIiwieEF4aXMiLCJzaG93TWF4TWluIiwidGlja0Zvcm1hdCIsImQzIiwidGltZSIsImZvcm1hdCIsInJvdGF0ZUxhYmVscyIsInlBeGlzIiwibXVsdGliYXIiLCJob3VycyIsIm1pbnV0ZXMiLCJzbGljZSIsInRpdGxlIiwibGluayIsIml0ZW1zIiwiJHNjb3BlIiwiJHJvdXRlUGFyYW1zIiwiJGh0dHAiLCJhcGkiLCJpZCIsImdlbyIsImJhY2siLCJoaXN0b3J5IiwiZ2V0Iiwic3VjY2VzcyIsIlNvdXJjZSIsIlRhcmdldCIsIklQNCIsImNyZWF0ZUZpbHRlckZvciIsInF1ZXJ5IiwibG93ZXJjYXNlUXVlcnkiLCJsb3dlcmNhc2UiLCJzdGF0ZSIsIm9yZGVyQnkiLCJpbmRleE9mIiwiY2F0ZWdvcnkiLCJzcmNfaXAiLCJ0cnRfaXAiLCJkZXNjIiwiZmxvd3NfZnJvbSIsImZsb3dzX3RvIiwiZnJvbSIsInRvIiwiZGVzY3JpcHRpb24iLCJvcmRlcmJ5IiwiZGlyIiwibGltaXQiLCJzZWFyY2hUZXh0IiwicXVlcnlTZWFyY2giLCJyZXN1bHRzIiwibG9hZGJ0biIsIm5leHRCdXR0b24iLCJhY3RpdmVGaWx0ZXIiLCJzZWFyY2giLCJzd2l0Y2hEaXIiLCJ2YWwiLCJkaXJWYWwiLCJsb2FkTmV4dCIsImNvcHkiLCJzcGxpdCIsInRvX2RhdGUiLCJpdGVtIiwiZXJyIiwibXNnIiwibG9hZEl0ZW1zIiwiZnJvbV9kYXRlIiwic2VuZCIsImV2ZW50cyIsInJlcyIsInRvTG93ZXJDYXNlIiwiQ2F0ZWdvcnkiLCJEZXNjcmlwdGlvbiIsImxvZ2ljdmFsdWUiLCJpIiwibGVuZ3RoIiwiZGlyZWN0aXZlIiwicmVxdWlyZSIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwiY3RybCIsIiR2YWxpZGF0b3JzIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsIm5nTW9kZWwiLCIkdGltZW91dCIsIiRpbnRlcnZhbCIsIiRyb3V0ZSIsImFjdGl2ZUdyaWQiLCJyZWZyZXNoX2ludGVydmFsIiwicmVmcmVzaCIsInJlZnJlc2hfZW5hYmxlZCIsImlzRGVmaW5lZCIsImFwaXMiLCJvcGVuTWVudSIsIiRtZE9wZW5NZW51IiwiZXYiLCJvcmlnaW5hdG9yRXYiLCJhZGRJdGVtIiwiJGJyb2FkY2FzdCIsImVuYWJsZUdyaWQiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJjbGVhckNhY2hlIiwiZGVidWciLCJyZWxvYWQiLCJzZXRJbnRlcnZhbCIsImNhbmNlbCIsIiRtZERpYWxvZyIsIlBST1RPQ09MUyIsIlRZUEVTIiwiQ0FURUdPUklFUyIsIlBJRUNIQVJUIiwiQVJFQSIsIiRtZE1lZGlhIiwidGltZVNoaWZ0Iiwib2Zmc2V0IiwiYm94IiwiYmVnaW50aW1lIiwibm93IiwicGVyaW9kIiwiZ2V0RGF0YSIsImNhY2hlX3RpbWUiLCJsb2FkaW5nIiwiJGVtaXQiLCJlZGl0TW9kZSIsImJhY2t1cE1vZGVsIiwicHJvdG9jb2wiLCJ0eXBlcyIsImNhdGVnb3JpZXMiLCJlZGl0Iiwic2F2ZSIsImNoYW5nZVNlbGVjdG9yIiwic2VsIiwiZm9yRWFjaCIsInZhbHVlcyIsImsiLCJpc05hTiIsInNldHRpbmdzIiwicHV0IiwiZ3JpZHN0ZXIiLCJzaG93RWRpdCIsInNob3ciLCJwYXJlbnQiLCJkb2N1bWVudCIsImJvZHkiLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJmdWxsc2NyZWVuIiwibG9jYWxzIiwidGhlbiIsImFuc3dlciIsIm9wdCIsIm91dGVyTWFyZ2luIiwiY29sdW1ucyIsInB1c2hpbmciLCJyb3dIZWlnaHQiLCJjb2xXaWR0aCIsImZsb2F0aW5nIiwic3dhcHBpbmciLCJtb2JpbGVCcmVha1BvaW50IiwiZHJhZ2dhYmxlIiwiZW5hYmxlZCIsInJlc2l6YWJsZSIsImhhbmRsZXMiLCJzdG9wIiwiJGVsZW1lbnQiLCJ3aWRnZXQiLCJyZW1vdmUiLCJzcGxpY2UiLCJzaXplWCIsInNpemVZIiwiY29udGVudCIsInByb3RvY29scyIsInNhdmVBbmRDbG9zZSIsImhpZGUiLCJsb2dpbkJ0biIsInN1Ym1pdCIsImNyZWQiLCJsb2dpbkJ0bkRpc2FibGVkIiwiYXV0aCIsImVycm9yX21lcyIsImVkaXRVc2VyIiwidXNlcnMiLCJkZWxldGVVc2VyIiwidXNlcl9pZCIsImFkZFVzZXIiLCJhZGRVc2VyQm94IiwicG9zdCIsInVzZXJuYW1lIiwibmFtZSIsInN1cm5hbWUiLCJwYXNzd29yZCIsIiR3YXRjaCIsInNjcm9sbEhlaWdodCIsIm5ld1ZhbCIsIm9sZFZhbCIsInJvd0hlaWdodE9wdGlvbiIsImRpdiIsIk1hdGgiLCJmbG9vciIsInJlc3RyaWN0IiwiaW5wdXQiLCIkc2NlIiwiJGZpbHRlciIsImh0bWwiLCJ0cnVzdEFzIiwic2VydmljZSIsIiRtZFRvYXN0IiwiQ09ORklHIiwiYWRkciIsInRoaXMiLCJhbGVydCIsInVybCIsInBhcmFtcyIsImNhY2hlIiwibWV0aG9kIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNlY3Rpb24iLCIkbWRTaWRlbmF2IiwiTUVOVSIsIm1lbnUiLCJpc0FjdGl2ZSIsImN1cnJlbnQiLCJjaGFuZ2VNb2RlIiwiZW5hYmxlIiwidG9nZ2xlSXRlbSIsInRvZ2dsZUJ0biIsImNsb3NlTGVmdCIsInRvZ2dsZSIsImxvZ291dCIsInRvZ2dsZUxlZnQiLCJqd3QiLCJ0b0pzb24iLCJhbGx1c2VycyIsInNpbXBsZXQiLCJ1c2VyRGF0YSIsInVzZXJJZCJdLCJtYXBwaW5ncyI6IkFBSUEsUUFBQUEsUUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUgsRUFDQUksS0FBQSxVQUNBQyxXQUFBLGtCQUNBQyxZQUFBLHFCQUVBRixLQUFBLEtBQ0FDLFdBQUEsaUJBQ0FDLFlBQUEsb0JBRUFGLEtBQUEsU0FDQUMsV0FBQSxpQkFDQUMsWUFBQSxxQkFFQUYsS0FBQSxXQUNBQyxXQUFBLG1CQUNBQyxZQUFBLG9CQUNBQyxnQkFBQSxJQUVBSCxLQUFBLGVBQ0FDLFdBQUEsa0JBQ0FDLFlBQUEscUJBRUFGLEtBQUEscUJBQ0FDLFdBQUEsb0JBQ0FDLFlBQUEsdUJBRUFGLEtBQUEsbUJBQ0FDLFdBQUEsa0JBQ0FDLFlBQUEscUJBRUFFLFdBQ0FDLFdBQUEsV0FHQVIsRUFBQVMsTUFBQSxXQUFBQyxlQUFBLGNBQUFDLGNBQUEsVUFFQVgsRUFBQVMsTUFBQSxpQkFDQVQsRUFBQVMsTUFBQSxlQUVBUixFQUFBVyxhQUFB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M1MsS0FHQXdHLFFBQUEsU0FBQW5DLEdBQ0EsTUFBQUEsS0FFQXBELE1BQUEsU0FBQUEsRUFBQThILEdBQ0FrSixFQUFBbEUsS0FDQWtFLEVBQ0FrQyxVQUNBdEIsWUFBQSxzQkFDQUMsU0FBQSxhQUNBQyxVQUFBLEtBQ0E3VCxNQUFBIiwiZmlsZSI6ImpzL2FwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2d1aScsIFsnbmdNYXRlcmlhbCcsICduZ1JvdXRlJywgJ25nTWVzc2FnZXMnLCAnbnZkMycsICduZ1N0b3JhZ2UnLCAnbmdNYXAnLCAnZ3JpZHN0ZXInXSk7XG5cbmFwcC5jb25maWcoY29uZmlnKTtcblxuZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyLCAkbWRUaGVtaW5nUHJvdmlkZXIsICRodHRwUHJvdmlkZXIsICRsb2NhbFN0b3JhZ2VQcm92aWRlcikge1xuXHQkcm91dGVQcm92aWRlclxuXHRcdC53aGVuKCcvbG9naW4nLCB7XG5cdFx0XHRjb250cm9sbGVyOiAnbG9naW5Db250cm9sbGVyJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW4uaHRtbCcsXG5cdFx0fSlcblx0XHQud2hlbignLycsIHtcblx0XHRcdGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlcicsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2hvbWUuaHRtbCcsXG5cdFx0fSlcblx0XHQud2hlbignL3VzZXInLCB7XG5cdFx0XHRjb250cm9sbGVyOiAndXNlckNvbnRyb2xsZXInLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9sb2dpbi5odG1sJyxcblx0XHR9KVxuICAgICAgICAud2hlbignL2V2ZW50cycsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAnZXZlbnRzQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICd2aWV3cy9ldmVudHMuaHRtbCcsXG4gICAgICAgICAgICByZWxvYWRPblNlYXJjaCA6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvZXZlbnRzLzppZCcsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdldmVudENvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvZXZlbnQuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICAgLndoZW4oJy9zZXR0aW5ncy9wcm9maWxlJywge1xuICAgICAgICAgICAgY29udHJvbGxlciA6ICdwcm9maWxlQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICd2aWV3cy9wcm9maWxlLmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvc2V0dGluZ3MvdXNlcnMnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ3VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6ICd2aWV3cy91c2Vycy5odG1sJ1xuICAgICAgICB9KVxuXHRcdC5vdGhlcndpc2Uoe1xuXHRcdFx0cmVkaXJlY3RUbzogJy9sb2dpbidcblx0XHR9KTtcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpLnByaW1hcnlQYWxldHRlKCdsaWdodC1ibHVlJykuYWNjZW50UGFsZXR0ZSgnb3JhbmdlJyk7XG5cbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ3N1Y2Nlc3MtdG9hc3QnKTtcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2Vycm9yLXRvYXN0Jyk7XG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdub3RBbGxvd2VkSW50ZXJjZXB0b3InKTtcbiAgICAkbG9jYWxTdG9yYWdlUHJvdmlkZXJcbiAgICAgICAgLnNldEtleVByZWZpeCgnbmQtJyk7XG5cdC8vIGxvY2FsU3RvcmFnZVNlcnZpY2VQcm92aWRlclxuXHQvLyBcdC5zZXRQcmVmaXgoJ25lbWVhLWRhc2hib2FyZCcpXG5cdC8vIFx0Ly9QUk9EVUNUSU9OXG5cdC8vIFx0Ly8uc2V0U3RvcmFnZUNvb2tpZURvbWFpbih3aW5kb3cubG9jYXRpb24pXG5cdC8vIFx0Ly9ERVZcblx0Ly8gXHQuc2V0U3RvcmFnZUNvb2tpZURvbWFpbignJylcblx0Ly8gXHQ7XG5cbi8vXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG59O1xuXG4vL3Rha2UgYWxsIHdoaXRlc3BhY2Ugb3V0IG9mIHN0cmluZ1xuYXBwLmZpbHRlcignbm9zcGFjZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICghdmFsdWUpID8gJycgOiB2YWx1ZS5yZXBsYWNlKC8gL2csICcnKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbi8vIEFsd2F5cyBjaGVjayBmb3IgYSBKV1RcbmFwcC5ydW4oZnVuY3Rpb24odXNlciwgJGxvY2FsU3RvcmFnZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkbG9nKSB7XG5cdCRyb290U2NvcGUuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKCRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbyhcIm5vIHRva2VuIGZvdW5kLCByZWRpcmVjdGluZyB0byAvbG9naW5cIilcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbi8vIEhUVFAgaW50ZXJjZXB0b3IgaW5qZWN0ZWQgaW4gY29uZmlnXG5hcHAuZmFjdG9yeSgnbm90QWxsb3dlZEludGVyY2VwdG9yJywgZnVuY3Rpb24oJGxvZywgJGxvY2FsU3RvcmFnZSwgJGxvY2F0aW9uLCAkaW5qZWN0b3IsICRxKSB7XG4gICAgdmFyIG5vdEFsbG93ZWRJbnRlcmNlcHRvciA9IHtcbiAgICAgICAgLy8gSW50ZXJjZXB0ICRodHRwIGVycm9yc1xuICAgICAgICByZXNwb25zZUVycm9yIDogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciA0MDEgZXJyb3JcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcignWW91IGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MsIHJlZGlyZWN0aW5nIHRvIC9sb2dpbicpO1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBleGlzaXRpbmcgSldUIGZyb20gbG9jYWxTdG9yYWdlIFxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW5cbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gcHJvbWlzZSBzbyB3ZSBjYW4gaGFuZGxlIHRoZSBlcnJvciBmdXJ0aGVyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90QWxsb3dlZEludGVyY2VwdG9yO1xufSlcbiIsIlxuY29uZmlnLiRpbmplY3QgPSBbXCIkcm91dGVQcm92aWRlclwiLCBcIiRtZFRoZW1pbmdQcm92aWRlclwiLCBcIiRodHRwUHJvdmlkZXJcIiwgXCIkbG9jYWxTdG9yYWdlUHJvdmlkZXJcIl07dmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdndWknLCBbJ25nTWF0ZXJpYWwnLCAnbmdSb3V0ZScsICduZ01lc3NhZ2VzJywgJ252ZDMnLCAnbmdTdG9yYWdlJywgJ25nTWFwJywgJ2dyaWRzdGVyJ10pO1xuXG5hcHAuY29uZmlnKGNvbmZpZyk7XG5cbmZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAkbG9jYWxTdG9yYWdlUHJvdmlkZXIpIHtcblx0JHJvdXRlUHJvdmlkZXJcblx0XHQud2hlbignL2xvZ2luJywge1xuXHRcdFx0Y29udHJvbGxlcjogJ2xvZ2luQ29udHJvbGxlcicsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2xvZ2luLmh0bWwnLFxuXHRcdH0pXG5cdFx0LndoZW4oJy8nLCB7XG5cdFx0XHRjb250cm9sbGVyOiAnaG9tZUNvbnRyb2xsZXInLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9ob21lLmh0bWwnLFxuXHRcdH0pXG5cdFx0LndoZW4oJy91c2VyJywge1xuXHRcdFx0Y29udHJvbGxlcjogJ3VzZXJDb250cm9sbGVyJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW4uaHRtbCcsXG5cdFx0fSlcbiAgICAgICAgLndoZW4oJy9ldmVudHMnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyIDogJ2V2ZW50c0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvZXZlbnRzLmh0bWwnLFxuICAgICAgICAgICAgcmVsb2FkT25TZWFyY2ggOiBmYWxzZVxuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2V2ZW50cy86aWQnLCB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZXZlbnRDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogJ3ZpZXdzL2V2ZW50Lmh0bWwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvc2V0dGluZ3MvcHJvZmlsZScsIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiAncHJvZmlsZUNvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvcHJvZmlsZS5odG1sJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3NldHRpbmdzL3VzZXJzJywge1xuICAgICAgICAgICAgY29udHJvbGxlciA6ICd1c2Vyc0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiAndmlld3MvdXNlcnMuaHRtbCdcbiAgICAgICAgfSlcblx0XHQub3RoZXJ3aXNlKHtcblx0XHRcdHJlZGlyZWN0VG86ICcvbG9naW4nXG5cdFx0fSk7XG5cbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKS5wcmltYXJ5UGFsZXR0ZSgnbGlnaHQtYmx1ZScpLmFjY2VudFBhbGV0dGUoJ29yYW5nZScpO1xuXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdzdWNjZXNzLXRvYXN0Jyk7XG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdlcnJvci10b2FzdCcpO1xuXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnbm90QWxsb3dlZEludGVyY2VwdG9yJyk7XG4gICAgJGxvY2FsU3RvcmFnZVByb3ZpZGVyXG4gICAgICAgIC5zZXRLZXlQcmVmaXgoJ25kLScpO1xuXHQvLyBsb2NhbFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXJcblx0Ly8gXHQuc2V0UHJlZml4KCduZW1lYS1kYXNoYm9hcmQnKVxuXHQvLyBcdC8vUFJPRFVDVElPTlxuXHQvLyBcdC8vLnNldFN0b3JhZ2VDb29raWVEb21haW4od2luZG93LmxvY2F0aW9uKVxuXHQvLyBcdC8vREVWXG5cdC8vIFx0LnNldFN0b3JhZ2VDb29raWVEb21haW4oJycpXG5cdC8vIFx0O1xuXG4vL1x0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xufTtcblxuLy90YWtlIGFsbCB3aGl0ZXNwYWNlIG91dCBvZiBzdHJpbmdcbmFwcC5maWx0ZXIoJ25vc3BhY2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAoIXZhbHVlKSA/ICcnIDogdmFsdWUucmVwbGFjZSgvIC9nLCAnJyk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4vLyBBbHdheXMgY2hlY2sgZm9yIGEgSldUXG5hcHAucnVuKFtcInVzZXJcIiwgXCIkbG9jYWxTdG9yYWdlXCIsIFwiJGxvY2F0aW9uXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRsb2dcIiwgZnVuY3Rpb24odXNlciwgJGxvY2FsU3RvcmFnZSwgJGxvY2F0aW9uLCAkcm9vdFNjb3BlLCAkbG9nKSB7XG5cdCRyb290U2NvcGUuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKCRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICRsb2cuaW5mbyhcIm5vIHRva2VuIGZvdW5kLCByZWRpcmVjdGluZyB0byAvbG9naW5cIilcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICB9XG4gICAgfSlcbn1dKVxuXG4vLyBIVFRQIGludGVyY2VwdG9yIGluamVjdGVkIGluIGNvbmZpZ1xuYXBwLmZhY3RvcnkoJ25vdEFsbG93ZWRJbnRlcmNlcHRvcicsIFtcIiRsb2dcIiwgXCIkbG9jYWxTdG9yYWdlXCIsIFwiJGxvY2F0aW9uXCIsIFwiJGluamVjdG9yXCIsIFwiJHFcIiwgZnVuY3Rpb24oJGxvZywgJGxvY2FsU3RvcmFnZSwgJGxvY2F0aW9uLCAkaW5qZWN0b3IsICRxKSB7XG4gICAgdmFyIG5vdEFsbG93ZWRJbnRlcmNlcHRvciA9IHtcbiAgICAgICAgLy8gSW50ZXJjZXB0ICRodHRwIGVycm9yc1xuICAgICAgICByZXNwb25zZUVycm9yIDogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciA0MDEgZXJyb3JcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gNDAxKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcignWW91IGFyZSBub3QgYWxsb3dlZCB0byBhY2Nlc3MsIHJlZGlyZWN0aW5nIHRvIC9sb2dpbicpO1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBleGlzaXRpbmcgSldUIGZyb20gbG9jYWxTdG9yYWdlIFxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gbG9naW5cbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gcHJvbWlzZSBzbyB3ZSBjYW4gaGFuZGxlIHRoZSBlcnJvciBmdXJ0aGVyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90QWxsb3dlZEludGVyY2VwdG9yO1xufV0pXG5cbmFwcC5jb25zdGFudCgnQ09ORklHJywge1xuICAgIFwiaG9zdFwiIDogXCJodHRwczovL2JlbmVmaXppby5saWJlcm91dGVyLm9yZ1wiLFxuICAgIFwicG9ydFwiIDogXCI1NTU1XCIsXG4gICAgXCJ2ZXJzaW9uXCIgOiBcInYyXCJcbn0pO1xuXG5hcHAuY29uc3RhbnQoJ0FVVEhfRVZFTlRTJywge1xuICBsb2dpblN1Y2Nlc3M6ICdhdXRoLWxvZ2luLXN1Y2Nlc3MnLFxuICBsb2dpbkZhaWxlZDogJ2F1dGgtbG9naW4tZmFpbGVkJyxcbiAgbG9nb3V0U3VjY2VzczogJ2F1dGgtbG9nb3V0LXN1Y2Nlc3MnLFxuICBzZXNzaW9uVGltZW91dDogJ2F1dGgtc2Vzc2lvbi10aW1lb3V0JyxcbiAgbm90QXV0aGVudGljYXRlZDogJ2F1dGgtbm90LWF1dGhlbnRpY2F0ZWQnLFxuICBub3RBdXRob3JpemVkOiAnYXV0aC1ub3QtYXV0aG9yaXplZCdcbn0pO1xuXG5hcHAuY29uc3RhbnQoJ0NBVEVHT1JJRVMnLCBbIFwiYW55XCIsIFwiUmVjb24uU2Nhbm5pbmdcIiwgXCJBdHRlbXB0LkxvZ2luXCIsIFwiQXZhaWxhYmlsaXR5LkRvU1wiIF0pO1xuYXBwLmNvbnN0YW50KCdQUk9UT0NPTFMnLCBbIFwidGNwXCIsIFwiZG5zXCIsIFwidWRwXCIgXSk7XG5hcHAuY29uc3RhbnQoJ1RZUEVTJywgW1wiYmFyY2hhcnRcIiwgXCJwaWVjaGFydFwiLCBcInRvcFwiLCBcInN1bVwiXSlcblxuYXBwLmNvbnN0YW50KCdQSUVDSEFSVCcsIHsgXG4gICAgb3B0aW9uczoge1xuICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgdHlwZTogJ3BpZUNoYXJ0JyxcbiAgICAgICAgICAgIGhlaWdodDogMzc1LFxuICAgICAgICAgICAgLy9oZWlnaHQ6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnZkMycpLm9mZnNldEhlaWdodCk7IHJldHVybiBOdW1iZXIoNDI1KX0sXG4gICAgICAgICAgICB4OiBmdW5jdGlvbihkKXtyZXR1cm4gZC5rZXlbMF07fSxcbiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGQpe3JldHVybiBkLng7fSxcbiAgICAgICAgICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgICAgICAgICBkb251dCA6IHRydWUsXG4gICAgICAgICAgICBwYWRBbmdsZSA6IDAuMDAsXG4gICAgICAgICAgICBjb3JuZXJSYWRpdXMgOiAxLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICBsYWJlbFRocmVzaG9sZDogMCxcbiAgICAgICAgICAgIC8vY29sb3I6IFsnYmx1ZScsICdncmVlbicsICd5ZWxsb3cnXSxcbiAgICAgICAgICAgIC8vY29sb3I6IFtcIiM0YWM0ZjNcIiwgXCIjOTZkNmJkXCIsIFwiIzBhNTk5ZFwiLCBcIiM4YmEyYzBcIiwgXCIjZjdmY2ZkXCIsXCIjZTVmNWY5XCIsXCIjY2NlY2U2XCIsXCIjOTlkOGM5XCIsXCIjNjZjMmE0XCIsXCIjNDFhZTc2XCIsXCIjMjM4YjQ1XCIsXCIjMDA2ZDJjXCIsXCIjMDA0NDFiXCJdLFxuICAgICAgICAgICAgLy9jb2xvcjogW1wiIzIxOTZGM1wiLCBcIiMwMDk2ODhcIiwgIFwiIzY3M0FCN1wiLCAgXCIjRkY5ODAwXCJdLCBcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDUsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICBib3R0b206IC0xNSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWdlbmRQb3NpdGlvbiA6IFwidG9wXCIsXG4gICAgICAgICAgICB0b29sdGlwQ29udGVudCA6IGZ1bmN0aW9uKGtleSwgeCwgeSwgZSwgZ3JhcGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhncmFwaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnT2xhbGFsYSEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGllIDoge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2hhcnRDbGljazogZnVuY3Rpb24oZSkge2NvbnNvbGUubG9nKGUpfSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gMTAwMCo2MCo2MCoyNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRNaW51dGVzKDApXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnIy9ldmVudHM/ZmlsdGVyJmRhdGU9JyArIGRhdGUudG9JU09TdHJpbmcoKSArICcmZnJvbT0nICsgbmV3IERhdGUoKS5nZXRIb3VycygpICsgJzonICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkgKyAnJmNhdGVnb3J5PScgKyBlLmRhdGEua2V5WzBdfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50RGJsQ2xpY2s6IGZ1bmN0aW9uKGUpIHtjb25zb2xlLmxvZyhcImVsZW1lbnQgZG91YmxlIGNsaWNrXCIpfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50TW91c2VvdmVyOiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlb3ZlclwiKX0sXG4gICAgICAgICAgICAgICAgICAgIC8vZWxlbWVudE1vdXNlb3V0OiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlIG91dFwiKX0gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxhYmVsVHlwZSA6IFwicGVyY2VudFwiLFxuICAgICAgICAgICAgICAgIGxhYmVsc091dHNpZGUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAvL3N0YXJ0QW5nbGUgOiBmdW5jdGlvbihkKSB7IHJldHVybiBkLnN0YXJ0QW5nbGUvMiAtTWF0aC5QSS8yIH0sXG4gICAgICAgICAgICAgICAgLy9lbmRBbmdsZSA6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZW5kQW5nbGUvMiAtTWF0aC5QSS8yIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbmFwcC5jb25zdGFudCgnQVJFQScsIHtcbiAgICBvcHRpb25zIDoge1xuICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgdHlwZTogJ211bHRpQmFyQ2hhcnQnLFxuICAgICAgICAgICAgaGVpZ2h0OiA0NTAsXG4gICAgICAgICAgICBtYXJnaW4gOiB7XG4gICAgICAgICAgICAgICAgdG9wOiAzMCxcbiAgICAgICAgICAgICAgICByaWdodDogMjAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAxMDAsXG4gICAgICAgICAgICAgICAgbGVmdDogNTBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB4OiBmdW5jdGlvbihkKSB7IHJldHVybiBkLnggfSxcbiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICAgICAgaWYgKGQuc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZC5GbG93Q291bnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihkLkNvdW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1c2VWb3Jvbm9pOiBmYWxzZSxcbiAgICAgICAgICAgIGNsaXBFZGdlOiB0cnVlLFxuICAgICAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgICAgIHVzZUludGVyYWN0aXZlR3VpZGVsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgIHRvb2x0aXBDb250ZW50IDogZnVuY3Rpb24oa2V5LCB4LCB5LCBlLCBncmFwaCkge3JldHVybihcIkhhXCIpO30sXG4gICAgICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgICAgIHNob3dNYXhNaW46IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpY2tGb3JtYXQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLnRpbWUuZm9ybWF0KCclbS8lZCAlSDolTScpKG5ldyBEYXRlKGQpKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcm90YXRlTGFiZWxzIDogLTQ1LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgc2hvd01heE1pbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGlja0Zvcm1hdDogZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoJ3MnKShkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSwgIFxuICAgICAgICAgICAgbXVsdGliYXI6IHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCA6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGUuZGF0YS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRIb3VycygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcjL2V2ZW50cz9maWx0ZXImZGF0ZT0nICsgZGF0ZS50b0lTT1N0cmluZygpICsgJyZmcm9tPScgKyAoXCIwXCIgKyBob3Vycykuc2xpY2UoLTIpICsgJzonICsgKFwiMFwiICsgbWludXRlcykuc2xpY2UoLTIpICsgJyZjYXRlZ29yeT0nICsgZS5kYXRhLmtleSArICcmZGlyPTEnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cblxuYXBwLmNvbnN0YW50KFwiTUVOVVwiLCBbXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIkRhc2hib2FyZFwiLFxuICAgICAgICBcImxpbmtcIiA6IFwiIy9cIlxuXHRcdC8qXCJpdGVtc1wiIDogW1xuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIlVzZXJzXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwidXNlclwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIlxuXHRcdFx0fVxuXHRcdF0qL1xuXHR9LFxuXHR7XG5cdFx0XCJ0aXRsZVwiIDogXCJFdmVudHNcIixcblx0XHRcImxpbmtcIiBcdDogXCIjL2V2ZW50c1wiXG5cdH0sXG5cdC8qe1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMjNcIixcblx0XHRcIml0ZW1zXCIgOiBbXG5cdFx0XHR7XG5cdFx0XHRcdFwidGl0bGVcIiA6IFwiVXNlcnNcIixcblx0XHRcdFx0XCJsaW5rXCIgXHQ6IFwic2V0dGluZ3NcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJNeSBwcm9maWxlXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwicHJvZmlsZVwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCJwcm9maWxlXCJcblx0XHRcdH1cblx0XHRdXG5cblx0fSxcblx0e1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMTIzXCIsXG5cdFx0XCJsaW5rXCIgXHQ6IFwibG9naW5cIlxuXHR9LCovXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIlNldHRpbmdzXCIsXG5cdFx0XCJpdGVtc1wiIDogW1xuICAgICAgICAgICAge1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCIjL3NldHRpbmdzL3Byb2ZpbGVcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJVc2Vyc1wiLFxuXHRcdFx0XHRcImxpbmtcIiBcdDogXCIjL3NldHRpbmdzL3VzZXJzXCJcblx0XHRcdH0sXG5cdFx0XVxuXHR9XG5dKTtcblxuYXBwLmNvbnRyb2xsZXIoJ2V2ZW50Q29udHJvbGxlcicsIFtcIiRzY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiRodHRwXCIsIFwiYXBpXCIsIGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkaHR0cCwgYXBpKSB7XG5cbiAgICAgICAgJHNjb3BlLmlkID0gJHJvdXRlUGFyYW1zO1xuXG4gICAgICAgICRzY29wZS5nZW8gPSBbXTtcblxuICAgICAgICAkc2NvcGUuYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpXG4gICAgICAgIH1cblxuICAgICAgICBhcGkuZ2V0KCdpZC8nICsgJHJvdXRlUGFyYW1zWydpZCddKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5kYXRhID0gZGF0YTtcblxuICAgICAgICAgICAgLy92YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xuXG4gICAgICAgICAgICBpZiAoKCRzY29wZS5kYXRhLlNvdXJjZSAhPSB1bmRlZmluZWQgJiYgJHNjb3BlLmRhdGEuVGFyZ2V0ICE9IHVuZGVmaW5lZCkgJiYgXG4gICAgICAgICAgICAgICAgKCRzY29wZS5kYXRhLlNvdXJjZVswXS5JUDQgJiYgJHNjb3BlLmRhdGEuVGFyZ2V0WzBdLklQNCkpIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9mcmVlZ2VvaXAubmV0L2pzb24vJyArICRzY29wZS5kYXRhLlRhcmdldFswXS5JUDRbMF0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsndHlwZSddID0gXCJUYXJnZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdlby5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvL3ZhciBsYXRsbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGRhdGEubGF0aXR1ZGUsIGRhdGEubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9ib3VuZHMuZXh0ZW5kKGxhdGxuZyk7XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2ZyZWVnZW9pcC5uZXQvanNvbi8nICsgJHNjb3BlLmRhdGEuU291cmNlWzBdLklQNFswXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJ3R5cGUnXSA9IFwiU291cmNlXCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW8ucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhkYXRhLmxhdGl0dWRlLCBkYXRhLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vYm91bmRzLmV4dGVuZChsYXRsbmcpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgkc2NvcGUuZGF0YS5Tb3VyY2UgPT0gdW5kZWZpbmVkIHx8ICRzY29wZS5kYXRhLlNvdXJjZVswXS5JUDQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vZnJlZWdlb2lwLm5ldC9qc29uLycgKyAkc2NvcGUuZGF0YS5UYXJnZXRbMF0uSVA0WzBdKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVsndHlwZSddID0gXCJUYXJnZXRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdlby5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2ZyZWVnZW9pcC5uZXQvanNvbi8nICsgJHNjb3BlLmRhdGEuU291cmNlWzBdLklQNFswXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJ3R5cGUnXSA9IFwiU291cmNlXCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW8ucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcblxufV0pO1xuXG5hcHAuY29udHJvbGxlcignZXZlbnRzQ29udHJvbGxlcicsIFtcIiRzY29wZVwiLCBcIiRodHRwXCIsIFwiJGxvY2F0aW9uXCIsIFwiYXBpXCIsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsICRsb2NhdGlvbiwgYXBpKSB7XG4gICAgJHNjb3BlLmZpbHRlciA9IHtcbiAgICAgICAgXCJjYXRlZ29yeVwiIDogXCJcIiwgICAgLy8gQ2F0ZWdvcnlcbiAgICAgICAgXCJzcmNfaXBcIiA6IFwiXCIsICAgICAgLy8gU291cmNlIElQXG4gICAgICAgIFwidHJ0X2lwXCIgOiBcIlwiLCAgICAgIC8vIFRhcmdldCBJUFxuICAgICAgICBcImRlc2NcIiA6IFwiXCIsICAgICAgICAvLyBEZXNjcmlwdGlvblxuICAgICAgICBcImZsb3dzX2Zyb21cIiA6IFwiXCIsICAvLyBGbG93Q291bnRcbiAgICAgICAgXCJmbG93c190b1wiIDogXCJcIiwgICAgLy8gRmxvd0NvdW50XG4gICAgICAgIFwiaXRlbXNcIiA6IDEwMCwgICAgICAvLyBMaW1pdCBudW1iZXIgb2YgZGlzcGxheWVkIGl0ZW1zXG4gICAgfTtcbiAgICAkc2NvcGUucXVlcnkgPSB7XG4gICAgICAgIFwiZnJvbVwiIDogXCJcIixcbiAgICAgICAgXCJ0b1wiIDogXCJcIixcbiAgICAgICAgXCJkYXRlXCIgOiBuZXcgRGF0ZSgpLFxuICAgICAgICBcImRlc2NyaXB0aW9uXCIgOiBcIlwiLFxuICAgICAgICBcImNhdGVnb3J5XCIgOiBcIlwiLFxuICAgICAgICBcIm9yZGVyYnlcIiA6IFwiRGV0ZWN0VGltZVwiLFxuICAgICAgICBcImRpclwiIDogMSxcbiAgICAgICAgXCJsaW1pdFwiIDogMTAwXG4gICAgfVxuXG4gICAgJHNjb3BlLm9yZGVyQnkgPSBbXCJEZXRlY3RUaW1lXCIsIFwiQ2F0ZWdvcnlcIiwgXCJEZXNjcmlwdGlvblwiLCBcIkZsb3dDb3VudFwiXTtcbiAgICAkc2NvcGUuc2VhcmNoVGV4dCA9IFwiXCI7XG5cbiAgICAkc2NvcGUucXVlcnlTZWFyY2ggPSBmdW5jdGlvbiAocXVlcnkpIHtcbiAgICAgIHZhciByZXN1bHRzID0gcXVlcnkgPyAkc2NvcGUub3JkZXJCeS5maWx0ZXIoIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkgKSA6IFtdO1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRmlsdGVyRm9yKHF1ZXJ5KSB7XG4gICAgICB2YXIgbG93ZXJjYXNlUXVlcnkgPSBhbmd1bGFyLmxvd2VyY2FzZShxdWVyeSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gZmlsdGVyRm4oc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICgkc2NvcGUub3JkZXJCeS5pbmRleE9mKGxvd2VyY2FzZVF1ZXJ5KSA9PT0gMCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgXG5cbiAgICAkc2NvcGUuZGF0YSA9IFtdO1xuICAgICRzY29wZS5sb2FkYnRuID0gXCJMb2FkXCI7XG4gICAgJHNjb3BlLm5leHRCdXR0b24gPSBcIkxvYWQgbmV4dCAxMDAgaXRlbXNcIjtcbiAgICBjb25zb2xlLmxvZygkc2NvcGUucXVlcnkuZGF0ZSk7XG4gICAgJHNjb3BlLmFjdGl2ZUZpbHRlciA9ICRsb2NhdGlvbi5zZWFyY2goKS5maWx0ZXI7XG5cbiAgICAkc2NvcGUuc3dpdGNoRGlyID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIGlmICh2YWwgPT0gLTEgfHwgdmFsKSB7XG4gICAgICAgICAgICAkc2NvcGUuZGlyVmFsID0gXCJEZXNjZW5kaW5nXCI7XG4gICAgICAgICAgICAkc2NvcGUucXVlcnkuZGlyID0gLTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkc2NvcGUuZGlyVmFsID0gXCJBc2NlbmRpbmdcIjtcbiAgICAgICAgICAgICRzY29wZS5xdWVyeS5kaXIgPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnN3aXRjaERpcigkbG9jYXRpb24uc2VhcmNoKCkuZGlyKTtcblxuICAgICRzY29wZS5sb2FkTmV4dCA9IGZ1bmN0aW9uKHRpbWUpIHtcbiAgICAgICAgJHNjb3BlLm5leHRCdXR0b24gPSBcIkxvYWRpbmcuLi5cIjtcblxuICAgICAgICBpZiAoJGxvY2F0aW9uLnNlYXJjaCgpLmZpbHRlcikge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gYW5ndWxhci5jb3B5KCRzY29wZS5xdWVyeSk7XG4gICAgICAgICAgICBxdWVyeS5mcm9tID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgICAgICBxdWVyeS5kaXIgPSAxO1xuXG4gICAgICAgICAgICBpZiAocXVlcnkudG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgdG8gPSBxdWVyeS50by5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIHZhciB0b19kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgICAgICAgICAgdG9fZGF0ZS5zZXRIb3Vycyh0b19kYXRlLmdldEhvdXJzKCkgKyB0b1swXSk7XG4gICAgICAgICAgICAgICAgdG9fZGF0ZS5zZXRNaW51dGVzKHRvWzFdKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9fZGF0ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHF1ZXJ5LnRvID0gdG9fZGF0ZTtcblxuXG4gICAgICAgICAgICBhcGkuZ2V0KCdxdWVyeScsIHF1ZXJ5LCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBmb3IoaXRlbSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5kYXRhLnB1c2goZGF0YVtpdGVtXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5leHRCdXR0b24gPSBcIkxvYWQgbmV4dCAxMDAgaXRlbXNcIjtcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVyciwgbXNnKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkc2NvcGUubmV4dEJ1dHRvbiA9IFwiTG9hZCBuZXh0IDEwMCBpdGVtc1wiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBxdWVyeSA9IHtcbiAgICAgICAgICAgICAgICBcInRvXCIgOiBuZXcgRGF0ZSh0aW1lKSxcbiAgICAgICAgICAgICAgICBcImRpclwiIDogLTFcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXBpLmdldCgncXVlcnknLCBxdWVyeSwgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgZm9yKGl0ZW0gaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5wdXNoKGRhdGFbaXRlbV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUubmV4dEJ1dHRvbiA9IFwiTG9hZCBuZXh0IDEwMCBpdGVtc1wiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIsIG1zZykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5leHRCdXR0b24gPSBcIkxvYWQgbmV4dCAxMDAgaXRlbXNcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubG9hZEl0ZW1zID0gZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgICAgJHNjb3BlLmxvYWRidG4gPSBcIkxvYWRpbmcuLi5cIjtcbiAgICAgICAgdmFyIGZyb20gPSBxdWVyeS5mcm9tLnNwbGl0KCc6Jyk7XG4gICAgICAgIHZhciBmcm9tX2RhdGUgPSBuZXcgRGF0ZShxdWVyeS5kYXRlKTtcbiAgICAgICAgZnJvbV9kYXRlLnNldEhvdXJzKGZyb21fZGF0ZS5nZXRIb3VycygpICsgZnJvbVswXSk7XG4gICAgICAgIGZyb21fZGF0ZS5zZXRNaW51dGVzKGZyb21bMV0pO1xuICAgICAgICBcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnZmlsdGVyJywgdHJ1ZSk7XG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2Zyb20nLCBxdWVyeS5mcm9tKTtcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnZGF0ZScsIHF1ZXJ5LmRhdGUpO1xuICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdsaW1pdCcsIHF1ZXJ5LmxpbWl0KTtcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnb3JkZXJieScsIHF1ZXJ5Lm9yZGVyYnkpO1xuICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdkaXInLCBxdWVyeS5kaXIpO1xuXG4gICAgICAgIFxuXG4gICAgICAgIGlmIChxdWVyeS50bykge1xuICAgICAgICAgICAgdmFyIHRvID0gcXVlcnkudG8uc3BsaXQoJzonKTtcbiAgICAgICAgICAgIHZhciB0b19kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgICAgICB0b19kYXRlLnNldEhvdXJzKHRvX2RhdGUuZ2V0SG91cnMoKSArIHRvWzBdKTtcbiAgICAgICAgICAgIHRvX2RhdGUuc2V0TWludXRlcyh0b1sxXSk7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCd0bycsIHF1ZXJ5LnRvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0b19kYXRlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChxdWVyeS5kZXNjcmlwdGlvbiAhPSBcIlwiKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdkZXNjcmlwdGlvbicsIHF1ZXJ5LmRlc2NyaXB0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXJ5LmRlc2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChxdWVyeS5jYXRlZ29yeSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdjYXRlZ29yeScsIHF1ZXJ5LmNhdGVnb3J5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXJ5LmNhdGVnb3J5ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZW5kID0ge1xuICAgICAgICAgICAgXCJmcm9tXCIgOiBmcm9tX2RhdGUsXG4gICAgICAgICAgICBcInRvXCIgOiB0b19kYXRlLFxuICAgICAgICAgICAgXCJjYXRlZ29yeVwiIDogcXVlcnkuY2F0ZWdvcnksXG4gICAgICAgICAgICBcImRlc2NyaXB0aW9uXCIgOiBxdWVyeS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIFwibGltaXRcIiA6IHF1ZXJ5LmxpbWl0LFxuICAgICAgICAgICAgXCJvcmRlcmJ5XCIgOiBxdWVyeS5vcmRlcmJ5LFxuICAgICAgICAgICAgXCJkaXJcIiA6IHF1ZXJ5LmRpclxuICAgICAgICB9XG4gICAgICAgIGFwaS5nZXQoJ3F1ZXJ5Jywgc2VuZCwgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHQkc2NvcGUuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiXG5cdCAgICB9KS5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5sb2FkYnRuID0gXCJMb2FkXCI7ICAgIFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCRsb2NhdGlvbi5zZWFyY2goKS5maWx0ZXIpIHtcbiAgICAgICAgLy8gUXVlcnkgZmlsdGVyIGlzIHNldCwgYXBwbHkgaXRcbiAgICAgICAgJHNjb3BlLnF1ZXJ5ID0gJGxvY2F0aW9uLnNlYXJjaCgpO1xuICAgICAgICAkc2NvcGUucXVlcnkuZGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5xdWVyeS5kYXRlKTtcbiAgICAgICAgJHNjb3BlLmxvYWRJdGVtcygkc2NvcGUucXVlcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZldGNoIDEwMCByZWNlbnQgZXZlbnRzXG4gICAgICAgIGFwaS5nZXQoXCIxMDBcIikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YSA9IGRhdGE7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5ldmVudHMgPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuc3JjX2lwICE9IFwiXCIpe1xuICAgICAgICAgICAgaWYgKFwiU291cmNlXCIgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChcIklQNFwiIGluIGl0ZW0uU291cmNlWzBdICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLlNvdXJjZVswXS5JUDRbMF0udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIuc3JjX2lwLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIudHJ0X2lwICE9IFwiXCIpe1xuICAgICAgICAgICAgaWYgKFwiVGFyZ2V0XCIgaW4gaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChcIklQNFwiIGluIGl0ZW0uVGFyZ2V0WzBdICYmIFxuICAgICAgICAgICAgICAgICAgICBpdGVtLlRhcmdldFswXS5JUDRbMF0udG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXIudHJ0X2lwLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLmNhdGVnb3J5ICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLkNhdGVnb3J5WzBdLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkc2NvcGUuZmlsdGVyLmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNjb3BlLmZpbHRlci5kZXNjICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLkRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkc2NvcGUuZmlsdGVyLmRlc2MudG9Mb3dlckNhc2UoKSkgPiAtMSlcbiAgICAgICAgICAgICAgICByZXMucHVzaCgxKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLmZsb3dzX2Zyb20gIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGl0ZW0uRmxvd0NvdW50ID4gTnVtYmVyKCRzY29wZS5maWx0ZXIuZmxvd3NfZnJvbSkpXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNjb3BlLmZpbHRlci5mbG93c190byAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5GbG93Q291bnQgPCBOdW1iZXIoJHNjb3BlLmZpbHRlci5mbG93c190bykpXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbG9naWN2YWx1ZSA9IDE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsb2dpY3ZhbHVlID0gbG9naWN2YWx1ZSAqIHJlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9naWN2YWx1ZSA9PSAxID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgfVxuXG59XSk7XG5cbmFwcC5kaXJlY3RpdmUoJ3ZhbGlkYXRlSG91cnMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG8gPSBbXTtcbiAgICB2YXIgZnJvbSA9IFtdO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICAgICAgICBjdHJsLiR2YWxpZGF0b3JzLnRpbWUgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnMubmdNb2RlbCA9PSBcInF1ZXJ5LmZyb21cIiAmJiB2aWV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IHZpZXdWYWx1ZS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvID0gdmlld1ZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvLmxlbmd0aCA9PSAyIHx8IGZyb20ubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9bMF0gPCBmcm9tWzBdIHx8ICh0b1swXSA8PSBmcm9tWzBdICYmIHRvWzFdIDwgZnJvbVsxXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgdG9bMF0gPCAwIHx8IHRvWzBdID4gMjMgfHwgdG9bMV0gPCAwIHx8IHRvWzFdID4gNTkgfHwgZnJvbVswXSA8IDAgfHwgZnJvbVswXSA+IDIzIHx8IGZyb21bMV0gPCAwIHx8IGZyb21bMV0gPiA1OVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5hcHAuY29udHJvbGxlcignaG9tZUNvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCJ1c2VyXCIsIFwiJHRpbWVvdXRcIiwgXCIkaW50ZXJ2YWxcIiwgXCIkbG9nXCIsIFwiJGxvY2FsU3RvcmFnZVwiLCBcIiRyb3V0ZVwiLCBmdW5jdGlvbigkc2NvcGUsIHVzZXIsICR0aW1lb3V0LCAkaW50ZXJ2YWwsICRsb2csICRsb2NhbFN0b3JhZ2UsICRyb3V0ZSkge1xuICAgICRzY29wZS5hY3RpdmVHcmlkID0gZmFsc2U7XG4gICAgJHNjb3BlLnJlZnJlc2hfaW50ZXJ2YWwgPSAxMDtcbiAgICBcbiAgICAvLyBUbyBzdG9yZSBpbnRlcnZhbCBJRFxuICAgIHZhciByZWZyZXNoID0gdW5kZWZpbmVkO1xuICAgICRzY29wZS5yZWZyZXNoX2VuYWJsZWQgPSBhbmd1bGFyLmlzRGVmaW5lZChyZWZyZXNoKTtcblxuICAgICRzY29wZS5hcGlzID0gW107XG4gICAgXG4gICAgJHNjb3BlLm9wZW5NZW51ID0gZnVuY3Rpb24oJG1kT3Blbk1lbnUsIGV2KSB7XG4gICAgICAgIG9yaWdpbmF0b3JFdiA9IGV2O1xuICAgICAgICAkbWRPcGVuTWVudShldik7XG4gICAgfTtcblxuICAgICRzY29wZS5hZGRJdGVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdhZGRJdGVtJyk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmVuYWJsZUdyaWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0VuYWJsZSBncmlkJylcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2VuYWJsZUdyaWQnKTtcbiAgICAgICAgJHNjb3BlLmFjdGl2ZUdyaWQgPSAhJHNjb3BlLmFjdGl2ZUdyaWQ7XG4gICAgfVxuICAgICRzY29wZS4kb24oJ3JlcXVlc3RSZWRyYXcnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXF1ZXN0IGFjY2VwdGVkXCIpO1xuICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuY2xlYXJDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkbG9nLmRlYnVnKFwiZGVsZXRpbmcgdGltZXN0YW1wXCIpXG4gICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlWyd0aW1lc3RhbXAnXTtcbiAgICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgIH1cblxuICAgICRzY29wZS5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQocmVmcmVzaCkpIHtcbiAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwocmVmcmVzaCk7XG4gICAgICAgICAgICByZWZyZXNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Jyb2FkY2FzdCBmYWlsZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVmcmVzaCA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyRzY29wZS5jbGVhckNhY2hlKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Jyb2FkY2FzdCcpXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3JlZnJlc2hEYXRhJyk7XG4gICAgICAgICAgICB9LCAkc2NvcGUucmVmcmVzaF9pbnRlcnZhbCoxMDAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5yZWZyZXNoX2VuYWJsZWQgPSBhbmd1bGFyLmlzRGVmaW5lZChyZWZyZXNoKVxuXG4gICAgfVxuXG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdib3gnLCBbXCIkc2NvcGVcIiwgXCIkbG9nXCIsIFwiJG1kRGlhbG9nXCIsIFwiUFJPVE9DT0xTXCIsIFwiVFlQRVNcIiwgXCJDQVRFR09SSUVTXCIsIFwiUElFQ0hBUlRcIiwgXCJBUkVBXCIsIFwiYXBpXCIsIFwidXNlclwiLCBcIiRtZE1lZGlhXCIsIFwiJGxvY2FsU3RvcmFnZVwiLCBcIiR0aW1lb3V0XCIsIGZ1bmN0aW9uKCRzY29wZSwgJGxvZywgJG1kRGlhbG9nLCBQUk9UT0NPTFMsIFRZUEVTLCBDQVRFR09SSUVTLCBQSUVDSEFSVCwgQVJFQSwgYXBpLCB1c2VyLCAkbWRNZWRpYSwgJGxvY2FsU3RvcmFnZSwgJHRpbWVvdXQpe1xuICAgIGZ1bmN0aW9uIHRpbWVTaGlmdChvZmZzZXQpIHsgXG4gICAgICAgICRzY29wZS5ib3guY29uZmlnLmJlZ2ludGltZSA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS5ib3gpXG4gICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKG9mZnNldCkpXG4gICAgICAgICAgICAgICAgbm93LnNldEhvdXJzKG5vdy5nZXRIb3VycygpIC0gTnVtYmVyKG9mZnNldCkpO1xuXG4gICAgICAgICAgICBub3cuc2V0SG91cnMobm93LmdldEhvdXJzKCkgLSAkc2NvcGUuYm94LmNvbmZpZy5wZXJpb2QpO1xuICAgICAgICAgICAgcmV0dXJuIG5vdztcbiAgICAgICAgfSkoKTtcbiAgICB9XG5cbiAgICB0aW1lU2hpZnQoKTtcblxuICAgICRzY29wZS5ib3gubG9hZGluZyA9IHRydWU7XG4gICAgICAgIFxuICAgICRzY29wZS5vcGVuTWVudSA9IGZ1bmN0aW9uKCRtZE9wZW5NZW51LCBldikge1xuICAgICAgICBvcmlnaW5hdG9yRXYgPSBldjtcbiAgICAgICAgJG1kT3Blbk1lbnUoZXYpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZWRpdE1vZGUgPSBmYWxzZTtcbiAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSB7fTtcblxuICAgICRzY29wZS5wcm90b2NvbCA9IFBST1RPQ09MUztcbiAgICAkc2NvcGUudHlwZXMgPSBUWVBFUztcbiAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IENBVEVHT1JJRVM7XG4gICAgXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIEVkaXQgbW9kZSBoYW5kbGluZ1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8vIFRyaWdnZXIgZWRpdGluZyBtb2RlIGFuZCBzYXZlIGN1cnJlbnQgc3RhdGVcbiAgICAkc2NvcGUuZWRpdCA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgICAkc2NvcGUuZWRpdE1vZGUgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSBhbmd1bGFyLmNvcHkoYm94KTtcbiAgICAgICAgJHNjb3BlLiRlbWl0KFwic3dpdGNoLWRyYWdcIik7XG4gICAgfVxuXG4gICAgLy8gU2F2ZSBjaGFuZ2VzIGFuZCBkaXNhYmxlIGVkaXQgbW9kZVxuICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS51c2VyKCk7XG4gICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ3BpZWNoYXJ0Jykge1xuICAgICAgICAgICAgJHNjb3BlLmJveC5vcHRpb25zID0gUElFQ0hBUlQub3B0aW9ucztcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ2JhcmNoYXJ0JylcbiAgICAgICAgICAgICRzY29wZS5ib3gub3B0aW9ucyA9IEFSRUEub3B0aW9ucztcbiAgICAgICAgXG5cbiAgICAgICAgJHNjb3BlLmJhY2t1cE1vZGVsID0ge307XG5cbiAgICAgICAgJHNjb3BlLmJveC5jb25maWcudHlwZSA9ICRzY29wZS5ib3gudHlwZTtcbiAgICAgICAgXG4gICAgICAgIC8vIERpc2FibGUgZWRpdCBtb2RlXG4gICAgICAgICRzY29wZS5lZGl0TW9kZSA9IGZhbHNlO1xuXG4gICAgICAgIFxuICAgICAgICAvLyBTaGlmdCB0aW1lIGZvciBxdWVyeVxuICAgICAgICB0aW1lU2hpZnQoKTtcblxuICAgICAgICAkc2NvcGUuJGVtaXQoXCJzd2l0Y2gtZHJhZ1wiKTtcbiAgICAgICAgLy8gR2V0IHJlcXVpcmVkIGRhdGFcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAncGllY2hhcnQnIHx8ICRzY29wZS5ib3gudHlwZSA9PSAnYmFyY2hhcnQnKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCdhZ2cnLCAkc2NvcGUuYm94LmNvbmZpZywgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7ICAgIFxuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAndG9wJykge1xuICAgICAgICAgICAgYXBpLmdldCgndG9wJywgJHNjb3BlLmJveC5jb25maWcsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlOyAgICBcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ3N1bScpIHtcbiAgICAgICAgICAgIGFwaS5nZXQoJ2NvdW50JywgJHNjb3BlLmJveC5jb25maWcpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuICAgICRzY29wZS5jaGFuZ2VTZWxlY3RvciA9IGZ1bmN0aW9uKHNlbCkge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmJveC5kYXRhLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmFsdWUudmFsdWVzLCBmdW5jdGlvbih2YWwsIGspIHtcbiAgICAgICAgICAgICAgICB2YWxbJ3NlbGVjdG9yJ10gPSBzZWw7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAkc2NvcGUuJGVtaXQoJ3JlcXVlc3RSZWRyYXcnKVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmNoYW5nZVNlbGVjdG9yKCRzY29wZS5ib3guc2VsZWN0b3IpO1xuXG4gICAgXG5cbiAgICAvLyBSZXZlcnQgdG8gb3JpZ2luYWwgYW5kIGRpc2FibGUgZWRpdCBtb2RlXG4gICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgICAkc2NvcGUuYm94ID0gYW5ndWxhci5jb3B5KCRzY29wZS5iYWNrdXBNb2RlbCk7XG4gICAgICAgICRzY29wZS5iYWNrdXBNb2RlbCA9IHt9O1xuICAgICAgICAkc2NvcGUuZWRpdE1vZGUgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLiRlbWl0KFwic3dpdGNoLWRyYWdcIik7XG4gICAgfVxuICAgIFxuICAgICRzY29wZS50b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGltZVNoaWZ0KClcbiAgICAgICAgYXBpLmdldCgndG9wJywgJHNjb3BlLmJveC5jb25maWcsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHZhciBjYWNoZV90aW1lID0gKG5ldyBEYXRlKCkgLSBuZXcgRGF0ZSgkbG9jYWxTdG9yYWdlWyd0aW1lc3RhbXAnXSkpLzEwMDA7XG4gICAgaWYgKGlzTmFOKGNhY2hlX3RpbWUpKVxuICAgICAgICBjYWNoZV90aW1lID0gMzAwICsgMTA7XG5cbiAgICBcblxuICAgIFxuICAgIC8vIFNob3cgbG9hZGluZyBpbmRpY2F0b3JcbiAgICBpZiAoY2FjaGVfdGltZSA8IDMwMClcbiAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7XG4gICAgZWxzZSB7XG4gICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEYXRhIGlzIGNhY2hlZCwgcmVkcmF3JylcbiAgICAgICAgXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignZ3JpZHN0ZXItaXRlbS1pbml0aWFsaXplZCcsIGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAncGllY2hhcnQnIHx8ICRzY29wZS5ib3gudHlwZSA9PSAnYmFyY2hhcnQnKSB7XG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHsgJHNjb3BlLiRlbWl0KCdyZXF1ZXN0UmVkcmF3Jyk7fSwgNTAwKTtcbiAgICAgICAgfVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBnZXREYXRhKCkge1xuICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09IFwicGllY2hhcnRcIiB8fCAkc2NvcGUuYm94LnR5cGUgPT0gXCJiYXJjaGFydFwiKSB7XG4gICAgICAgICAgICAvLyBUaGUgYm94IGlzIGEgY2hhcnRcbiAgICAgICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ3BpZWNoYXJ0Jykge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gub3B0aW9ucyA9IFBJRUNIQVJULm9wdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdiYXJjaGFydCcpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5vcHRpb25zID0gYW5ndWxhci5jb3B5KEFSRUEub3B0aW9ucyk7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgJHNjb3BlLmJveC5jb25maWcudHlwZSA9ICRzY29wZS5ib3gudHlwZTtcblxuICAgICAgICAgICAgaWYgKGNhY2hlX3RpbWUgPiAzMDApIHtcbiAgICAgICAgICAgICAgICBhcGkuZ2V0KCdhZ2cnLCAkc2NvcGUuYm94LmNvbmZpZywgZmFsc2UsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdyZXF1ZXN0UmVkcmF3Jyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICd0b3AnICYmIGNhY2hlX3RpbWUgPiAzMDApIHtcbiAgICAgICAgICAgIGFwaS5nZXQoJ3RvcCcsICRzY29wZS5ib3guY29uZmlnLCBmYWxzZSwgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICdzdW0nICYmIGNhY2hlX3RpbWUgPiAzMDApIHtcbiAgICAgICAgICAgIGFwaS5nZXQoJ2NvdW50JywgJHNjb3BlLmJveC5jb25maWcsIGZhbHNlLCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBnZXREYXRhKCk7XG5cblxuICAgICRzY29wZS4kb24oJ3JlZnJlc2hEYXRhJywgZnVuY3Rpb24oKSB7IFxuICAgICAgICAvL2NvbnNvbGUubG9nKCdyZWZyZXNoaW5nJyk7IFxuICAgICAgICBjYWNoZV90aW1lID0gMzAwKzEwOyBcbiAgICAgICAgZ2V0RGF0YSgpO1xuICAgIH0pXG4gXG4gICAgJHNjb3BlLnVzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNldHRpbmdzID0gYW5ndWxhci5jb3B5KCRzY29wZS5pdGVtcyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2V0dGluZ3NbaV1bXCJkYXRhXCJdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZXR0aW5nc1tpXVtcIm9wdGlvbnNcIl07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBxdWVyeSA9IHtcbiAgICAgICAgICAgIFwic2V0dGluZ3NcIiA6IHNldHRpbmdzXG4gICAgICAgIH1cblxuICAgICAgICAvLyRsb2cuaW5mbyhxdWVyeSlcbiAgICAgICAgdXNlci5wdXQocXVlcnkpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgJGxvZy5lcnJvcihkYXRhKVxuICAgICAgICAgICAgfSlcbiAgICB9XG5cbiAgICAkc2NvcGUuJG9uKCdzYXZlVXNlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudXNlcigpXG4gICAgfSk7XG5cbiAgICAkc2NvcGUuJG9uKCdncmlkc3Rlci1pdGVtLXJlc2l6ZWQnLCBmdW5jdGlvbihncmlkc3Rlcikge1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInJlcXVlc3QgYWNjZXB0ZWRcIik7XG4gICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdyZXNpemUnKSk7XG4gICAgICAgIH0sIDEwMCk7XG4gICAgfSlcblxuXG4gICAgJHNjb3BlLnNob3dFZGl0ID0gZnVuY3Rpb24oZXYsIGJveCkge1xuICAgICAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmJveCk7XG5cbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ2VkaXRCb3hDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZWRpdC5odG1sJyxcbiAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTp0cnVlLFxuICAgICAgICAgICAgZnVsbHNjcmVlbjogdHJ1ZSxcbiAgICAgICAgICAgIGxvY2Fsczoge1xuICAgICAgICAgICAgICAgIGJveDogJHNjb3BlLmJveFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2F2ZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHsgLy8gY2FuY2VsXG4gICAgICAgICAgICAkc2NvcGUuYm94ID0gYW5ndWxhci5jb3B5KCRzY29wZS5iYWNrdXBNb2RlbCk7XG4gICAgICAgICAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSB7fTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICB9O1xuXG4gIFxufV0pO1xuXG5hcHAuY29udHJvbGxlcignZ3JpZCcsIFtcIiRzY29wZVwiLCBcIiR0aW1lb3V0XCIsIFwiJGxvZ1wiLCBcInVzZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgJGxvZy8qLCAkbWRNZWRpYSwgJHdpbmRvdyovLCB1c2VyKSB7XG4gICAgJHNjb3BlLm9wdCA9IHtcbiAgICAgICAgb3V0ZXJNYXJnaW46IGZhbHNlLFxuICAgICAgICBjb2x1bW5zOiA4LFxuICAgICAgICBwdXNoaW5nOiB0cnVlLFxuICAgICAgICByb3dIZWlnaHQ6IDE3MCxcbiAgICAgICAgY29sV2lkdGggOiAnYXV0bycsXG4gICAgICAgIGZsb2F0aW5nOiB0cnVlLFxuICAgICAgICBzd2FwcGluZzogdHJ1ZSxcbiAgICAgICAgbW9iaWxlQnJlYWtQb2ludDogOTMzLFxuICAgICAgICBkcmFnZ2FibGU6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICByZXNpemFibGU6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaGFuZGxlczogWyduJywgJ2UnLCAncycsICd3JywgJ3NlJywgJ3N3J10sXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbihldmVudCwgJGVsZW1lbnQsIHdpZGdldCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVzaXplIGVuZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCdyZXF1ZXN0UmVkcmF3Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuJG9uKCdlbmFibGVHcmlkJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUub3B0LnJlc2l6YWJsZS5lbmFibGVkID09IHRydWUpIHtcbiAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdzYXZlVXNlcicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAkc2NvcGUub3B0LnJlc2l6YWJsZS5lbmFibGVkID0gISRzY29wZS5vcHQucmVzaXphYmxlLmVuYWJsZWQ7IFxuICAgICAgICAkc2NvcGUub3B0LmRyYWdnYWJsZS5lbmFibGVkID0gISRzY29wZS5vcHQuZHJhZ2dhYmxlLmVuYWJsZWQ7IFxuICAgIH0pXG5cbiAgICAkc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICAgIHZhciB0bXAgPSAkc2NvcGUuaXRlbXMuc3BsaWNlKCRzY29wZS5pdGVtcy5pbmRleE9mKGJveCksIDEpO1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2F2ZVVzZXInKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLml0ZW1zID0gdXNlci5jb25maWcoKTtcbiAgICBcbiAgICAkc2NvcGUuJG9uKCdhZGRJdGVtJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpdGVtID0ge1xuICAgICAgICAgICAgXCJ0aXRsZVwiIDogXCJOZXcgYm94XCIsXG4gICAgICAgICAgICBcImxvYWRpbmdcIiA6IGZhbHNlLFxuICAgICAgICAgICAgc2l6ZVg6IDEsXG4gICAgICAgICAgICBzaXplWTogMSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgICAgICBjb25maWcgOiB7XG4gICAgICAgICAgICAgICAgcGVyaW9kIDogMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9yb3cgOiByb3csXG4gICAgICAgICAgICAvL2NvbCA6IGNvbFxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLml0ZW1zLnB1c2goaXRlbSlcbiAgICB9KTtcblxuXG59XSlcblxuXG5hcHAuY29udHJvbGxlcignZWRpdEJveENvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCIkbWREaWFsb2dcIiwgXCJib3hcIiwgXCJQUk9UT0NPTFNcIiwgXCJUWVBFU1wiLCBcIkNBVEVHT1JJRVNcIiwgZnVuY3Rpb24oJHNjb3BlLCAkbWREaWFsb2csIGJveCwgUFJPVE9DT0xTLCBUWVBFUywgQ0FURUdPUklFUykge1xuICAgIFxuICAgICRzY29wZS5ib3ggPSBib3g7XG4gICAgXG4gICAgJHNjb3BlLmJhY2t1cE1vZGVsID0gYW5ndWxhci5jb3B5KGJveCk7XG5cbiAgICAkc2NvcGUuY2F0ZWdvcmllcyA9IENBVEVHT1JJRVM7XG4gICAgJHNjb3BlLnByb3RvY29scyA9IFBST1RPQ09MUztcbiAgICAkc2NvcGUudHlwZXMgPSBUWVBFUztcblxuICAgICRzY29wZS5zYXZlQW5kQ2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJG1kRGlhbG9nLmhpZGUoKTtcbiAgICB9O1xuICAgICRzY29wZS5hbnN3ZXIgPSBmdW5jdGlvbihhbnN3ZXIpIHtcbiAgICAgICAgJG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcbiAgICB9O1xuXG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsbGluZ1wiKTtcbiAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuICAgIH1cblxuICAgICRzY29wZS5jaGFuZ2VTZWxlY3RvciA9IGZ1bmN0aW9uKHNlbCkge1xuICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmJveC5kYXRhLCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godmFsdWUudmFsdWVzLCBmdW5jdGlvbih2YWwsIGspIHtcbiAgICAgICAgICAgICAgICB2YWxbJ3NlbGVjdG9yJ10gPSBzZWw7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAkc2NvcGUuJGVtaXQoJ3JlcXVlc3RSZWRyYXcnKVxuXG4gICAgfVxuXG5cbn1dKTtcblxuXG5hcHAuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJywgW1wiJHNjb3BlXCIsIFwiJGxvY2F0aW9uXCIsIFwiJGxvZ1wiLCBcInVzZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCAkbG9jYXRpb24sICRsb2csIHVzZXIpIHtcblx0JHNjb3BlLnRpdGxlID0gXCJMb2dpbiB0byBOZW1lYSBEYXNoYm9hcmRcIjtcblx0JHNjb3BlLmxvZ2luQnRuID0gXCJMb2dpblwiO1xuICAgIFxuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbihjcmVkKSB7XG5cdFx0JHNjb3BlLmxvZ2luQnRuID0gXCJBdXRoZW50aWNhdGluZy4uLlwiO1xuICAgICAgICAkc2NvcGUubG9naW5CdG5EaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgICAgdXNlci5hdXRoKGNyZWQpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7ICAgIFxuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24obXNnKSB7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3JfbWVzID0gbXNnO1xuICAgICAgICAgICAgJHNjb3BlLmxvZ2luQnRuID0gXCJMb2dpblwiXG4gICAgICAgICAgICAkc2NvcGUubG9naW5CdG5EaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB9KVxuICAgIH1cblxuXHRcdFxuXHRcdC8qbG9naW5BdXRoLmZldGNoVXNlcih1c2VyKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcblxuXHRcdFx0JGxvZy5pbmZvKGRhdGEpO1xuXG5cdFx0XHRpZiAoZGF0YVtcInN1Y2Nlc3NcIl0gPT0gdHJ1ZSkge1xuXHRcdFx0XHQvLyRsb2cuaW5mbyhkYXRhKTtcdFxuXHRcdFx0XHQkc2NvcGUubG9naW5CdG4gPSBcIlN1Y2Nlc3NcIjtcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoXCIvXCIpO1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnbG9nZ2VkSW4nLCB0cnVlKTtcblx0XHRcdFx0bG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2xvZ2dlZEluLnB3Jywgc2hhMjU2X2RpZ2VzdChkYXRhLnBhc3N3b3JkKSk7XHRcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHQkbG9nLmVycm9yKFwiZXJyb3IgLSBiYWQgcGFzc3dvcmRcIik7XG5cdFx0XHRcdCRzY29wZS5lcnJvcl9tZXMgPSBcIkJhZCBwYXNzd29yZFwiO1xuXHRcdFx0XHQkc2NvcGUubG9naW5CdG4gPSBcIkxvZ2luXCI7XG5cdFx0XHRcdGxvZ2luQ29ycmVjdCA9IGZhbHNlO1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnbG9nZ2VkSW4nLCBmYWxzZSk7XHRcblx0XHRcdH1cblx0XHR9KTsqL1xufV0pO1xuXG5cblxuYXBwLmNvbnRyb2xsZXIoJ3Byb2ZpbGVDb250cm9sbGVyJywgW1wiJHNjb3BlXCIsIFwidXNlclwiLCBcImFwaVwiLCBmdW5jdGlvbigkc2NvcGUsIHVzZXIsIGFwaSkge1xuICAgICRzY29wZS51c2VyID0gdXNlci5jb25maWcoKTtcblxuICAgICRzY29wZS5lZGl0VXNlciA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2codXNlcik7XG4gICAgfVxufV0pXG5cbmFwcC5jb250cm9sbGVyKCd1c2Vyc0NvbnRyb2xsZXInLCBbXCIkc2NvcGVcIiwgXCJhcGlcIiwgXCJ1c2VyXCIsIFwiJG1kRGlhbG9nXCIsIGZ1bmN0aW9uKCRzY29wZSwgYXBpLCB1c2VyLCAkbWREaWFsb2cpIHtcbiAgICB1c2VyLmdldCh0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLnVzZXJzID0gZGF0YTtcbiAgICB9KTtcblxuICAgICRzY29wZS5kZWxldGVVc2VyID0gZnVuY3Rpb24odXNlcl9pZCkge1xuICAgICAgICBjb25zb2xlLmxvZyh1c2VyX2lkKTtcbiAgICAgICAgdXNlci5kZWxldGUodXNlcl9pZCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIHVzZXIuZ2V0KHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS51c2VycyA9IGRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAkc2NvcGUuYWRkVXNlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICRzY29wZS5hZGRVc2VyQm94ID0gdHJ1ZTtcbiAgICAgICAgJG1kRGlhbG9nLnNob3coe1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ2FkZFVzZXJDb250cm9sbGVyJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvYWRkVXNlci5odG1sJyxcbiAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTp0cnVlLFxuICAgICAgICAgICAgZnVsbHNjcmVlbjogdHJ1ZSxcbiAgICAgICAgICAgIC8qbG9jYWxzOiB7XG4gICAgICAgICAgICAgICAgYm94OiAkc2NvcGUuYm94XG4gICAgICAgICAgICB9LCovXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGFuc3dlcikge1xuICAgICAgICAgICAgLy8kc2NvcGUuc2F2ZSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYW5zd2VyKVxuICAgICAgICAgICAgdXNlci5wb3N0KGFuc3dlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG5cbiAgICAgICAgICAgICAgICB1c2VyLmdldCh0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gZGF0YTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIGZ1bmN0aW9uKCkgeyAvLyBjYW5jZWxcbiAgICAgICAgICAgIC8vJHNjb3BlLmJveCA9IGFuZ3VsYXIuY29weSgkc2NvcGUuYmFja3VwTW9kZWwpO1xuICAgICAgICAgICAgLy8kc2NvcGUuYmFja3VwTW9kZWwgPSB7fTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdhZGRVc2VyQ29udHJvbGxlcicsIFtcIiRzY29wZVwiLCBcIiRtZERpYWxvZ1wiLCBmdW5jdGlvbigkc2NvcGUsICRtZERpYWxvZykge1xuXG4gICAgJHNjb3BlLnVzZXIgPSB7XG4gICAgICAgIHVzZXJuYW1lIDogJycsXG4gICAgICAgIG5hbWUgOiAnJyxcbiAgICAgICAgc3VybmFtZSA6ICcnLFxuICAgICAgICBwYXNzd29yZCA6ICcnLFxuICAgICAgICBzZXR0aW5ncyA6IFtdXG4gICAgfVxuICAgICRzY29wZS5zYXZlQW5kQ2xvc2UgPSBmdW5jdGlvbih1c2VyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXIpXG4gICAgICAgICRtZERpYWxvZy5oaWRlKHVzZXIpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oYm94KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsbGluZ1wiKTtcbiAgICAgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuICAgIH1cbn1dKVxuXG5hcHAuZGlyZWN0aXZlKCdncmlkc3RlckR5bmFtaWNIZWlnaHQnLCBbXCIkdGltZW91dFwiLCBmdW5jdGlvbiAoJHRpbWVvdXQpIHtcblxuICAgIHZhciBkaXJlY3RpdmUgPSB7XG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBpdGVtOiBcIj1cIiAvL2dyaWRzdGVyIGl0ZW1cbiAgICAgICAgfSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgICAgcmVzdHJpY3Q6ICdBJ1xuICAgIH07XG4gICAgcmV0dXJuIGRpcmVjdGl2ZTtcblxuICAgIGZ1bmN0aW9uIGxpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpIHsgXG4gICAgICAgICAgICB2YXIgcm93SGVpZ2h0T3B0aW9uID0gMjcwOyAvLyBDaGFuZ2UgdGhpcyB2YWx1ZSB3aXRoIHlvdXIgb3duIHJvd0hlaWdodCBvcHRpb25cbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSByb3dIZWlnaHRPcHRpb24gKiBzY29wZS5pdGVtLnNpemVZO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhzY29wZS5pdGVtLnRpdGxlKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJuZXdWYWw6IFwiICsgbmV3VmFsICsgXCIgICAgIGhlaWdodDogXCIgKyBoZWlnaHQpXG4gICAgICAgICAgICBpZihuZXdWYWwgPiBoZWlnaHQpe1xuICAgICAgICAgICAgICAgIHZhciBkaXYgPSBNYXRoLmZsb29yKG5ld1ZhbCAvIHJvd0hlaWdodE9wdGlvbik7XG4gICAgICAgICAgICAgICAgLy9kaXYrKztcbiAgICAgICAgICAgICAgICBzY29wZS5pdGVtLnNpemVZID0gZGl2OyBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG59XSk7XG5cbi8vIEZpbHRlciB0byBjb252ZXJ0IElERUEgZm9ybWF0IGZyb20gTW9uZ29EQiB0byBzdGFuZGFyZGl6ZWQgSURFQSBmb3JtYXRcbmFwcC5maWx0ZXIoJ2lkZWEnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgdmFyIHJlcyA9IHt9O1xuXG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaChpbnB1dCwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgaWYgKGtleSAhPSAnX2lkJykge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZVsnJGRhdGUnXSkge1xuICAgICAgICAgICAgICAgICAgICByZXNba2V5XSA9IG5ldyBEYXRlKHZhbHVlWyckZGF0ZSddKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTkpICsgJ1onO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbn0pO1xuXG5hcHAuZmlsdGVyKCdqc29uMmh0bWwnLCBbXCIkc2NlXCIsIFwiJGZpbHRlclwiLCBmdW5jdGlvbigkc2NlLCAkZmlsdGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBodG1sID0gXCJcIjtcblxuICAgICAgICBhbmd1bGFyLmZvckVhY2goaW5wdXQsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgIT0gXCJfaWRcIikge1xuICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXY+XCI7XG5cbiAgICAgICAgICAgIC8vIFRoZSB0dXBsZSBpcyBuZXN0ZWRcbiAgICAgICAgICAgIGlmICgodHlwZW9mIHZhbHVlKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIGtleSkgIT0gJ251bWJlcicgJiYga2V5ICE9IFwiJGRhdGVcIilcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxlbT5cIiArIGtleSArIFwiPC9lbT46IFwiO1xuICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPVxcXCJzdWJcXFwiPlwiICsgJGZpbHRlcignanNvbjJodG1sJykodmFsdWUpICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlb2Yga2V5ICE9ICdudW1iZXInKSAmJiBrZXkgIT0gXCIkZGF0ZVwiKVxuICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArIFwiPGVtPlwiICsga2V5ICsgXCI8L2VtPjogXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgZGF0ZSAoSSBrbm93LCBpdCBpcyBzb29vb28gZGlydHkpXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMTAwMDAwMDAwMDAwMClcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgJGZpbHRlcignZGF0ZScpKHZhbHVlLCd5eXl5L01NL2RkIEg6bW06c3MnKSArIFwiPC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgdmFsdWUgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBcygnaHRtbCcsIGh0bWwpO1xuICAgIH0gICAgIFxufV0pO1xuXG5cbmFwcC5zZXJ2aWNlKCdhcGknLCBbXCIkaHR0cFwiLCBcIiRsb2dcIiwgXCIkbWRUb2FzdFwiLCBcIiRsb2NhbFN0b3JhZ2VcIiwgXCJQSUVDSEFSVFwiLCBcIkNPTkZJR1wiLCBmdW5jdGlvbigkaHR0cCwgJGxvZywgJG1kVG9hc3QsICRsb2NhbFN0b3JhZ2UsIFBJRUNIQVJULCBDT05GSUcpIHtcblxuXHR2YXIgYWRkciA9IENPTkZJR1tcImhvc3RcIl0gKyBcIjpcIiArIENPTkZJR1tcInBvcnRcIl0gKyBcIi9cIiArIENPTkZJR1tcInZlcnNpb25cIl0gKyBcIi9ldmVudHMvXCI7XG5cbiAgICB0aGlzLmF1dGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbmZpZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9iZW5lZml6aW8ubGliZXJvdXRlci5vcmc6NTU1NS9jb25maWcnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkciA9IGRhdGEuaG9zdCArICc6JyArIGRhdGEucG9ydCArIGRhdGEuZXZlbnRzO1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVsnY29uZmlnJ10gPSBkYXRhO1xuICAgICAgICAgICAgYWxlcnQoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24odXJsLCBwYXJhbXMsIGluZm8sIGNhY2hlKSB7XG5cdFx0cmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkdFVFwiLFxuICAgICAgICAgICAgcGFyYW1zIDogcGFyYW1zLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB0aGlzLmF1dGgoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRGF0YSBzdWNjZXNzdWxseSBsb2FkZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJzdWNjZXNzLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhY2hlKVxuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbJ3RpbWVzdGFtcCddID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRsb2cuZXJyb3IoJ0Nhbm5vdCBmZXRjaCBkYXRhJyk7XG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2Fubm90IGxvYWQgZGF0YScpXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgIC50aGVtZShcImVycm9yLXRvYXN0XCIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMucG9zdCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgaW5mbykge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChhZGRyICsgdXJsLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0RhdGEgc3VjY2Vzc2Z1bGx5IGxvYWRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcInN1Y2Nlc3MtdG9hc3RcIilcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcdCRsb2cuZXJyb3IoJ0Nhbm5vdCBmZXRjaCBkYXRhJyk7XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2Fubm90IGZldGNoIGRhdGEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMucHV0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBpbmZvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wdXQoYWRkciArIHVybCwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdEYXRhIHN1Y2Nlc3NmdWxseSBsb2FkZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJzdWNjZXNzLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhOyAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXHQkbG9nLmVycm9yKCdDYW5ub3QgZmV0Y2ggZGF0YScpO1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0Nhbm5vdCBmZXRjaCBkYXRhJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cblxufV0pO1xuXG5cblxuYXBwLmRpcmVjdGl2ZShcInNpZGViYXJNZW51XCIsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuXHRcdFx0c2VjdGlvbjogJz0nXG5cdFx0fSxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpZGViYXItbWVudS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogW1wiJHNjb3BlXCIsIFwiJG1kU2lkZW5hdlwiLCBcIiRsb2NhdGlvblwiLCBcIk1FTlVcIiwgXCJ1c2VyXCIsIGZ1bmN0aW9uKCRzY29wZSwgJG1kU2lkZW5hdiwgJGxvY2F0aW9uLCBNRU5VLCB1c2VyKSB7XG4gICAgICAgICAgICAkc2NvcGUubWVudSA9IE1FTlU7XG5cbiAgICAgICAgICAgICRzY29wZS5pc0FjdGl2ZSA9IGZ1bmN0aW9uKGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4oJyMnICsgJGxvY2F0aW9uLnBhdGgoKSA9PSBjdXJyZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmNoYW5nZU1vZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ3JlcUNoYW5nZU1vZGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmVuYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgICRzY29wZS50b2dnbGVJdGVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZUJ0biA9IFwidG9nZ2xlZFwiO1xuICAgICAgICAgICAgfTtcblxuXG4gICAgICAgICAgICAkc2NvcGUuY2xvc2VMZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJG1kU2lkZW5hdignbGVmdCcpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHVzZXIubG9nb3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgXG4gXG4gICAgICAgIH1dXG5cdH07XG59KTtcblxuYXBwLmRpcmVjdGl2ZShcInRvcGJhck1lbnVcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdFx0c2NvcGU6IHtcblx0XHRcdHNlY3Rpb246ICc9J1xuXHRcdH0sXG5cdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy90b3BiYXItbWVudS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlciA6IFtcIiRzY29wZVwiLCBcIiRtZFNpZGVuYXZcIiwgZnVuY3Rpb24oJHNjb3BlLCAkbWRTaWRlbmF2KSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xlTGVmdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRtZFNpZGVuYXYoJ2xlZnQnKS50b2dnbGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV1cblx0fTtcbn0pO1xuXG5cbmFwcC5kaXJlY3RpdmUoXCJib3hlc1wiLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0XHRzY29wZToge1xuXHRcdFx0c2VjdGlvbjogJz0nXG5cdFx0fSxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2JveGVzLmh0bWwnXG5cdH07XG59KTtcblxuXG5cbmFwcC5zZXJ2aWNlKCd1c2VyJywgW1wiJGxvY2FsU3RvcmFnZVwiLCBcIiRodHRwXCIsIFwiJG1kVG9hc3RcIiwgXCIkbG9jYXRpb25cIiwgXCJDT05GSUdcIiwgZnVuY3Rpb24oJGxvY2FsU3RvcmFnZSwgJGh0dHAsICRtZFRvYXN0LCAkbG9jYXRpb24sIENPTkZJRyl7XG4gICAgdmFyIGNhY2hlID0gbnVsbDtcblxuICAgIHZhciBkYXNoYm9hcmQgPSBbXTtcblxuXHR2YXIgYWRkciA9IENPTkZJR1tcImhvc3RcIl0gKyBcIjpcIiArIENPTkZJR1tcInBvcnRcIl0gKyBcIi9cIiArIENPTkZJR1tcInZlcnNpb25cIl0gKyBcIi91c2Vycy9cIjtcblxuICAgIHRoaXMuY29uZmlnID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkbG9jYWxTdG9yYWdlW1wiZGFzaGJvYXJkXCJdO1xuICAgIH1cblxuICAgIHRoaXMuand0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkbG9jYWxTdG9yYWdlW1wiand0XCJdO1xuICAgIH1cblxuICAgIHRoaXMuYXV0aCA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYWRkcik7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGFkZHIgKyBcImF1dGhcIiwgYW5ndWxhci50b0pzb24odXNlcikpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXSA9IGRhdGFbXCJqd3RcIl07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRPRE86IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb25maWcgYW5kIGp3dCA+PiBkdXBsaWNpdHlcbiAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1wiZGFzaGJvYXJkXCJdO1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXSA9IGRhdGFbXCJzZXR0aW5nc1wiXTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cylcbiAgICAgICAgICAgIC8vIExldCBpdCBiZSBoYW5kbGVkIGJ5IGNvbnRyb2xsZXJcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB0aGlzLnB1dCA9IGZ1bmN0aW9uKGRhdGEsIGluZm8pIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIsIFxuICAgICAgICAgICAgbWV0aG9kIDogXCJQVVRcIixcbiAgICAgICAgICAgIGRhdGEgOiBhbmd1bGFyLnRvSnNvbihkYXRhKSxcbiAgICAgICAgICAgIGhlYWRlcnMgOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nIDogJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnVXNlciBzZXR0aW5ncyB1cGRhdGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwic3VjY2Vzcy10b2FzdFwiKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTsgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihtc2csIHN0YXR1cykge1xuICAgICAgICAgICAgXHQkbG9nLmVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZyBzZW5kaW5nIHVzZXIgZGF0YScpO1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1NvbWV0aGluZyB3ZW50IHdyb25nJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgLy8gTG9nb3V0IHVzZXJcbiAgICAvLyBSZW1vdmUgSldUIGZyb20gbG9jYWxTdG9yYWdlIGFuZCBkZWxldGUgc2Vzc2lvbiBvbiBzZXJ2ZXJcbiAgICB0aGlzLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdXNlciA9ICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcblxuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgdXJsIDogYWRkciArIFwibG9nb3V0XCIsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJ0aW1lc3RhbXBcIl07XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdMb2dvdXQgc3VjY2Vzc2Z1bGwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIG1zZykge1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKFwiL2xvZ2luXCIpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJ0aW1lc3RhbXBcIl07XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdMb2dvdXQgZmFpbGVkIG9uIHNlcnZlciBzaWRlLCBidXQgeW91IGFyZSBsb2dnZWQgb3V0JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKGFsbHVzZXJzKSB7XG4gICAgICAgIHZhciB1c2VyID0gJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFsbHVzZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgICAgIHVybCA6IGFkZHIsXG4gICAgICAgICAgICAgICAgbWV0aG9kIDogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzIDoge1xuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB1c2VyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIG1zZykge1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxldCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoXCJDYW5ub3QgZmV0Y2ggdXNlcnMgZnJvbSBkYXRhYmFzZVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICB0aGlzLnBvc3QgPSBmdW5jdGlvbih1c2VyRGF0YSkge1xuICAgICAgICB2YXIgdXNlciA9ICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICB1cmwgOiBhZGRyLFxuICAgICAgICAgICAgbWV0aG9kIDogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhIDogYW5ndWxhci50b0pzb24odXNlckRhdGEpLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB1c2VyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIG1zZykge1xuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAuc2ltcGxldCgpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChcIkNhbm5vdCBjcmVhdGUgdXNlclwiKVxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAgdGhpcy5kZWxldGUgPSBmdW5jdGlvbih1c2VySWQpIHtcbiAgICAgICAgdmFyIHVzZXIgPSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgIGNvbnNvbGUubG9nKHVzZXJJZClcbiAgICAgICAgXG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICB1cmwgOiBhZGRyLFxuICAgICAgICAgICAgbWV0aG9kIDogXCJERUxFVEVcIixcbiAgICAgICAgICAgIHBhcmFtcyA6IHtcInVzZXJJZFwiIDogdXNlcklkfSxcbiAgICAgICAgICAgIGhlYWRlcnMgOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nIDogdXNlclxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yLCBtc2cpIHtcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgLnNpbXBsZXQoKVxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoXCJDYW5ub3QgZGVsZXRlIHVzZXJcIilcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgIClcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxufV0pO1xuIiwiYXBwLmNvbnN0YW50KCdDT05GSUcnLCB7XG4gICAgXCJob3N0XCIgOiBcImh0dHBzOi8vYmVuZWZpemlvLmxpYmVyb3V0ZXIub3JnXCIsXG4gICAgXCJwb3J0XCIgOiBcIjU1NTVcIixcbiAgICBcInZlcnNpb25cIiA6IFwidjJcIlxufSk7XG4iLCJhcHAuY29uc3RhbnQoJ0FVVEhfRVZFTlRTJywge1xuICBsb2dpblN1Y2Nlc3M6ICdhdXRoLWxvZ2luLXN1Y2Nlc3MnLFxuICBsb2dpbkZhaWxlZDogJ2F1dGgtbG9naW4tZmFpbGVkJyxcbiAgbG9nb3V0U3VjY2VzczogJ2F1dGgtbG9nb3V0LXN1Y2Nlc3MnLFxuICBzZXNzaW9uVGltZW91dDogJ2F1dGgtc2Vzc2lvbi10aW1lb3V0JyxcbiAgbm90QXV0aGVudGljYXRlZDogJ2F1dGgtbm90LWF1dGhlbnRpY2F0ZWQnLFxuICBub3RBdXRob3JpemVkOiAnYXV0aC1ub3QtYXV0aG9yaXplZCdcbn0pO1xuXG5hcHAuY29uc3RhbnQoJ0NBVEVHT1JJRVMnLCBbIFwiYW55XCIsIFwiUmVjb24uU2Nhbm5pbmdcIiwgXCJBdHRlbXB0LkxvZ2luXCIsIFwiQXZhaWxhYmlsaXR5LkRvU1wiIF0pO1xuYXBwLmNvbnN0YW50KCdQUk9UT0NPTFMnLCBbIFwidGNwXCIsIFwiZG5zXCIsIFwidWRwXCIgXSk7XG5hcHAuY29uc3RhbnQoJ1RZUEVTJywgW1wiYmFyY2hhcnRcIiwgXCJwaWVjaGFydFwiLCBcInRvcFwiLCBcInN1bVwiXSlcblxuYXBwLmNvbnN0YW50KCdQSUVDSEFSVCcsIHsgXG4gICAgb3B0aW9uczoge1xuICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgdHlwZTogJ3BpZUNoYXJ0JyxcbiAgICAgICAgICAgIGhlaWdodDogMzc1LFxuICAgICAgICAgICAgLy9oZWlnaHQ6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnZkMycpLm9mZnNldEhlaWdodCk7IHJldHVybiBOdW1iZXIoNDI1KX0sXG4gICAgICAgICAgICB4OiBmdW5jdGlvbihkKXtyZXR1cm4gZC5rZXlbMF07fSxcbiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGQpe3JldHVybiBkLng7fSxcbiAgICAgICAgICAgIHNob3dMYWJlbHM6IHRydWUsXG4gICAgICAgICAgICBkb251dCA6IHRydWUsXG4gICAgICAgICAgICBwYWRBbmdsZSA6IDAuMDAsXG4gICAgICAgICAgICBjb3JuZXJSYWRpdXMgOiAxLFxuICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICBsYWJlbFRocmVzaG9sZDogMCxcbiAgICAgICAgICAgIC8vY29sb3I6IFsnYmx1ZScsICdncmVlbicsICd5ZWxsb3cnXSxcbiAgICAgICAgICAgIC8vY29sb3I6IFtcIiM0YWM0ZjNcIiwgXCIjOTZkNmJkXCIsIFwiIzBhNTk5ZFwiLCBcIiM4YmEyYzBcIiwgXCIjZjdmY2ZkXCIsXCIjZTVmNWY5XCIsXCIjY2NlY2U2XCIsXCIjOTlkOGM5XCIsXCIjNjZjMmE0XCIsXCIjNDFhZTc2XCIsXCIjMjM4YjQ1XCIsXCIjMDA2ZDJjXCIsXCIjMDA0NDFiXCJdLFxuICAgICAgICAgICAgLy9jb2xvcjogW1wiIzIxOTZGM1wiLCBcIiMwMDk2ODhcIiwgIFwiIzY3M0FCN1wiLCAgXCIjRkY5ODAwXCJdLCBcbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDUsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICBib3R0b206IC0xNSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWdlbmRQb3NpdGlvbiA6IFwidG9wXCIsXG4gICAgICAgICAgICB0b29sdGlwQ29udGVudCA6IGZ1bmN0aW9uKGtleSwgeCwgeSwgZSwgZ3JhcGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhncmFwaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnT2xhbGFsYSEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGllIDoge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vY2hhcnRDbGljazogZnVuY3Rpb24oZSkge2NvbnNvbGUubG9nKGUpfSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gMTAwMCo2MCo2MCoyNCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlLnNldEhvdXJzKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRNaW51dGVzKDApXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnIy9ldmVudHM/ZmlsdGVyJmRhdGU9JyArIGRhdGUudG9JU09TdHJpbmcoKSArICcmZnJvbT0nICsgbmV3IERhdGUoKS5nZXRIb3VycygpICsgJzonICsgbmV3IERhdGUoKS5nZXRNaW51dGVzKCkgKyAnJmNhdGVnb3J5PScgKyBlLmRhdGEua2V5WzBdfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50RGJsQ2xpY2s6IGZ1bmN0aW9uKGUpIHtjb25zb2xlLmxvZyhcImVsZW1lbnQgZG91YmxlIGNsaWNrXCIpfSxcbiAgICAgICAgICAgICAgICAgICAgLy9lbGVtZW50TW91c2VvdmVyOiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlb3ZlclwiKX0sXG4gICAgICAgICAgICAgICAgICAgIC8vZWxlbWVudE1vdXNlb3V0OiBmdW5jdGlvbihlKSB7Y29uc29sZS5sb2coXCJlbGVtZW50IG1vdXNlIG91dFwiKX0gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxhYmVsVHlwZSA6IFwicGVyY2VudFwiLFxuICAgICAgICAgICAgICAgIGxhYmVsc091dHNpZGUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAvL3N0YXJ0QW5nbGUgOiBmdW5jdGlvbihkKSB7IHJldHVybiBkLnN0YXJ0QW5nbGUvMiAtTWF0aC5QSS8yIH0sXG4gICAgICAgICAgICAgICAgLy9lbmRBbmdsZSA6IGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZW5kQW5nbGUvMiAtTWF0aC5QSS8yIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cbmFwcC5jb25zdGFudCgnQVJFQScsIHtcbiAgICBvcHRpb25zIDoge1xuICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgdHlwZTogJ211bHRpQmFyQ2hhcnQnLFxuICAgICAgICAgICAgaGVpZ2h0OiA0NTAsXG4gICAgICAgICAgICBtYXJnaW4gOiB7XG4gICAgICAgICAgICAgICAgdG9wOiAzMCxcbiAgICAgICAgICAgICAgICByaWdodDogMjAsXG4gICAgICAgICAgICAgICAgYm90dG9tOiAxMDAsXG4gICAgICAgICAgICAgICAgbGVmdDogNTBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB4OiBmdW5jdGlvbihkKSB7IHJldHVybiBkLnggfSxcbiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICAgICAgaWYgKGQuc2VsZWN0b3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZC5GbG93Q291bnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihkLkNvdW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1c2VWb3Jvbm9pOiBmYWxzZSxcbiAgICAgICAgICAgIGNsaXBFZGdlOiB0cnVlLFxuICAgICAgICAgICAgZHVyYXRpb246IDEwMCxcbiAgICAgICAgICAgIHVzZUludGVyYWN0aXZlR3VpZGVsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgIHRvb2x0aXBDb250ZW50IDogZnVuY3Rpb24oa2V5LCB4LCB5LCBlLCBncmFwaCkge3JldHVybihcIkhhXCIpO30sXG4gICAgICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgICAgIHNob3dNYXhNaW46IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRpY2tGb3JtYXQ6IGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLnRpbWUuZm9ybWF0KCclbS8lZCAlSDolTScpKG5ldyBEYXRlKGQpKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcm90YXRlTGFiZWxzIDogLTQ1LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgc2hvd01heE1pbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdGlja0Zvcm1hdDogZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoJ3MnKShkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSwgIFxuICAgICAgICAgICAgbXVsdGliYXI6IHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCA6IHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsaWNrOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGUuZGF0YS54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZS5zZXRIb3VycygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUuc2V0TWludXRlcygwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcjL2V2ZW50cz9maWx0ZXImZGF0ZT0nICsgZGF0ZS50b0lTT1N0cmluZygpICsgJyZmcm9tPScgKyAoXCIwXCIgKyBob3Vycykuc2xpY2UoLTIpICsgJzonICsgKFwiMFwiICsgbWludXRlcykuc2xpY2UoLTIpICsgJyZjYXRlZ29yeT0nICsgZS5kYXRhLmtleSArICcmZGlyPTEnO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5cblxuYXBwLmNvbnN0YW50KFwiTUVOVVwiLCBbXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIkRhc2hib2FyZFwiLFxuICAgICAgICBcImxpbmtcIiA6IFwiIy9cIlxuXHRcdC8qXCJpdGVtc1wiIDogW1xuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIlVzZXJzXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwidXNlclwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIlxuXHRcdFx0fVxuXHRcdF0qL1xuXHR9LFxuXHR7XG5cdFx0XCJ0aXRsZVwiIDogXCJFdmVudHNcIixcblx0XHRcImxpbmtcIiBcdDogXCIjL2V2ZW50c1wiXG5cdH0sXG5cdC8qe1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMjNcIixcblx0XHRcIml0ZW1zXCIgOiBbXG5cdFx0XHR7XG5cdFx0XHRcdFwidGl0bGVcIiA6IFwiVXNlcnNcIixcblx0XHRcdFx0XCJsaW5rXCIgXHQ6IFwic2V0dGluZ3NcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJNeSBwcm9maWxlXCIsXG5cdFx0XHRcdFwibGlua1wiXHQ6IFwicHJvZmlsZVwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCJwcm9maWxlXCJcblx0XHRcdH1cblx0XHRdXG5cblx0fSxcblx0e1xuXHRcdFwidGl0bGVcIiA6IFwiQW5hbHl0aWNzMTIzXCIsXG5cdFx0XCJsaW5rXCIgXHQ6IFwibG9naW5cIlxuXHR9LCovXG5cdHtcblx0XHRcInRpdGxlXCIgOiBcIlNldHRpbmdzXCIsXG5cdFx0XCJpdGVtc1wiIDogW1xuICAgICAgICAgICAge1xuXHRcdFx0XHRcInRpdGxlXCIgOiBcIk15IHByb2ZpbGVcIixcblx0XHRcdFx0XCJsaW5rXCJcdDogXCIjL3NldHRpbmdzL3Byb2ZpbGVcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJ0aXRsZVwiIDogXCJVc2Vyc1wiLFxuXHRcdFx0XHRcImxpbmtcIiBcdDogXCIjL3NldHRpbmdzL3VzZXJzXCJcblx0XHRcdH0sXG5cdFx0XVxuXHR9XG5dKTtcbiIsImFwcC5jb250cm9sbGVyKCdldmVudENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcywgJGh0dHAsIGFwaSkge1xuXG4gICAgICAgICRzY29wZS5pZCA9ICRyb3V0ZVBhcmFtcztcblxuICAgICAgICAkc2NvcGUuZ2VvID0gW107XG5cbiAgICAgICAgJHNjb3BlLmJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LmJhY2soKVxuICAgICAgICB9XG5cbiAgICAgICAgYXBpLmdldCgnaWQvJyArICRyb3V0ZVBhcmFtc1snaWQnXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuZGF0YSA9IGRhdGE7XG5cbiAgICAgICAgICAgIC8vdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcblxuICAgICAgICAgICAgaWYgKCgkc2NvcGUuZGF0YS5Tb3VyY2UgIT0gdW5kZWZpbmVkICYmICRzY29wZS5kYXRhLlRhcmdldCAhPSB1bmRlZmluZWQpICYmIFxuICAgICAgICAgICAgICAgICgkc2NvcGUuZGF0YS5Tb3VyY2VbMF0uSVA0ICYmICRzY29wZS5kYXRhLlRhcmdldFswXS5JUDQpKSB7XG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCdodHRwOi8vZnJlZWdlb2lwLm5ldC9qc29uLycgKyAkc2NvcGUuZGF0YS5UYXJnZXRbMF0uSVA0WzBdKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJ3R5cGUnXSA9IFwiVGFyZ2V0XCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW8ucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhkYXRhLmxhdGl0dWRlLCBkYXRhLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vYm91bmRzLmV4dGVuZChsYXRsbmcpO1xuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9mcmVlZ2VvaXAubmV0L2pzb24vJyArICRzY29wZS5kYXRhLlNvdXJjZVswXS5JUDRbMF0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhWyd0eXBlJ10gPSBcIlNvdXJjZVwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VvLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIGxhdGxuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoZGF0YS5sYXRpdHVkZSwgZGF0YS5sb25naXR1ZGUpO1xuICAgICAgICAgICAgICAgICAgICAvL2JvdW5kcy5leHRlbmQobGF0bG5nKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoJHNjb3BlLmRhdGEuU291cmNlID09IHVuZGVmaW5lZCB8fCAkc2NvcGUuZGF0YS5Tb3VyY2VbMF0uSVA0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICRodHRwLmdldCgnaHR0cDovL2ZyZWVnZW9pcC5uZXQvanNvbi8nICsgJHNjb3BlLmRhdGEuVGFyZ2V0WzBdLklQNFswXSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFbJ3R5cGUnXSA9IFwiVGFyZ2V0XCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5nZW8ucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9mcmVlZ2VvaXAubmV0L2pzb24vJyArICRzY29wZS5kYXRhLlNvdXJjZVswXS5JUDRbMF0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhWyd0eXBlJ10gPSBcIlNvdXJjZVwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2VvLnB1c2goZGF0YSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgXG5cbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2V2ZW50c0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9jYXRpb24sIGFwaSkge1xuICAgICRzY29wZS5maWx0ZXIgPSB7XG4gICAgICAgIFwiY2F0ZWdvcnlcIiA6IFwiXCIsICAgIC8vIENhdGVnb3J5XG4gICAgICAgIFwic3JjX2lwXCIgOiBcIlwiLCAgICAgIC8vIFNvdXJjZSBJUFxuICAgICAgICBcInRydF9pcFwiIDogXCJcIiwgICAgICAvLyBUYXJnZXQgSVBcbiAgICAgICAgXCJkZXNjXCIgOiBcIlwiLCAgICAgICAgLy8gRGVzY3JpcHRpb25cbiAgICAgICAgXCJmbG93c19mcm9tXCIgOiBcIlwiLCAgLy8gRmxvd0NvdW50XG4gICAgICAgIFwiZmxvd3NfdG9cIiA6IFwiXCIsICAgIC8vIEZsb3dDb3VudFxuICAgICAgICBcIml0ZW1zXCIgOiAxMDAsICAgICAgLy8gTGltaXQgbnVtYmVyIG9mIGRpc3BsYXllZCBpdGVtc1xuICAgIH07XG4gICAgJHNjb3BlLnF1ZXJ5ID0ge1xuICAgICAgICBcImZyb21cIiA6IFwiXCIsXG4gICAgICAgIFwidG9cIiA6IFwiXCIsXG4gICAgICAgIFwiZGF0ZVwiIDogbmV3IERhdGUoKSxcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiIDogXCJcIixcbiAgICAgICAgXCJjYXRlZ29yeVwiIDogXCJcIixcbiAgICAgICAgXCJvcmRlcmJ5XCIgOiBcIkRldGVjdFRpbWVcIixcbiAgICAgICAgXCJkaXJcIiA6IDEsXG4gICAgICAgIFwibGltaXRcIiA6IDEwMFxuICAgIH1cblxuICAgICRzY29wZS5vcmRlckJ5ID0gW1wiRGV0ZWN0VGltZVwiLCBcIkNhdGVnb3J5XCIsIFwiRGVzY3JpcHRpb25cIiwgXCJGbG93Q291bnRcIl07XG4gICAgJHNjb3BlLnNlYXJjaFRleHQgPSBcIlwiO1xuXG4gICAgJHNjb3BlLnF1ZXJ5U2VhcmNoID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IHF1ZXJ5ID8gJHNjb3BlLm9yZGVyQnkuZmlsdGVyKCBjcmVhdGVGaWx0ZXJGb3IocXVlcnkpICkgOiBbXTtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbHRlckZvcihxdWVyeSkge1xuICAgICAgdmFyIGxvd2VyY2FzZVF1ZXJ5ID0gYW5ndWxhci5sb3dlcmNhc2UocXVlcnkpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGZpbHRlckZuKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiAoJHNjb3BlLm9yZGVyQnkuaW5kZXhPZihsb3dlcmNhc2VRdWVyeSkgPT09IDApO1xuICAgICAgfTtcbiAgICB9XG5cbiAgIFxuXG4gICAgJHNjb3BlLmRhdGEgPSBbXTtcbiAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiO1xuICAgICRzY29wZS5uZXh0QnV0dG9uID0gXCJMb2FkIG5leHQgMTAwIGl0ZW1zXCI7XG4gICAgY29uc29sZS5sb2coJHNjb3BlLnF1ZXJ5LmRhdGUpO1xuICAgICRzY29wZS5hY3RpdmVGaWx0ZXIgPSAkbG9jYXRpb24uc2VhcmNoKCkuZmlsdGVyO1xuXG4gICAgJHNjb3BlLnN3aXRjaERpciA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICBpZiAodmFsID09IC0xIHx8IHZhbCkge1xuICAgICAgICAgICAgJHNjb3BlLmRpclZhbCA9IFwiRGVzY2VuZGluZ1wiO1xuICAgICAgICAgICAgJHNjb3BlLnF1ZXJ5LmRpciA9IC0xO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNjb3BlLmRpclZhbCA9IFwiQXNjZW5kaW5nXCI7XG4gICAgICAgICAgICAkc2NvcGUucXVlcnkuZGlyID0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5zd2l0Y2hEaXIoJGxvY2F0aW9uLnNlYXJjaCgpLmRpcik7XG5cbiAgICAkc2NvcGUubG9hZE5leHQgPSBmdW5jdGlvbih0aW1lKSB7XG4gICAgICAgICRzY29wZS5uZXh0QnV0dG9uID0gXCJMb2FkaW5nLi4uXCI7XG5cbiAgICAgICAgaWYgKCRsb2NhdGlvbi5zZWFyY2goKS5maWx0ZXIpIHtcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IGFuZ3VsYXIuY29weSgkc2NvcGUucXVlcnkpO1xuICAgICAgICAgICAgcXVlcnkuZnJvbSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgICAgICAgICAgcXVlcnkuZGlyID0gMTtcblxuICAgICAgICAgICAgaWYgKHF1ZXJ5LnRvKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvID0gcXVlcnkudG8uc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICB2YXIgdG9fZGF0ZSA9IG5ldyBEYXRlKHF1ZXJ5LmRhdGUpO1xuICAgICAgICAgICAgICAgIHRvX2RhdGUuc2V0SG91cnModG9fZGF0ZS5nZXRIb3VycygpICsgdG9bMF0pO1xuICAgICAgICAgICAgICAgIHRvX2RhdGUuc2V0TWludXRlcyh0b1sxXSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvX2RhdGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBxdWVyeS50byA9IHRvX2RhdGU7XG5cblxuICAgICAgICAgICAgYXBpLmdldCgncXVlcnknLCBxdWVyeSwgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgZm9yKGl0ZW0gaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YS5wdXNoKGRhdGFbaXRlbV0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5uZXh0QnV0dG9uID0gXCJMb2FkIG5leHQgMTAwIGl0ZW1zXCI7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIsIG1zZykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5leHRCdXR0b24gPSBcIkxvYWQgbmV4dCAxMDAgaXRlbXNcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgXCJ0b1wiIDogbmV3IERhdGUodGltZSksXG4gICAgICAgICAgICAgICAgXCJkaXJcIiA6IC0xXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFwaS5nZXQoJ3F1ZXJ5JywgcXVlcnksIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGZvcihpdGVtIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRhdGEucHVzaChkYXRhW2l0ZW1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLm5leHRCdXR0b24gPSBcIkxvYWQgbmV4dCAxMDAgaXRlbXNcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyLCBtc2cpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICRzY29wZS5uZXh0QnV0dG9uID0gXCJMb2FkIG5leHQgMTAwIGl0ZW1zXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvYWRJdGVtcyA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICAgICRzY29wZS5sb2FkYnRuID0gXCJMb2FkaW5nLi4uXCI7XG4gICAgICAgIHZhciBmcm9tID0gcXVlcnkuZnJvbS5zcGxpdCgnOicpO1xuICAgICAgICB2YXIgZnJvbV9kYXRlID0gbmV3IERhdGUocXVlcnkuZGF0ZSk7XG4gICAgICAgIGZyb21fZGF0ZS5zZXRIb3Vycyhmcm9tX2RhdGUuZ2V0SG91cnMoKSArIGZyb21bMF0pO1xuICAgICAgICBmcm9tX2RhdGUuc2V0TWludXRlcyhmcm9tWzFdKTtcbiAgICAgICAgXG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2ZpbHRlcicsIHRydWUpO1xuICAgICAgICAkbG9jYXRpb24uc2VhcmNoKCdmcm9tJywgcXVlcnkuZnJvbSk7XG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ2RhdGUnLCBxdWVyeS5kYXRlKTtcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnbGltaXQnLCBxdWVyeS5saW1pdCk7XG4gICAgICAgICRsb2NhdGlvbi5zZWFyY2goJ29yZGVyYnknLCBxdWVyeS5vcmRlcmJ5KTtcbiAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnZGlyJywgcXVlcnkuZGlyKTtcblxuICAgICAgICBcblxuICAgICAgICBpZiAocXVlcnkudG8pIHtcbiAgICAgICAgICAgIHZhciB0byA9IHF1ZXJ5LnRvLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICB2YXIgdG9fZGF0ZSA9IG5ldyBEYXRlKHF1ZXJ5LmRhdGUpO1xuICAgICAgICAgICAgdG9fZGF0ZS5zZXRIb3Vycyh0b19kYXRlLmdldEhvdXJzKCkgKyB0b1swXSk7XG4gICAgICAgICAgICB0b19kYXRlLnNldE1pbnV0ZXModG9bMV0pO1xuICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgndG8nLCBxdWVyeS50byk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdG9fZGF0ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocXVlcnkuZGVzY3JpcHRpb24gIT0gXCJcIikge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnZGVzY3JpcHRpb24nLCBxdWVyeS5kZXNjcmlwdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBxdWVyeS5kZXNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocXVlcnkuY2F0ZWdvcnkgIT0gXCJcIikge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnNlYXJjaCgnY2F0ZWdvcnknLCBxdWVyeS5jYXRlZ29yeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBxdWVyeS5jYXRlZ29yeSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VuZCA9IHtcbiAgICAgICAgICAgIFwiZnJvbVwiIDogZnJvbV9kYXRlLFxuICAgICAgICAgICAgXCJ0b1wiIDogdG9fZGF0ZSxcbiAgICAgICAgICAgIFwiY2F0ZWdvcnlcIiA6IHF1ZXJ5LmNhdGVnb3J5LFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiIDogcXVlcnkuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBcImxpbWl0XCIgOiBxdWVyeS5saW1pdCxcbiAgICAgICAgICAgIFwib3JkZXJieVwiIDogcXVlcnkub3JkZXJieSxcbiAgICAgICAgICAgIFwiZGlyXCIgOiBxdWVyeS5kaXJcbiAgICAgICAgfVxuICAgICAgICBhcGkuZ2V0KCdxdWVyeScsIHNlbmQsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0JHNjb3BlLmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgJHNjb3BlLmxvYWRidG4gPSBcIkxvYWRcIlxuXHQgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9hZGJ0biA9IFwiTG9hZFwiOyAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGlmICgkbG9jYXRpb24uc2VhcmNoKCkuZmlsdGVyKSB7XG4gICAgICAgIC8vIFF1ZXJ5IGZpbHRlciBpcyBzZXQsIGFwcGx5IGl0XG4gICAgICAgICRzY29wZS5xdWVyeSA9ICRsb2NhdGlvbi5zZWFyY2goKTtcbiAgICAgICAgJHNjb3BlLnF1ZXJ5LmRhdGUgPSBuZXcgRGF0ZSgkc2NvcGUucXVlcnkuZGF0ZSk7XG4gICAgICAgICRzY29wZS5sb2FkSXRlbXMoJHNjb3BlLnF1ZXJ5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGZXRjaCAxMDAgcmVjZW50IGV2ZW50c1xuICAgICAgICBhcGkuZ2V0KFwiMTAwXCIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmRhdGEgPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZXZlbnRzID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgcmVzID0gW107XG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLnNyY19pcCAhPSBcIlwiKXtcbiAgICAgICAgICAgIGlmIChcIlNvdXJjZVwiIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJJUDRcIiBpbiBpdGVtLlNvdXJjZVswXSAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5Tb3VyY2VbMF0uSVA0WzBdLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkc2NvcGUuZmlsdGVyLnNyY19pcC50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkc2NvcGUuZmlsdGVyLnRydF9pcCAhPSBcIlwiKXtcbiAgICAgICAgICAgIGlmIChcIlRhcmdldFwiIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJJUDRcIiBpbiBpdGVtLlRhcmdldFswXSAmJiBcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5UYXJnZXRbMF0uSVA0WzBdLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkc2NvcGUuZmlsdGVyLnRydF9pcC50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXMucHVzaCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJHNjb3BlLmZpbHRlci5jYXRlZ29yeSAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5DYXRlZ29yeVswXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlci5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuZGVzYyAhPSBcIlwiKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5EZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlci5kZXNjLnRvTG93ZXJDYXNlKCkpID4gLTEpXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJHNjb3BlLmZpbHRlci5mbG93c19mcm9tICE9IFwiXCIpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLkZsb3dDb3VudCA+IE51bWJlcigkc2NvcGUuZmlsdGVyLmZsb3dzX2Zyb20pKVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzY29wZS5maWx0ZXIuZmxvd3NfdG8gIT0gXCJcIikge1xuICAgICAgICAgICAgaWYgKGl0ZW0uRmxvd0NvdW50IDwgTnVtYmVyKCRzY29wZS5maWx0ZXIuZmxvd3NfdG8pKVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDEpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKDApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxvZ2ljdmFsdWUgPSAxO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbG9naWN2YWx1ZSA9IGxvZ2ljdmFsdWUgKiByZXNbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvZ2ljdmFsdWUgPT0gMSA/IHRydWUgOiBmYWxzZTtcblxuICAgIH1cblxufSk7XG5cbmFwcC5kaXJlY3RpdmUoJ3ZhbGlkYXRlSG91cnMnLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgdG8gPSBbXTtcbiAgICB2YXIgZnJvbSA9IFtdO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJsKSB7XG4gICAgICAgICAgICBjdHJsLiR2YWxpZGF0b3JzLnRpbWUgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnMubmdNb2RlbCA9PSBcInF1ZXJ5LmZyb21cIiAmJiB2aWV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IHZpZXdWYWx1ZS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvID0gdmlld1ZhbHVlLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvLmxlbmd0aCA9PSAyIHx8IGZyb20ubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICBpZiAodG9bMF0gPCBmcm9tWzBdIHx8ICh0b1swXSA8PSBmcm9tWzBdICYmIHRvWzFdIDwgZnJvbVsxXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgdG9bMF0gPCAwIHx8IHRvWzBdID4gMjMgfHwgdG9bMV0gPCAwIHx8IHRvWzFdID4gNTkgfHwgZnJvbVswXSA8IDAgfHwgZnJvbVswXSA+IDIzIHx8IGZyb21bMV0gPCAwIHx8IGZyb21bMV0gPiA1OVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ2hvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCB1c2VyLCAkdGltZW91dCwgJGludGVydmFsLCAkbG9nLCAkbG9jYWxTdG9yYWdlLCAkcm91dGUpIHtcbiAgICAkc2NvcGUuYWN0aXZlR3JpZCA9IGZhbHNlO1xuICAgICRzY29wZS5yZWZyZXNoX2ludGVydmFsID0gMTA7XG4gICAgXG4gICAgLy8gVG8gc3RvcmUgaW50ZXJ2YWwgSURcbiAgICB2YXIgcmVmcmVzaCA9IHVuZGVmaW5lZDtcbiAgICAkc2NvcGUucmVmcmVzaF9lbmFibGVkID0gYW5ndWxhci5pc0RlZmluZWQocmVmcmVzaCk7XG5cbiAgICAkc2NvcGUuYXBpcyA9IFtdO1xuICAgIFxuICAgICRzY29wZS5vcGVuTWVudSA9IGZ1bmN0aW9uKCRtZE9wZW5NZW51LCBldikge1xuICAgICAgICBvcmlnaW5hdG9yRXYgPSBldjtcbiAgICAgICAgJG1kT3Blbk1lbnUoZXYpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuYWRkSXRlbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnYWRkSXRlbScpO1xuICAgIH1cblxuICAgICRzY29wZS5lbmFibGVHcmlkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFbmFibGUgZ3JpZCcpXG4gICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdlbmFibGVHcmlkJyk7XG4gICAgICAgICRzY29wZS5hY3RpdmVHcmlkID0gISRzY29wZS5hY3RpdmVHcmlkO1xuICAgIH1cbiAgICAkc2NvcGUuJG9uKCdyZXF1ZXN0UmVkcmF3JywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVxdWVzdCBhY2NlcHRlZFwiKTtcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmNsZWFyQ2FjaGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGxvZy5kZWJ1ZyhcImRlbGV0aW5nIHRpbWVzdGFtcFwiKVxuICAgICAgICBkZWxldGUgJGxvY2FsU3RvcmFnZVsndGltZXN0YW1wJ107XG4gICAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHJlZnJlc2gpKSB7XG4gICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKHJlZnJlc2gpO1xuICAgICAgICAgICAgcmVmcmVzaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdicm9hZGNhc3QgZmFpbGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZnJlc2ggPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8kc2NvcGUuY2xlYXJDYWNoZSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdicm9hZGNhc3QnKVxuICAgICAgICAgICAgICAgICRzY29wZS4kYnJvYWRjYXN0KCdyZWZyZXNoRGF0YScpO1xuICAgICAgICAgICAgfSwgJHNjb3BlLnJlZnJlc2hfaW50ZXJ2YWwqMTAwMCk7XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUucmVmcmVzaF9lbmFibGVkID0gYW5ndWxhci5pc0RlZmluZWQocmVmcmVzaClcblxuICAgIH1cblxufSk7XG5cbmFwcC5jb250cm9sbGVyKCdib3gnLCBmdW5jdGlvbigkc2NvcGUsICRsb2csICRtZERpYWxvZywgUFJPVE9DT0xTLCBUWVBFUywgQ0FURUdPUklFUywgUElFQ0hBUlQsIEFSRUEsIGFwaSwgdXNlciwgJG1kTWVkaWEsICRsb2NhbFN0b3JhZ2UsICR0aW1lb3V0KXtcbiAgICBmdW5jdGlvbiB0aW1lU2hpZnQob2Zmc2V0KSB7IFxuICAgICAgICAkc2NvcGUuYm94LmNvbmZpZy5iZWdpbnRpbWUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYm94KVxuICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChvZmZzZXQpKVxuICAgICAgICAgICAgICAgIG5vdy5zZXRIb3Vycyhub3cuZ2V0SG91cnMoKSAtIE51bWJlcihvZmZzZXQpKTtcblxuICAgICAgICAgICAgbm93LnNldEhvdXJzKG5vdy5nZXRIb3VycygpIC0gJHNjb3BlLmJveC5jb25maWcucGVyaW9kKTtcbiAgICAgICAgICAgIHJldHVybiBub3c7XG4gICAgICAgIH0pKCk7XG4gICAgfVxuXG4gICAgdGltZVNoaWZ0KCk7XG5cbiAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAkc2NvcGUub3Blbk1lbnUgPSBmdW5jdGlvbigkbWRPcGVuTWVudSwgZXYpIHtcbiAgICAgICAgb3JpZ2luYXRvckV2ID0gZXY7XG4gICAgICAgICRtZE9wZW5NZW51KGV2KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG4gICAgJHNjb3BlLmJhY2t1cE1vZGVsID0ge307XG5cbiAgICAkc2NvcGUucHJvdG9jb2wgPSBQUk9UT0NPTFM7XG4gICAgJHNjb3BlLnR5cGVzID0gVFlQRVM7XG4gICAgJHNjb3BlLmNhdGVnb3JpZXMgPSBDQVRFR09SSUVTO1xuICAgIFxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBFZGl0IG1vZGUgaGFuZGxpbmdcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAvLyBUcmlnZ2VyIGVkaXRpbmcgbW9kZSBhbmQgc2F2ZSBjdXJyZW50IHN0YXRlXG4gICAgJHNjb3BlLmVkaXQgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgICAgJHNjb3BlLmVkaXRNb2RlID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLmJhY2t1cE1vZGVsID0gYW5ndWxhci5jb3B5KGJveCk7XG4gICAgICAgICRzY29wZS4kZW1pdChcInN3aXRjaC1kcmFnXCIpO1xuICAgIH1cblxuICAgIC8vIFNhdmUgY2hhbmdlcyBhbmQgZGlzYWJsZSBlZGl0IG1vZGVcbiAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUudXNlcigpO1xuICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdwaWVjaGFydCcpIHtcbiAgICAgICAgICAgICRzY29wZS5ib3gub3B0aW9ucyA9IFBJRUNIQVJULm9wdGlvbnM7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdiYXJjaGFydCcpXG4gICAgICAgICAgICAkc2NvcGUuYm94Lm9wdGlvbnMgPSBBUkVBLm9wdGlvbnM7XG4gICAgICAgIFxuXG4gICAgICAgICRzY29wZS5iYWNrdXBNb2RlbCA9IHt9O1xuXG4gICAgICAgICRzY29wZS5ib3guY29uZmlnLnR5cGUgPSAkc2NvcGUuYm94LnR5cGU7XG4gICAgICAgIFxuICAgICAgICAvLyBEaXNhYmxlIGVkaXQgbW9kZVxuICAgICAgICAkc2NvcGUuZWRpdE1vZGUgPSBmYWxzZTtcblxuICAgICAgICBcbiAgICAgICAgLy8gU2hpZnQgdGltZSBmb3IgcXVlcnlcbiAgICAgICAgdGltZVNoaWZ0KCk7XG5cbiAgICAgICAgJHNjb3BlLiRlbWl0KFwic3dpdGNoLWRyYWdcIik7XG4gICAgICAgIC8vIEdldCByZXF1aXJlZCBkYXRhXG4gICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ3BpZWNoYXJ0JyB8fCAkc2NvcGUuYm94LnR5cGUgPT0gJ2JhcmNoYXJ0Jykge1xuICAgICAgICAgICAgYXBpLmdldCgnYWdnJywgJHNjb3BlLmJveC5jb25maWcsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlOyAgICBcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ3RvcCcpIHtcbiAgICAgICAgICAgIGFwaS5nZXQoJ3RvcCcsICRzY29wZS5ib3guY29uZmlnLCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTsgICAgXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoJHNjb3BlLmJveC50eXBlID09ICdzdW0nKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCdjb3VudCcsICRzY29wZS5ib3guY29uZmlnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgICAkc2NvcGUuY2hhbmdlU2VsZWN0b3IgPSBmdW5jdGlvbihzZWwpIHtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5ib3guZGF0YSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZhbHVlLnZhbHVlcywgZnVuY3Rpb24odmFsLCBrKSB7XG4gICAgICAgICAgICAgICAgdmFsWydzZWxlY3RvciddID0gc2VsO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgJHNjb3BlLiRlbWl0KCdyZXF1ZXN0UmVkcmF3JylcblxuICAgIH1cblxuICAgICRzY29wZS5jaGFuZ2VTZWxlY3Rvcigkc2NvcGUuYm94LnNlbGVjdG9yKTtcblxuICAgIFxuXG4gICAgLy8gUmV2ZXJ0IHRvIG9yaWdpbmFsIGFuZCBkaXNhYmxlIGVkaXQgbW9kZVxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgICAgJHNjb3BlLmJveCA9IGFuZ3VsYXIuY29weSgkc2NvcGUuYmFja3VwTW9kZWwpO1xuICAgICAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSB7fTtcbiAgICAgICAgJHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG4gICAgICAgICRzY29wZS4kZW1pdChcInN3aXRjaC1kcmFnXCIpO1xuICAgIH1cbiAgICBcbiAgICAkc2NvcGUudG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVTaGlmdCgpXG4gICAgICAgIGFwaS5nZXQoJ3RvcCcsICRzY29wZS5ib3guY29uZmlnLCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICB2YXIgY2FjaGVfdGltZSA9IChuZXcgRGF0ZSgpIC0gbmV3IERhdGUoJGxvY2FsU3RvcmFnZVsndGltZXN0YW1wJ10pKS8xMDAwO1xuICAgIGlmIChpc05hTihjYWNoZV90aW1lKSlcbiAgICAgICAgY2FjaGVfdGltZSA9IDMwMCArIDEwO1xuXG4gICAgXG5cbiAgICBcbiAgICAvLyBTaG93IGxvYWRpbmcgaW5kaWNhdG9yXG4gICAgaWYgKGNhY2hlX3RpbWUgPCAzMDApXG4gICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgIGVsc2Uge1xuICAgICAgICAkc2NvcGUuYm94LmxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZygnRGF0YSBpcyBjYWNoZWQsIHJlZHJhdycpXG4gICAgICAgIFxuICAgIH1cblxuICAgICRzY29wZS4kb24oJ2dyaWRzdGVyLWl0ZW0taW5pdGlhbGl6ZWQnLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGlmICgkc2NvcGUuYm94LnR5cGUgPT0gJ3BpZWNoYXJ0JyB8fCAkc2NvcGUuYm94LnR5cGUgPT0gJ2JhcmNoYXJ0Jykge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7ICRzY29wZS4kZW1pdCgncmVxdWVzdFJlZHJhdycpO30sIDUwMCk7XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSgpIHtcbiAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSBcInBpZWNoYXJ0XCIgfHwgJHNjb3BlLmJveC50eXBlID09IFwiYmFyY2hhcnRcIikge1xuICAgICAgICAgICAgLy8gVGhlIGJveCBpcyBhIGNoYXJ0XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmJveC50eXBlID09ICdwaWVjaGFydCcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYm94Lm9wdGlvbnMgPSBQSUVDSEFSVC5vcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAnYmFyY2hhcnQnKVxuICAgICAgICAgICAgICAgICRzY29wZS5ib3gub3B0aW9ucyA9IGFuZ3VsYXIuY29weShBUkVBLm9wdGlvbnMpO1xuICAgICAgICAgICBcbiAgICAgICAgICAgICRzY29wZS5ib3guY29uZmlnLnR5cGUgPSAkc2NvcGUuYm94LnR5cGU7XG5cbiAgICAgICAgICAgIGlmIChjYWNoZV90aW1lID4gMzAwKSB7XG4gICAgICAgICAgICAgICAgYXBpLmdldCgnYWdnJywgJHNjb3BlLmJveC5jb25maWcsIGZhbHNlLCB0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgncmVxdWVzdFJlZHJhdycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAndG9wJyAmJiBjYWNoZV90aW1lID4gMzAwKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCd0b3AnLCAkc2NvcGUuYm94LmNvbmZpZywgZmFsc2UsIHRydWUpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3gubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5ib3guZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5ib3gudHlwZSA9PSAnc3VtJyAmJiBjYWNoZV90aW1lID4gMzAwKSB7XG4gICAgICAgICAgICBhcGkuZ2V0KCdjb3VudCcsICRzY29wZS5ib3guY29uZmlnLCBmYWxzZSwgdHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmJveC5kYXRhID0gZGF0YTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2V0RGF0YSgpO1xuXG5cbiAgICAkc2NvcGUuJG9uKCdyZWZyZXNoRGF0YScsIGZ1bmN0aW9uKCkgeyBcbiAgICAgICAgLy9jb25zb2xlLmxvZygncmVmcmVzaGluZycpOyBcbiAgICAgICAgY2FjaGVfdGltZSA9IDMwMCsxMDsgXG4gICAgICAgIGdldERhdGEoKTtcbiAgICB9KVxuIFxuICAgICRzY29wZS51c2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZXR0aW5ncyA9IGFuZ3VsYXIuY29weSgkc2NvcGUuaXRlbXMpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNldHRpbmdzW2ldW1wiZGF0YVwiXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2V0dGluZ3NbaV1bXCJvcHRpb25zXCJdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgcXVlcnkgPSB7XG4gICAgICAgICAgICBcInNldHRpbmdzXCIgOiBzZXR0aW5nc1xuICAgICAgICB9XG5cbiAgICAgICAgLy8kbG9nLmluZm8ocXVlcnkpXG4gICAgICAgIHVzZXIucHV0KHF1ZXJ5KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgICAgICRsb2cuZXJyb3IoZGF0YSlcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignc2F2ZVVzZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnVzZXIoKVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLiRvbignZ3JpZHN0ZXItaXRlbS1yZXNpemVkJywgZnVuY3Rpb24oZ3JpZHN0ZXIpIHtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJyZXF1ZXN0IGFjY2VwdGVkXCIpO1xuICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xuICAgICAgICB9LCAxMDApO1xuICAgIH0pXG5cblxuICAgICRzY29wZS5zaG93RWRpdCA9IGZ1bmN0aW9uKGV2LCBib3gpIHtcbiAgICAgICAgJHNjb3BlLmJhY2t1cE1vZGVsID0gYW5ndWxhci5jb3B5KCRzY29wZS5ib3gpO1xuXG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdlZGl0Qm94Q29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2VkaXQuaHRtbCcsXG4gICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6dHJ1ZSxcbiAgICAgICAgICAgIGZ1bGxzY3JlZW46IHRydWUsXG4gICAgICAgICAgICBsb2NhbHM6IHtcbiAgICAgICAgICAgICAgICBib3g6ICRzY29wZS5ib3hcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGFuc3dlcikge1xuICAgICAgICAgICAgJHNjb3BlLnNhdmUoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7IC8vIGNhbmNlbFxuICAgICAgICAgICAgJHNjb3BlLmJveCA9IGFuZ3VsYXIuY29weSgkc2NvcGUuYmFja3VwTW9kZWwpO1xuICAgICAgICAgICAgJHNjb3BlLmJhY2t1cE1vZGVsID0ge307XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgfTtcblxuICBcbn0pO1xuXG5hcHAuY29udHJvbGxlcignZ3JpZCcsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsICRsb2cvKiwgJG1kTWVkaWEsICR3aW5kb3cqLywgdXNlcikge1xuICAgICRzY29wZS5vcHQgPSB7XG4gICAgICAgIG91dGVyTWFyZ2luOiBmYWxzZSxcbiAgICAgICAgY29sdW1uczogOCxcbiAgICAgICAgcHVzaGluZzogdHJ1ZSxcbiAgICAgICAgcm93SGVpZ2h0OiAxNzAsXG4gICAgICAgIGNvbFdpZHRoIDogJ2F1dG8nLFxuICAgICAgICBmbG9hdGluZzogdHJ1ZSxcbiAgICAgICAgc3dhcHBpbmc6IHRydWUsXG4gICAgICAgIG1vYmlsZUJyZWFrUG9pbnQ6IDkzMyxcbiAgICAgICAgZHJhZ2dhYmxlOiB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVzaXphYmxlOiB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgIGhhbmRsZXM6IFsnbicsICdlJywgJ3MnLCAndycsICdzZScsICdzdyddLFxuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oZXZlbnQsICRlbGVtZW50LCB3aWRnZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc2l6ZSBlbmRcIik7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgncmVxdWVzdFJlZHJhdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbignZW5hYmxlR3JpZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoJHNjb3BlLm9wdC5yZXNpemFibGUuZW5hYmxlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnc2F2ZVVzZXInKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgJHNjb3BlLm9wdC5yZXNpemFibGUuZW5hYmxlZCA9ICEkc2NvcGUub3B0LnJlc2l6YWJsZS5lbmFibGVkOyBcbiAgICAgICAgJHNjb3BlLm9wdC5kcmFnZ2FibGUuZW5hYmxlZCA9ICEkc2NvcGUub3B0LmRyYWdnYWJsZS5lbmFibGVkOyBcbiAgICB9KVxuXG4gICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKGJveCkge1xuICAgICAgICB2YXIgdG1wID0gJHNjb3BlLml0ZW1zLnNwbGljZSgkc2NvcGUuaXRlbXMuaW5kZXhPZihib3gpLCAxKTtcbiAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ3NhdmVVc2VyJyk7XG4gICAgfTtcblxuICAgICRzY29wZS5pdGVtcyA9IHVzZXIuY29uZmlnKCk7XG4gICAgXG4gICAgJHNjb3BlLiRvbignYWRkSXRlbScsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgICAgIFwidGl0bGVcIiA6IFwiTmV3IGJveFwiLFxuICAgICAgICAgICAgXCJsb2FkaW5nXCIgOiBmYWxzZSxcbiAgICAgICAgICAgIHNpemVYOiAxLFxuICAgICAgICAgICAgc2l6ZVk6IDEsXG4gICAgICAgICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgICAgICAgY29uZmlnIDoge1xuICAgICAgICAgICAgICAgIHBlcmlvZCA6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vcm93IDogcm93LFxuICAgICAgICAgICAgLy9jb2wgOiBjb2xcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5pdGVtcy5wdXNoKGl0ZW0pXG4gICAgfSk7XG5cblxufSlcblxuXG5hcHAuY29udHJvbGxlcignZWRpdEJveENvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRtZERpYWxvZywgYm94LCBQUk9UT0NPTFMsIFRZUEVTLCBDQVRFR09SSUVTKSB7XG4gICAgXG4gICAgJHNjb3BlLmJveCA9IGJveDtcbiAgICBcbiAgICAkc2NvcGUuYmFja3VwTW9kZWwgPSBhbmd1bGFyLmNvcHkoYm94KTtcblxuICAgICRzY29wZS5jYXRlZ29yaWVzID0gQ0FURUdPUklFUztcbiAgICAkc2NvcGUucHJvdG9jb2xzID0gUFJPVE9DT0xTO1xuICAgICRzY29wZS50eXBlcyA9IFRZUEVTO1xuXG4gICAgJHNjb3BlLnNhdmVBbmRDbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkbWREaWFsb2cuaGlkZSgpO1xuICAgIH07XG4gICAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuICAgICAgICAkbWREaWFsb2cuaGlkZShhbnN3ZXIpO1xuICAgIH07XG5cblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxsaW5nXCIpO1xuICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoYW5nZVNlbGVjdG9yID0gZnVuY3Rpb24oc2VsKSB7XG4gICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuYm94LmRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2YWx1ZS52YWx1ZXMsIGZ1bmN0aW9uKHZhbCwgaykge1xuICAgICAgICAgICAgICAgIHZhbFsnc2VsZWN0b3InXSA9IHNlbDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgICRzY29wZS4kZW1pdCgncmVxdWVzdFJlZHJhdycpXG5cbiAgICB9XG5cblxufSk7XG5cbiIsImFwcC5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRsb2NhdGlvbiwgJGxvZywgdXNlcikge1xuXHQkc2NvcGUudGl0bGUgPSBcIkxvZ2luIHRvIE5lbWVhIERhc2hib2FyZFwiO1xuXHQkc2NvcGUubG9naW5CdG4gPSBcIkxvZ2luXCI7XG4gICAgXG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKGNyZWQpIHtcblx0XHQkc2NvcGUubG9naW5CdG4gPSBcIkF1dGhlbnRpY2F0aW5nLi4uXCI7XG4gICAgICAgICRzY29wZS5sb2dpbkJ0bkRpc2FibGVkID0gdHJ1ZTtcblxuICAgICAgICB1c2VyLmF1dGgoY3JlZClcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTsgICAgXG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihtc2cpIHtcbiAgICAgICAgICAgICRzY29wZS5lcnJvcl9tZXMgPSBtc2c7XG4gICAgICAgICAgICAkc2NvcGUubG9naW5CdG4gPSBcIkxvZ2luXCJcbiAgICAgICAgICAgICRzY29wZS5sb2dpbkJ0bkRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIH0pXG4gICAgfVxuXG5cdFx0XG5cdFx0Lypsb2dpbkF1dGguZmV0Y2hVc2VyKHVzZXIpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuXG5cdFx0XHQkbG9nLmluZm8oZGF0YSk7XG5cblx0XHRcdGlmIChkYXRhW1wic3VjY2Vzc1wiXSA9PSB0cnVlKSB7XG5cdFx0XHRcdC8vJGxvZy5pbmZvKGRhdGEpO1x0XG5cdFx0XHRcdCRzY29wZS5sb2dpbkJ0biA9IFwiU3VjY2Vzc1wiO1xuXHRcdFx0XHQkbG9jYXRpb24ucGF0aChcIi9cIik7XG5cdFx0XHRcdGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdsb2dnZWRJbicsIHRydWUpO1xuXHRcdFx0XHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnbG9nZ2VkSW4ucHcnLCBzaGEyNTZfZGlnZXN0KGRhdGEucGFzc3dvcmQpKTtcdFxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdCRsb2cuZXJyb3IoXCJlcnJvciAtIGJhZCBwYXNzd29yZFwiKTtcblx0XHRcdFx0JHNjb3BlLmVycm9yX21lcyA9IFwiQmFkIHBhc3N3b3JkXCI7XG5cdFx0XHRcdCRzY29wZS5sb2dpbkJ0biA9IFwiTG9naW5cIjtcblx0XHRcdFx0bG9naW5Db3JyZWN0ID0gZmFsc2U7XG5cdFx0XHRcdGxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0KCdsb2dnZWRJbicsIGZhbHNlKTtcdFxuXHRcdFx0fVxuXHRcdH0pOyovXG59KTtcblxuXG4iLCJhcHAuY29udHJvbGxlcigncHJvZmlsZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIHVzZXIsIGFwaSkge1xuICAgICRzY29wZS51c2VyID0gdXNlci5jb25maWcoKTtcblxuICAgICRzY29wZS5lZGl0VXNlciA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2codXNlcik7XG4gICAgfVxufSlcbiIsImFwcC5jb250cm9sbGVyKCd1c2Vyc0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsIGFwaSwgdXNlciwgJG1kRGlhbG9nKSB7XG4gICAgdXNlci5nZXQodHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICRzY29wZS51c2VycyA9IGRhdGE7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuZGVsZXRlVXNlciA9IGZ1bmN0aW9uKHVzZXJfaWQpIHtcbiAgICAgICAgY29uc29sZS5sb2codXNlcl9pZCk7XG4gICAgICAgIHVzZXIuZGVsZXRlKHVzZXJfaWQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB1c2VyLmdldCh0cnVlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBkYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgJHNjb3BlLmFkZFVzZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAkc2NvcGUuYWRkVXNlckJveCA9IHRydWU7XG4gICAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhZGRVc2VyQ29udHJvbGxlcicsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2FkZFVzZXIuaHRtbCcsXG4gICAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcbiAgICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6dHJ1ZSxcbiAgICAgICAgICAgIGZ1bGxzY3JlZW46IHRydWUsXG4gICAgICAgICAgICAvKmxvY2Fsczoge1xuICAgICAgICAgICAgICAgIGJveDogJHNjb3BlLmJveFxuICAgICAgICAgICAgfSwqL1xuICAgICAgICB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbihhbnN3ZXIpIHtcbiAgICAgICAgICAgIC8vJHNjb3BlLnNhdmUoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFuc3dlcilcbiAgICAgICAgICAgIHVzZXIucG9zdChhbnN3ZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgdXNlci5nZXQodHJ1ZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VycyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9LCBmdW5jdGlvbigpIHsgLy8gY2FuY2VsXG4gICAgICAgICAgICAvLyRzY29wZS5ib3ggPSBhbmd1bGFyLmNvcHkoJHNjb3BlLmJhY2t1cE1vZGVsKTtcbiAgICAgICAgICAgIC8vJHNjb3BlLmJhY2t1cE1vZGVsID0ge307XG4gICAgICAgIH0pO1xuXG4gICAgfVxufSk7XG5cbmFwcC5jb250cm9sbGVyKCdhZGRVc2VyQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJG1kRGlhbG9nKSB7XG5cbiAgICAkc2NvcGUudXNlciA9IHtcbiAgICAgICAgdXNlcm5hbWUgOiAnJyxcbiAgICAgICAgbmFtZSA6ICcnLFxuICAgICAgICBzdXJuYW1lIDogJycsXG4gICAgICAgIHBhc3N3b3JkIDogJycsXG4gICAgICAgIHNldHRpbmdzIDogW11cbiAgICB9XG4gICAgJHNjb3BlLnNhdmVBbmRDbG9zZSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2codXNlcilcbiAgICAgICAgJG1kRGlhbG9nLmhpZGUodXNlcik7XG4gICAgfTtcblxuICAgICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbihib3gpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxsaW5nXCIpO1xuICAgICAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG4gICAgfVxufSlcbiIsImFwcC5kaXJlY3RpdmUoJ2dyaWRzdGVyRHluYW1pY0hlaWdodCcsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuXG4gICAgdmFyIGRpcmVjdGl2ZSA9IHtcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGl0ZW06IFwiPVwiIC8vZ3JpZHN0ZXIgaXRlbVxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgICByZXN0cmljdDogJ0EnXG4gICAgfTtcbiAgICByZXR1cm4gZGlyZWN0aXZlO1xuXG4gICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCkgeyBcbiAgICAgICAgICAgIHZhciByb3dIZWlnaHRPcHRpb24gPSAyNzA7IC8vIENoYW5nZSB0aGlzIHZhbHVlIHdpdGggeW91ciBvd24gcm93SGVpZ2h0IG9wdGlvblxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHJvd0hlaWdodE9wdGlvbiAqIHNjb3BlLml0ZW0uc2l6ZVk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHNjb3BlLml0ZW0udGl0bGUpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm5ld1ZhbDogXCIgKyBuZXdWYWwgKyBcIiAgICAgaGVpZ2h0OiBcIiArIGhlaWdodClcbiAgICAgICAgICAgIGlmKG5ld1ZhbCA+IGhlaWdodCl7XG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IE1hdGguZmxvb3IobmV3VmFsIC8gcm93SGVpZ2h0T3B0aW9uKTtcbiAgICAgICAgICAgICAgICAvL2RpdisrO1xuICAgICAgICAgICAgICAgIHNjb3BlLml0ZW0uc2l6ZVkgPSBkaXY7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cbn0pO1xuIiwiLy8gRmlsdGVyIHRvIGNvbnZlcnQgSURFQSBmb3JtYXQgZnJvbSBNb25nb0RCIHRvIHN0YW5kYXJkaXplZCBJREVBIGZvcm1hdFxuYXBwLmZpbHRlcignaWRlYScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgcmVzID0ge307XG5cbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGlucHV0LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5ICE9ICdfaWQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlWyckZGF0ZSddKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc1trZXldID0gbmV3IERhdGUodmFsdWVbJyRkYXRlJ10pLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxOSkgKyAnWic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxufSk7XG4iLCJhcHAuZmlsdGVyKCdqc29uMmh0bWwnLCBmdW5jdGlvbigkc2NlLCAkZmlsdGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBodG1sID0gXCJcIjtcblxuICAgICAgICBhbmd1bGFyLmZvckVhY2goaW5wdXQsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgIT0gXCJfaWRcIikge1xuICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXY+XCI7XG5cbiAgICAgICAgICAgIC8vIFRoZSB0dXBsZSBpcyBuZXN0ZWRcbiAgICAgICAgICAgIGlmICgodHlwZW9mIHZhbHVlKSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGlmICgodHlwZW9mIGtleSkgIT0gJ251bWJlcicgJiYga2V5ICE9IFwiJGRhdGVcIilcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxlbT5cIiArIGtleSArIFwiPC9lbT46IFwiO1xuICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPVxcXCJzdWJcXFwiPlwiICsgJGZpbHRlcignanNvbjJodG1sJykodmFsdWUpICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCh0eXBlb2Yga2V5ICE9ICdudW1iZXInKSAmJiBrZXkgIT0gXCIkZGF0ZVwiKVxuICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArIFwiPGVtPlwiICsga2V5ICsgXCI8L2VtPjogXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgZGF0ZSAoSSBrbm93LCBpdCBpcyBzb29vb28gZGlydHkpXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMTAwMDAwMDAwMDAwMClcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgJGZpbHRlcignZGF0ZScpKHZhbHVlLCd5eXl5L01NL2RkIEg6bW06c3MnKSArIFwiPC9zcGFuPlwiO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyBcIjxzcGFuPlwiICsgdmFsdWUgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGh0bWwgPSBodG1sICsgXCI8L2Rpdj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuICRzY2UudHJ1c3RBcygnaHRtbCcsIGh0bWwpO1xuICAgIH0gICAgIFxufSk7XG5cbiIsImFwcC5zZXJ2aWNlKCdhcGknLCBmdW5jdGlvbigkaHR0cCwgJGxvZywgJG1kVG9hc3QsICRsb2NhbFN0b3JhZ2UsIFBJRUNIQVJULCBDT05GSUcpIHtcblxuXHR2YXIgYWRkciA9IENPTkZJR1tcImhvc3RcIl0gKyBcIjpcIiArIENPTkZJR1tcInBvcnRcIl0gKyBcIi9cIiArIENPTkZJR1tcInZlcnNpb25cIl0gKyBcIi9ldmVudHMvXCI7XG5cbiAgICB0aGlzLmF1dGggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbmZpZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkaHR0cC5nZXQoJ2h0dHA6Ly9iZW5lZml6aW8ubGliZXJvdXRlci5vcmc6NTU1NS9jb25maWcnKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkciA9IGRhdGEuaG9zdCArICc6JyArIGRhdGEucG9ydCArIGRhdGEuZXZlbnRzO1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVsnY29uZmlnJ10gPSBkYXRhO1xuICAgICAgICAgICAgYWxlcnQoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24odXJsLCBwYXJhbXMsIGluZm8sIGNhY2hlKSB7XG5cdFx0cmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkdFVFwiLFxuICAgICAgICAgICAgcGFyYW1zIDogcGFyYW1zLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB0aGlzLmF1dGgoKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRGF0YSBzdWNjZXNzdWxseSBsb2FkZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJzdWNjZXNzLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNhY2hlKVxuICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2VbJ3RpbWVzdGFtcCddID0gbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRsb2cuZXJyb3IoJ0Nhbm5vdCBmZXRjaCBkYXRhJyk7XG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2Fubm90IGxvYWQgZGF0YScpXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgIC50aGVtZShcImVycm9yLXRvYXN0XCIpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMucG9zdCA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgaW5mbykge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChhZGRyICsgdXJsLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0RhdGEgc3VjY2Vzc2Z1bGx5IGxvYWRlZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcInN1Y2Nlc3MtdG9hc3RcIilcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7ICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcdCRsb2cuZXJyb3IoJ0Nhbm5vdCBmZXRjaCBkYXRhJyk7XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnQ2Fubm90IGZldGNoIGRhdGEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMucHV0ID0gZnVuY3Rpb24odXJsLCBkYXRhLCBpbmZvKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wdXQoYWRkciArIHVybCwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdEYXRhIHN1Y2Nlc3NmdWxseSBsb2FkZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJzdWNjZXNzLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhOyAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXHQkbG9nLmVycm9yKCdDYW5ub3QgZmV0Y2ggZGF0YScpO1xuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNob3coXG4gICAgICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0Nhbm5vdCBmZXRjaCBkYXRhJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW1lKFwiZXJyb3ItdG9hc3RcIilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cblxufSk7XG5cblxuIiwiYXBwLmRpcmVjdGl2ZShcInNpZGViYXJNZW51XCIsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuXHRcdFx0c2VjdGlvbjogJz0nXG5cdFx0fSxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpZGViYXItbWVudS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkbWRTaWRlbmF2LCAkbG9jYXRpb24sIE1FTlUsIHVzZXIpIHtcbiAgICAgICAgICAgICRzY29wZS5tZW51ID0gTUVOVTtcblxuICAgICAgICAgICAgJHNjb3BlLmlzQWN0aXZlID0gZnVuY3Rpb24oY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHJldHVybignIycgKyAkbG9jYXRpb24ucGF0aCgpID09IGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlTW9kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgncmVxQ2hhbmdlTW9kZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkc2NvcGUuZW5hYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZUl0ZW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlQnRuID0gXCJ0b2dnbGVkXCI7XG4gICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgICRzY29wZS5jbG9zZUxlZnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdXNlci5sb2dvdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiBcbiAgICAgICAgfVxuXHR9O1xufSk7XG5cbmFwcC5kaXJlY3RpdmUoXCJ0b3BiYXJNZW51XCIsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuXHRcdHNjb3BlOiB7XG5cdFx0XHRzZWN0aW9uOiAnPSdcblx0XHR9LFxuXHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdG9wYmFyLW1lbnUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXIgOiBmdW5jdGlvbigkc2NvcGUsICRtZFNpZGVuYXYpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGVMZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJG1kU2lkZW5hdignbGVmdCcpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cdH07XG59KTtcblxuXG5hcHAuZGlyZWN0aXZlKFwiYm94ZXNcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdFx0c2NvcGU6IHtcblx0XHRcdHNlY3Rpb246ICc9J1xuXHRcdH0sXG5cdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ib3hlcy5odG1sJ1xuXHR9O1xufSk7XG5cblxuIiwiYXBwLnNlcnZpY2UoJ3VzZXInLCBmdW5jdGlvbigkbG9jYWxTdG9yYWdlLCAkaHR0cCwgJG1kVG9hc3QsICRsb2NhdGlvbiwgQ09ORklHKXtcbiAgICB2YXIgY2FjaGUgPSBudWxsO1xuXG4gICAgdmFyIGRhc2hib2FyZCA9IFtdO1xuXG5cdHZhciBhZGRyID0gQ09ORklHW1wiaG9zdFwiXSArIFwiOlwiICsgQ09ORklHW1wicG9ydFwiXSArIFwiL1wiICsgQ09ORklHW1widmVyc2lvblwiXSArIFwiL3VzZXJzL1wiO1xuXG4gICAgdGhpcy5jb25maWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgfVxuXG4gICAgdGhpcy5qd3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRsb2NhbFN0b3JhZ2VbXCJqd3RcIl07XG4gICAgfVxuXG4gICAgdGhpcy5hdXRoID0gZnVuY3Rpb24odXNlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhhZGRyKTtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYWRkciArIFwiYXV0aFwiLCBhbmd1bGFyLnRvSnNvbih1c2VyKSlcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdID0gZGF0YVtcImp3dFwiXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVE9ETzogZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGNvbmZpZyBhbmQgand0ID4+IGR1cGxpY2l0eVxuICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJkYXNoYm9hcmRcIl07XG4gICAgICAgICAgICAkbG9jYWxTdG9yYWdlW1wiZGFzaGJvYXJkXCJdID0gZGF0YVtcInNldHRpbmdzXCJdO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIHN0YXR1cykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc3RhdHVzKVxuICAgICAgICAgICAgLy8gTGV0IGl0IGJlIGhhbmRsZWQgYnkgY29udHJvbGxlclxuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMucHV0ID0gZnVuY3Rpb24oZGF0YSwgaW5mbykge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgdXJsIDogYWRkciwgXG4gICAgICAgICAgICBtZXRob2QgOiBcIlBVVFwiLFxuICAgICAgICAgICAgZGF0YSA6IGFuZ3VsYXIudG9Kc29uKGRhdGEpLFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KCdVc2VyIHNldHRpbmdzIHVwZGF0ZWQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJzdWNjZXNzLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhOyAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKG1zZywgc3RhdHVzKSB7XG4gICAgICAgICAgICBcdCRsb2cuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nIHNlbmRpbmcgdXNlciBkYXRhJyk7XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnU29tZXRoaW5nIHdlbnQgd3JvbmcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2dvdXQgdXNlclxuICAgIC8vIFJlbW92ZSBKV1QgZnJvbSBsb2NhbFN0b3JhZ2UgYW5kIGRlbGV0ZSBzZXNzaW9uIG9uIHNlcnZlclxuICAgIHRoaXMubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1c2VyID0gJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdO1xuXG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICB1cmwgOiBhZGRyICsgXCJsb2dvdXRcIixcbiAgICAgICAgICAgIG1ldGhvZCA6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzIDoge1xuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJyA6ICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgJGxvY2FsU3RvcmFnZVtcInRpbWVzdGFtcFwiXTtcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0xvZ291dCBzdWNjZXNzZnVsbCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybjsgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvciwgbXNnKSB7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoXCIvbG9naW5cIik7XG4gICAgICAgICAgICAgICAgZGVsZXRlICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgJGxvY2FsU3RvcmFnZVtcImRhc2hib2FyZFwiXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgJGxvY2FsU3RvcmFnZVtcInRpbWVzdGFtcFwiXTtcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNpbXBsZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0xvZ291dCBmYWlsZWQgb24gc2VydmVyIHNpZGUsIGJ1dCB5b3UgYXJlIGxvZ2dlZCBvdXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKFwidG9wIHJpZ2h0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24oYWxsdXNlcnMpIHtcbiAgICAgICAgdmFyIHVzZXIgPSAkbG9jYWxTdG9yYWdlW1widG9rZW5cIl07XG4gICAgICAgIFxuICAgICAgICBpZiAoYWxsdXNlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICAgICAgdXJsIDogYWRkcixcbiAgICAgICAgICAgICAgICBtZXRob2QgOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnMgOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJyA6IHVzZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvciwgbXNnKSB7XG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgJG1kVG9hc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaW1wbGV0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChcIkNhbm5vdCBmZXRjaCB1c2VycyBmcm9tIGRhdGFiYXNlXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVtZShcImVycm9yLXRvYXN0XCIpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHRoaXMucG9zdCA9IGZ1bmN0aW9uKHVzZXJEYXRhKSB7XG4gICAgICAgIHZhciB1c2VyID0gJGxvY2FsU3RvcmFnZVtcInRva2VuXCJdO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIsXG4gICAgICAgICAgICBtZXRob2QgOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGRhdGEgOiBhbmd1bGFyLnRvSnNvbih1c2VyRGF0YSksXG4gICAgICAgICAgICBoZWFkZXJzIDoge1xuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJyA6IHVzZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvciwgbXNnKSB7XG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxuICAgICAgICAgICAgICAgICRtZFRvYXN0XG4gICAgICAgICAgICAgICAgICAgIC5zaW1wbGV0KClcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KFwiQ2Fubm90IGNyZWF0ZSB1c2VyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXG4gICAgICAgICAgICAgICAgICAgIC50aGVtZShcImVycm9yLXRvYXN0XCIpXG4gICAgICAgICAgICApXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICB0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKHVzZXJJZCkge1xuICAgICAgICB2YXIgdXNlciA9ICRsb2NhbFN0b3JhZ2VbXCJ0b2tlblwiXTtcbiAgICAgICAgY29uc29sZS5sb2codXNlcklkKVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIHVybCA6IGFkZHIsXG4gICAgICAgICAgICBtZXRob2QgOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgcGFyYW1zIDoge1widXNlcklkXCIgOiB1c2VySWR9LFxuICAgICAgICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbicgOiB1c2VyXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IsIG1zZykge1xuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcbiAgICAgICAgICAgICAgICAkbWRUb2FzdFxuICAgICAgICAgICAgICAgICAgICAuc2ltcGxldCgpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChcIkNhbm5vdCBkZWxldGUgdXNlclwiKVxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oXCJ0b3AgcmlnaHRcIilcbiAgICAgICAgICAgICAgICAgICAgLmhpZGVEZWxheSgzMDAwKVxuICAgICAgICAgICAgICAgICAgICAudGhlbWUoXCJlcnJvci10b2FzdFwiKVxuICAgICAgICAgICAgKVxuICAgICAgICB9KTtcbiAgICB9XG5cblxuXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
